package build.`multi-module`.server

import mill.api.*
import mill.api.opt.*
import mill.javalib.*
import mill.javalib.publish.*
import millbuild.*

object `package` extends MavenSamplesBaseModule {

  def javacOptions = super.javacOptions() ++
    Opts("-source", "1.6", "-target", "1.6")

  def artifactName = "server"

  def jvmId = "zulu:11"

  def pomParentProject = Some(
    Artifact("com.example.maven-samples", "multi-module-parent", "1.0-SNAPSHOT")
  )

  def pomSettings = PomSettings(
    "Logic.",
    "",
    "",
    Seq(),
    VersionControl(None, None, None, None),
    Seq()
  )

  object test extends MavenTests with TestModule.Junit4 {

    def mvnDeps = super.mvnDeps() ++ Seq(
      Deps.junitDep,
      Deps.hamcrestCore,
      Deps.hamcrestLibrary,
      Deps.mockitoCore
    )

    def forkWorkingDir = moduleDir

    def testParallelism = false

    def testSandboxWorkingDir = false

  }

}
