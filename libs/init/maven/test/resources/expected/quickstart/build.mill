//| mill-version: SNAPSHOT
//| mill-jvm-version: system
package build
import mill.*
import mill.javalib.*
import mill.javalib.publish.*
import millbuild.Deps
object `package` extends MavenModule, PublishModule {

  def bomMvnDeps = Seq(Deps.junitBom)

  def javacOptions = Seq(
    "-source",
    "8",
    "-target",
    "8",
    "-XDcompilePolicy=simple",
    "-XDshould-stop=ifError=FLOW",
    "-Xplugin:ErrorProne"
  )

  def artifactName = "maven-3-9-11"

  def pomSettings = PomSettings(
    "",
    "com.mycompany.app",
    "http://www.example.com",
    Seq(),
    VersionControl(None, None, None, None),
    Seq()
  )

  def publishVersion = "1.0-SNAPSHOT"

  object test extends MavenTests, TestModule.Junit5 {

    def mvnDeps = Seq(Deps.junitJupiterApi, Deps.junitJupiterParams)

    def forkWorkingDir = moduleDir

    def testParallelism = false

    def testSandboxWorkingDir = false

  }

}
