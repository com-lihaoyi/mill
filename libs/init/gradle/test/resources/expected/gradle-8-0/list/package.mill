package build.list
import mill.*
import mill.api.opt.*
import mill.javalib.*
import mill.javalib.errorprone.ErrorProneModule
import millbuild.*
object `package` extends ProjectBaseModule, ErrorProneModule {

  def errorProneDeps = Seq(Deps.error_prone_core)

  def errorProneJavacEnableOptions =
    Opts("-XDshould-stop.ifError=FLOW", "-XDshouldStopPolicyIfError=FLOW")

  object test extends Tests, ErrorProneModule, TestModule.Junit5 {

    def errorProneDeps = Seq(Deps.error_prone_core)

    def errorProneOptions = Seq("-XepCompilingTestOnlyCode")

    def errorProneJavacEnableOptions =
      Opts("-XDshould-stop.ifError=FLOW", "-XDshouldStopPolicyIfError=FLOW")

  }
}
