mill-version: SNAPSHOT
mill-jvm-version: system
extends: Module

object app:
  extends: MavenModule
  moduleDeps: [utilities]
  mvnDeps:
  - org.apache.commons:commons-text
  depManagement:
  - org.apache.commons:commons-text:1.9
  javacOptions: [-source, 17, -target, 17]
  
  object test:
    extends: [MavenTests, TestModule.Junit5]
    mvnDeps:
    - org.junit.jupiter:junit-jupiter:5.9.1
    runMvnDeps:
    - org.junit.platform:junit-platform-launcher
    bomMvnDeps:
    - org.junit:junit-bom:5.9.1
    javacOptions: [-source, 17, -target, 17]
    testParallelism: false
    testSandboxWorkingDir: false

object list:
  extends: [MavenModule, mill.javalib.errorprone.ErrorProneModule]
  depManagement:
  - org.apache.commons:commons-text:1.9
  javacOptions: [-source, 17, -target, 17]
  errorProneDeps:
  - com.google.errorprone:error_prone_core:2.28.0
  errorProneJavacEnableOptions: [-XDshould-stop.ifError=FLOW, -XDshouldStopPolicyIfError=FLOW]
  
  object test:
    extends: [MavenTests, TestModule.Junit5, mill.javalib.errorprone.ErrorProneModule]
    mvnDeps:
    - org.junit.jupiter:junit-jupiter:5.9.1
    runMvnDeps:
    - org.junit.platform:junit-platform-launcher
    bomMvnDeps:
    - org.junit:junit-bom:5.9.1
    javacOptions: [-source, 17, -target, 17]
    errorProneDeps:
    - com.google.errorprone:error_prone_core:2.28.0
    errorProneOptions: [-XepCompilingTestOnlyCode]
    errorProneJavacEnableOptions: [-XDshould-stop.ifError=FLOW, -XDshouldStopPolicyIfError=FLOW]
    testParallelism: false
    testSandboxWorkingDir: false

object utilities:
  extends: [MavenModule, mill.javalib.errorprone.ErrorProneModule]
  moduleDeps: [list]
  depManagement:
  - org.apache.commons:commons-text:1.9
  javacOptions: [-source, 17, -target, 17]
  errorProneDeps:
  - com.google.errorprone:error_prone_core:2.28.0
  errorProneJavacEnableOptions: [-XDshould-stop.ifError=FLOW, -XDshouldStopPolicyIfError=FLOW]
