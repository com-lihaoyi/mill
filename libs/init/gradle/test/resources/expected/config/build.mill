package build

import mill.api._
import mill.javalib._

object `package` extends Module {

  object app extends MavenModule {

    def mvnDeps = super.mvnDeps() ++ Seq(mvn"org.apache.commons:commons-text")

    def moduleDeps = super.moduleDeps ++ Seq(build.utilities)

    def javacOptions = super.javacOptions() ++
      Seq("-source", "1.8", "-target", "1.8")

    def jvmId = "8"

    object tests extends MavenTests with TestModule.Junit5 {

      def mandatoryMvnDeps = super.mandatoryMvnDeps() ++ Seq(
        mvn"org.junit.jupiter:junit-jupiter:5.10.3",
        mvn"org.junit.platform:junit-platform-launcher"
      )

    }

  }
  object list extends MavenModule {

    def javacOptions = super.javacOptions() ++
      Seq("-source", "1.8", "-target", "1.8")

    def jvmId = "8"

    object tests extends MavenTests with TestModule.Junit5 {

      def mandatoryMvnDeps = super.mandatoryMvnDeps() ++ Seq(
        mvn"org.junit.jupiter:junit-jupiter:5.10.3",
        mvn"org.junit.platform:junit-platform-launcher"
      )

    }

  }
  object utilities extends MavenModule {

    def moduleDeps = super.moduleDeps ++ Seq(build.list)

    def javacOptions = super.javacOptions() ++
      Seq("-source", "1.8", "-target", "1.8")

    def jvmId = "8"

  }
}
