//| mill-version: SNAPSHOT
//| mill-jvm-version: zulu:21
//| mill-jvm-opts: []
package build

import mill._
import mill.javalib._

object `package` extends Module {

  object app extends MavenModule {

    def mvnDeps = super.mvnDeps() ++
      Seq(mvn"org.apache.commons:commons-text:1.9")

    def moduleDeps = super.moduleDeps ++ Seq(build.utilities)

    def javacOptions = super.javacOptions() ++
      Seq("-source", "11", "-target", "11")

    def jvmId = "zulu:11"

    object test extends MavenTests with TestModule.Junit5 {

      def mvnDeps = super.mvnDeps() ++
        Seq(mvn"org.junit.jupiter:junit-jupiter-api:5.7.1")

      def runMvnDeps = super.runMvnDeps() ++
        Seq(mvn"org.junit.jupiter:junit-jupiter-engine")

      def testParallelism = false

      def testSandboxWorkingDir = false
    }

  }
  object list extends MavenModule {

    def javacOptions = super.javacOptions() ++
      Seq("-source", "11", "-target", "11")

    def jvmId = "zulu:11"

    object test extends MavenTests with TestModule.Junit5 {

      def mvnDeps = super.mvnDeps() ++
        Seq(mvn"org.junit.jupiter:junit-jupiter-api:5.7.1")

      def runMvnDeps = super.runMvnDeps() ++
        Seq(mvn"org.junit.jupiter:junit-jupiter-engine")

      def testParallelism = false

      def testSandboxWorkingDir = false
    }

  }
  object utilities extends MavenModule {

    def moduleDeps = super.moduleDeps ++ Seq(build.list)

    def javacOptions = super.javacOptions() ++
      Seq("-source", "11", "-target", "11")

    def jvmId = "zulu:11"

    object test extends MavenTests with TestModule.Junit5 {

      def mvnDeps = super.mvnDeps() ++
        Seq(mvn"org.junit.jupiter:junit-jupiter-api:5.7.1")

      def runMvnDeps = super.runMvnDeps() ++
        Seq(mvn"org.junit.jupiter:junit-jupiter-engine")

      def testParallelism = false

      def testSandboxWorkingDir = false
    }

  }
}
