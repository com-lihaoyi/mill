package build.multi1

import mill.api.*
import mill.api.opt.*
import mill.javalib.*
import mill.javalib.publish.*
import mill.scalalib.*
import millbuild.*

object `package` extends SbtMultiProjectExampleBaseModule {

  def mvnDeps = super.mvnDeps() ++ Seq(
    Deps.logbackClassic,
    Deps.logstashLogbackEncoder,
    Deps.scalaLogging,
    Deps.jclOverSlf4j,
    Deps.config,
    Deps.akkaStream,
    Deps.monocleCore,
    Deps.monocleMacro
  )

  def moduleDeps = super.moduleDeps ++ Seq(build.common)

  def artifactName = "multi1"

  def scalacOptions = super.scalacOptions() ++ Opts("-encoding", "utf8", "-V")

  def pomSettings = PomSettings(
    "This is an sbt sample project for testing Mill's init command.",
    "com.pbassiner",
    "https://github.com/com-lihaoyi/mill",
    Seq(License(
      "",
      "Apache-2.0",
      "https://www.apache.org/licenses/LICENSE-2.0.txt",
      false,
      false,
      "repo"
    )),
    VersionControl(
      Some("https://github.com/com-lihaoyi/mill"),
      Some("scm:git:https://github.com/com-lihaoyi/mill.git"),
      None,
      None
    ),
    Seq(Developer("johnd", "John Doe", "https://example.com/johnd", None, None))
  )

  object test extends SbtTests with TestModule.ScalaTest {

    def mvnDeps = super.mvnDeps() ++ Seq(Deps.scalatest, Deps.scalacheck)

    def testParallelism = false

    def testSandboxWorkingDir = false

  }

}
