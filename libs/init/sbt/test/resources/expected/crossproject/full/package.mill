package build.full
import mill.*
import mill.javalib.PublishModule
import mill.javalib.publish.*
import mill.scalajslib.ScalaJSModule
import mill.scalajslib.api.*
import mill.scalalib.*
import mill.scalanativelib.ScalaNativeModule
import mill.scalanativelib.api.*
import millbuild.Deps
import millbuild.ProjectBaseModule
object `package` extends Module {

  object js extends ProjectBaseModule, ScalaJSModule {

    def moduleDeps = Seq(build.pure.js)

    def scalaJSVersion = "1.16.0"

    def moduleKind = ModuleKind.NoModule

    def sourcesRootFolders = super.sourcesRootFolders ++ Seq("shared")

    def artifactName = "full"

    def pomSettings = PomSettings(
      "full",
      "full",
      "",
      Seq(),
      VersionControl(None, None, None, None),
      Seq()
    )

    object test extends Tests, ScalaJSTests, TestModule.Utest {

      def moduleDeps = super.moduleDeps ++ Seq(build.pure.js.test)

    }

  }

  object jvm extends ProjectBaseModule {

    def moduleDeps = Seq(build.pure.jvm)

    def sourcesRootFolders = super.sourcesRootFolders ++ Seq("shared")

    def artifactName = "full"

    def pomSettings = PomSettings(
      "full",
      "full",
      "",
      Seq(),
      VersionControl(None, None, None, None),
      Seq()
    )

    object test extends Tests, TestModule.Utest {

      def moduleDeps = super.moduleDeps ++ Seq(build.pure.jvm.test)

    }

  }

  object native extends ProjectBaseModule, ScalaNativeModule {

    def moduleDeps = Seq(build.pure.native)

    def scalaNativeVersion = "0.5.4"

    def sourcesRootFolders = super.sourcesRootFolders ++ Seq("shared")

    def artifactName = "full"

    def pomSettings = PomSettings(
      "full",
      "full",
      "",
      Seq(),
      VersionControl(None, None, None, None),
      Seq()
    )

    object test extends Tests, ScalaNativeTests, TestModule.Utest {

      def moduleDeps = super.moduleDeps ++ Seq(build.pure.native.test)

    }

  }
}
