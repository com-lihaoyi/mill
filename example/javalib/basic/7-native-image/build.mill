//// SNIPPET:BUILD
package build
import mill._, javalib._
import mill.define.ModuleRef

object foo extends JavaModule with NativeImageModule {

  def nativeImageOptions = Seq("--no-fallback")

  def zincWorker = ModuleRef(ZincWorkerGraalvm)

  object ZincWorkerGraalvm extends ZincWorkerModule {
    def jvmId = "graalvm-community:23.0.1"
  }
}

// This example demonstrates how to build a native image for a Java application using https://www.graalvm.org/[Graal VM].
//
// - The `native-image` CLI is downloaded with a custom Java home.
//
// - The main class, `foo.HelloWorld` is auto detected by `NativeImageModule` using `finalMainClass`.

/** Usage

> ./mill foo.nativeImage

> ./out/foo/nativeImage.dest/HelloWorld
Hello, World!
*/
