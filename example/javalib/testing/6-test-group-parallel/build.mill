//// SNIPPET:BUILD1
package build
import mill._, javalib._

object foo extends JavaModule {
  object test extends JavaTests {
    def testFramework = "com.novocode.junit.JUnitFramework"
    def ivyDeps = Agg(
      mvn"com.novocode:junit-interface:0.11",
      mvn"org.mockito:mockito-core:4.6.1"
    )
    def testForkGrouping =
      discoveredTestClasses().groupMapReduce(_.contains("GroupX"))(Seq(_))(_ ++ _).toSeq.sortBy(
        data => !data._1
      ).map(_._2)
    def testParallelism = true
  }
}
//// SNIPPET:END
