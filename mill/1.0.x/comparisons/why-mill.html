<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Why Use Mill? :: The Mill Build Tool</title>
    <link rel="canonical" href="https://mill-build.org/mill/comparisons/why-mill.html" />
    <link rel="prev" href="../javascriptlib/build-examples.html" />
    <link rel="next" href="maven.html" />
    <meta name="generator" content="Antora 3.1.12" />
    <link rel="stylesheet" href="../../../_/css/site.css" />
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-1C582ZJR85"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-1C582ZJR85')</script>
<link rel="icon" href="../../../_/favicon.png" type="image/x-icon" />
  
  <style>
  /* auto-hyphenation is super ugly */
  *{
    hyphens: manual !important;
  }

  /* Reduce font size from 17px to something reasonable */
  .doc {
   font-size: 16px !important;
  }
  .doc pre {
   font-size: 14px !important;
  }
  /* Shrink unreasonably large top bar */
  nav.navbar{
    height: 2.5rem;
  }
  body.article{
    padding-top: 2.5rem;
  }
  div.nav-container{
    top: 2.5rem;
  }
  div.toolbar{
    top: 2.5rem;
  }
  aside.nav{
    top: 2.5rem;
    height: calc(100vh - 2.5rem);
  }
  </style></head><body class="article">
  
<header class="header">
  
  <script>
  gtag('config', 'AW-16649289906');

  document.addEventListener('DOMContentLoaded', function() {
  const links = document.querySelectorAll('a');
    links.forEach(link => {
      if (link.textContent.trim().toLowerCase() === 'download') {
        link.addEventListener('click', function(event) {
          console.log("download link clicked")
          gtag('event', 'conversion', {'send_to': 'AW-16649289906/rsphCKfVq8QZELKBgIM-'});
        });
      }
    });
  });
  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <!-- TODO: add mill icon -->
      <a class="navbar-item" href="https://mill-build.org"><img src="../../../_/logo-white.svg" height="20" /> The Mill Build Tool</a>
      <div class="navbar-item search">
        <input id="search-input" type="text" placeholder="Search the docs" />
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill">GitHub</a>
        <a class="navbar-item" href="https://mill-build.org/blog/index.html">Blog</a>
        <a class="navbar-item" href="https://mill-build.org/api/latest/mill.html">API</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/issues">Issues</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/discussions">Discuss</a>


            <!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Documentation</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#"></a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Plugins</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
        -->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="mill" data-version="1.0.x">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">

  <li class="nav-item" data-depth="0">
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../javalib/intro.html">Building Java with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/module-config.html">Java Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/dependencies.html">Java Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/testing.html">Testing Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/linting.html">Linting Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/publishing.html">Java Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/build-examples.html">Java Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/web-examples.html">Java Web Project Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scalalib/intro.html">Building Scala with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/module-config.html">Scala Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/dependencies.html">Scala Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/testing.html">Testing Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/linting.html">Linting Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/publishing.html">Scala Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/build-examples.html">Scala Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/web-examples.html">Scala Web Project Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/native-examples.html">Scala Native Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/spark.html">Spark Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../kotlinlib/intro.html">Building Kotlin with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/module-config.html">Kotlin Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/dependencies.html">Kotlin Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/testing.html">Testing Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/linting.html">Linting Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/publishing.html">Kotlin Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/web-examples.html">Kotlin Web Project Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Experimental Platform Support</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Building Android Apps</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/android-initial-setup.html">Android Initial Setup</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/ide.html">Android IDE Support</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/java.html">Android Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/kotlin.html">Android Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/android-linting.html">Linting Android Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/compose-samples.html">Android Jetpack Compose</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/hilt-sample.html">Android Hilt Sample</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/android-native-example.html">Android Native Example</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../pythonlib/intro.html">Building Python with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/module-config.html">Python Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/dependencies.html">Python Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/linting.html">Linting Python Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/testing.html">Testing Python Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/publishing.html">Python Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <span class="nav-text">xref:pythonlib/web-examples.adoc</span>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../javascriptlib/intro.html">Building Javascript with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/dependencies.html">Typescript Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/module-config.html">Typescript Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/testing.html">Testing Typescript Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../javascriptlib/linting.html">Linting Typescript Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../javascriptlib/publishing.html">Typescript Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../javascriptlib/build-examples.html">JavaScript Build Examples</a>
  </li>
</ul>
  </li>
</ul>
  </li>

  <li class="nav-item is-current-page is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="why-mill.html">Why Use Mill?</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="maven.html">Case Study: Mill vs Maven</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gradle.html">Case Study: Mill vs Gradle</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sbt.html">Case Study: Mill vs <code>sbt</code></a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">The Mill CLI</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/installation-ide.html">Installation &amp; IDE Setup</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/flags.html">Mill Command-Line Flags</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/builtin-commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../cli/query-syntax.html">Task Query Syntax</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../cli/build-header.html">Build Header Config</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../migrating/migrating.html">Migrating to Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migrating/auto-migrating.html">Automated Migration Tools</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill Fundamentals</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/tasks.html">Tasks</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/modules.html">Modules</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/out-dir.html">The Output Directory</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/library-deps.html">Library Dependencies in Mill</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/cross-builds.html">Cross Builds</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/bundled-libraries.html">Bundled Libraries</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/configuring-jvm-versions.html">Configuring JVM Versions</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extending Mill</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../extending/import-mvn-plugins.html">Import Libraries and Plugins</a>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../extending/contrib-plugins.html">Contrib Plugins</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/artifactory.html">Artifactory</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/buildinfo.html">BuildInfo</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/codeartifact.html">Codeartifact</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/docker.html">Docker</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/flyway.html">Flyway</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/gitlab.html">Gitlab</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/jmh.html">JMH</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/playlib.html">Play Framework</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/proguard.html">Proguard</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/scalapblib.html">ScalaPB</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/scoverage.html">Scoverage</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/sonatypecentral.html">Sonatype Central (Plugin Moved to Scalalib)</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/testng.html">TestNG</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/twirllib.html">Twirl</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/versionfile.html">Version file</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../extending/thirdparty-plugins.html">Third-Party Plugins</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/running-jvm-code.html">Running Dynamic JVM Code</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/writing-plugins.html">Writing Mill Plugins</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/meta-build.html">The Mill Meta-Build</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/example-typescript-support.html">Example: Typescript Support</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/example-python-support.html">Example: Python Support</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../large/large.html">Large Builds and Monorepos</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/selective-execution.html">Selective Test Execution</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/multi-file-builds.html">Multi-File Builds</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/multi-language-builds.html">Multi-Language Builds</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill In Depth</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/evaluation-model.html">The Mill Evaluation Model</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/caching.html">Caching in Mill</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/parallelism.html">Parallelism in Mill</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/process-architecture.html">The Mill Process Architecture</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/sandboxing.html">Mill Sandboxing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/design-principles.html">Mill Design Principles</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/why-scala.html">Why does Mill use Scala?</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://mill-build.org/api/latest/mill.html">Mill API Reference</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/com-lihaoyi/mill/blob/main/changelog.adoc">Changelog</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/talks-blog-posts.html">Talks &amp; Blog Posts</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Mill Documentation</span>
    <span class="version">1.0.6</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../../index.html">Mill Documentation</a></div>
      <ul class="versions">
        <li class="version">
          <a href="../../main-branch/index.html">main-branch</a>
        </li>
        <li class="version">
          <a href="../../dev-1.1.0-RC2-78-d9bc9a/index.html">dev-1.1.0-RC2-78-d9bc9a</a>
        </li>
        <li class="version is-latest">
          <a href="../../index.html">1.1.0-RC2</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">1.0.6</a>
        </li>
        <li class="version">
          <a href="../../0.12.x/index.html">0.12.16</a>
        </li>
        <li class="version">
          <a href="../../0.11.x/index.html">0.11.13</a>
        </li>
        <li class="version">
          <a href="../../0.10.15/index.html">0.10.15</a>
        </li>
        <li class="version">
          <a href="../../0.9.12/index.html">0.9.12</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../blog/index.html">The Mill Build Engineering Blog</a></div>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">

<div class="toolbar" role="navigation" style="position: fixed; top: 2.5rem; height: 2rem; left: 0px;">
<button class="nav-toggle"></button>
</div>
<div class="toolbar" style="position: fixed; top: 2.5rem; height: 1.5rem; right: 0px;">
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Why Use Mill?</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Although the Java language is known for being performant, easy to learn, and
with great IDEs, JVM build tools have a reputation for being sluggish and confusing.
For example, common build tools like Maven or Gradle compile Java code
<a href="../../../blog/1-java-compile.html" class="xref page">12-16x slower than the underlying Java compiler</a>. While
these tools are the important foundation of the Java ecosystem, it is hard to deny
that there exists room for improvement.</p>
</div>
<div class="paragraph">
<p>Mill tries to provide a viable alternative build tool with 3 major improvements over
other JVM build tools available today:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#_performance">Performance</a>: Mill offers a 3-6x speedup in compilation and other
common workflows, which means less time waiting for your build tool and more time doing useful work</p>
</li>
<li>
<p><a href="#_extensibility">Extensibility</a>: Mill lets you write code or use any published JVM library in your build,
customizing it exactly to your needs without being limited by third-party plugins</p>
</li>
<li>
<p><a href="#_ide_support">IDE Support</a>: Mill has better IDE support in IntelliJ and VSCode
than other build tools, to help you navigate your build understand why your build is doing what it is doing</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Uniquely among build tools, Mill builds upon the idea of
<a href="#_object_oriented_builds">Object-Oriented Builds</a>. Where most builds invent custom
concepts and abstractions for setting up your build pipelines, Mill instead re-uses familiar
concepts from object-oriented programming: <em>methods</em>, <em>classes</em>, and <em>overrides</em>.
This means any Java developer can feel immediately at home extending and maintaining their
Mill builds without needing to first become an expert in the build-tool lifecycle or plugin API.</p>
</div>
<div class="paragraph">
<p>At a first glance, Mill looks like any other build tool. You have build files, you configure
dependencies, you can compile, run, or test your project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">// build.mill
package build
import mill.*, javalib.*

object foo extends JavaModule {
  def mvnDeps = Seq(
    mvn&quot;net.sourceforge.argparse4j:argparse4j:0.9.0&quot;,
    mvn&quot;org.thymeleaf:thymeleaf:3.1.1.RELEASE&quot;
  )

  object test extends JavaTests, TestModule.Junit4
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; /mill foo.compile
compiling 1 Java source...

&gt; /mill foo.run --text hello
&lt;h1&gt;hello&lt;/h1&gt;

&gt; ./mill foo.test
Test foo.barTest.testEscaping finished, ...
Test foo.barTest.testSimple finished, ...
0 failed, 0 ignored, 2 total, ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, beyond the basics, Mill does provide a lot that other JVM build tools do not.
We will look at each topic in turn:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_performance"><a class="anchor" href="#_performance"></a>Performance</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_maven"><a class="anchor" href="#_maven"></a>Maven</h3>
<div class="paragraph">
<p>Overall across our benchmarks, Mill is 4-6x faster than Maven for clean compiles,
both parallel and sequential, and for many modules or for a single module:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;" />
<col style="width: 25%;" />
<col style="width: 25%;" />
<col style="width: 25%;" />
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Benchmark</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mill</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Speedup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="maven.html#_sequential_clean_compile_all" class="xref page">Sequential Clean Compile All</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">98.80s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">23.41s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.2x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="maven.html#_parallel_clean_compile_all" class="xref page">Parallel Clean Compile All</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48.92s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9.29s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="maven.html#_clean_compile_single_module" class="xref page">Clean Compile Single Module</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.89s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.88s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.6x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="maven.html#_incremental_compile_single_module" class="xref page">Incremental Compile Single Module</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.82s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.18s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">37.9x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="maven.html#_no_op_compile_single_module" class="xref page">No-Op Compile Single Module</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.25s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.12s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">43.8x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>First, let’s look at <strong>Parallel Clean Compile All</strong>.
This benchmark involves running <code>clean</code> to delete all generated files and re-compiling
everything in parallel. Mill sees a significant ~5x speedup over Maven for this benchmark.
You can click on the link above to see a more detailed discussion of how this benchmark was
run.</p>
</div>
<div class="paragraph">
<p>The second benchmark worth noting is <strong>Incremental Compile Single Module</strong>.
This benchmark involves adding a single newline to the end of a single already-compiled file in <code>common</code>,
and re-compiling <code>common</code> and <code>common.test</code>.
Mill sees a huge speedup for this benchmark, because Mill’s incremental compiler
(<a href="https://github.com/sbt/zinc">Zinc</a>) is able to detect that only one file in one module
has changed, and that the change is small enough
to not require other files to re-compile. In contrast, Maven re-compiles all files in both
modules, even though only one file was touched and the change was trivial.</p>
</div>
</div>
<div class="sect2">
<h3 id="_gradle"><a class="anchor" href="#_gradle"></a>Gradle</h3>
<div class="paragraph">
<p>The comparison with Gradle is less stark, but still significant. Mill is 3-4x faster than Gradle
across the various workflows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;" />
<col style="width: 25%;" />
<col style="width: 25%;" />
<col style="width: 25%;" />
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Benchmark</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gradle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mill</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Speedup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="maven.html#_sequential_clean_compile_all" class="xref page">Sequential Clean Compile All</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17.6s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.86s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="maven.html#_parallel_clean_compile_all" class="xref page">Parallel Clean Compile All</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12.3s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.75s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="maven.html#_clean_compile_single_module" class="xref page">Clean Compile Single Module</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.41s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.30s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="maven.html#_incremental_compile_single_module" class="xref page">Incremental Compile Single Module</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.37s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.20s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.9x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="maven.html#_no_op_compile_single_module" class="xref page">No-Op Compile Single Module</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.94s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.11s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8.5x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Mill’s various &quot;clean compile&quot; workflows 3-4x faster than Gradle’s, while it’s incremental
and no-op compile workflows are 7-9x faster. Both Gradle and Mill appear to do a good job
limiting the compilation to only the changed file, but Mill has less fixed overhead than
Gradle does, finishing in about ~0.2s rather than ~1.5 seconds.</p>
</div>
<div class="paragraph">
<p>In general, these benchmarks don’t show Mill doing anything that Maven or Gradle do not:
these are equivalent builds for the same projects (<a href="https://github.com/netty/netty">Netty</a> and
<a href="https://github.com/mockito/mockito">Mockito</a> respectively), compiling the same number of files
using the same Java compiler, in the same module structure and passing the same suite of tests.
Rather, what we are seeing is Mill simply having less build-tool overhead than Maven or Gradle,
so the performance of the underlying JVM and Java compiler (which is actually pretty fast!) can
really shine through.</p>
</div>
</div>
<div class="sect2">
<h3 id="_not_just_compile_times"><a class="anchor" href="#_not_just_compile_times"></a>Not Just Compile Times</h3>
<div class="paragraph">
<p>Compilation times are only one part of the time taken during development. Mill
also provides features that help speed up other parts of your development cycle:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="../large/selective-execution.html" class="xref page">Selective Test Execution</a> allows you to skip unrelated tests when
validating pull requests, speeding up PR validation considerably</p>
</li>
<li>
<p><a href="../javalib/testing.html#_test_parallelism" class="xref page">Test Parallelism</a> automatically distributes tests
across multiple threads, utilizing all available cores while maintaining long-lived
JVM processes to maximize performance</p>
</li>
<li>
<p><a href="../../../blog/9-mill-faster-assembly-jars.html" class="xref page">Incremental Assembly Jar Creation</a> speeds
up creation of assembly jars, greatly speeding up workflows that use them
(e.g. Spark Submit)</p>
</li>
<li>
<p><a href="../depth/parallelism.html#_mill_chrome_profiles" class="xref page">Build Performance Profiles</a> are
automatically generated for every command, giving visibility
into where the build tool is spending time so you can understand and optimize it.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/comparisons/NettyCompileProfile.png" alt="NettyCompileProfile" />
</div>
</div>
<div class="paragraph">
<p>None of these features are rocket science, and they are all things that you can
in theory set up with other build tools. However, Mill provides these features
built-in without needing to first hunt down plugins or third-party integrations,
and makes all of them easy to set up and use.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extensibility"><a class="anchor" href="#_extensibility"></a>Extensibility</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_rich_builtins"><a class="anchor" href="#_rich_builtins"></a>Rich Builtins</h3>
<div class="paragraph">
<p>Mill comes with a lot more functionality built in than other tools such as Maven,
Gradle, or SBT. In general, most common development workflows are built in to Mill:
autoformatting, autofixing, publishing, packaging, etc. This means you can go very far
with just Mill’s builtin functionality, without first needing to trawl the internet to
find plugins and evaluate their relevance, quality, and level of maintenance:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;" />
<col style="width: 50%;" />
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Languages</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../javalib/intro.html" class="xref page">Java</a>, <a href="../kotlinlib/intro.html" class="xref page">Kotlin</a>, <a href="../scalalib/intro.html" class="xref page">Scala</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dependency Management</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../javalib/dependencies.html#_adding_ivy_dependencies" class="xref page">Adding Dependencies</a></p>
</li>
<li>
<p><a href="../fundamentals/library-deps.html#_dependency_management" class="xref page">Dependency Version Management and BOMs</a></p>
</li>
<li>
<p><a href="../javalib/dependencies.html#_unmanaged_jars" class="xref page">Unmanaged Dependencies</a></p>
</li>
<li>
<p><a href="../fundamentals/configuring-jvm-versions.html" class="xref page">JVM Version Management</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../javalib/testing.html#_defining_unit_test_suites" class="xref page">JUnit4, JUnit5, TestNG, ScalaTest, Specs2, Munit</a></p>
</li>
<li>
<p><a href="../javalib/testing.html#_defining_integration_test_suites" class="xref page">Integration Testing</a></p>
</li>
<li>
<p><a href="../javalib/testing.html#_test_parallelism" class="xref page">Test Parallelism</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Linting</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../javalib/linting.html#_linting_with_errorprone" class="xref page">ErrorProne</a>, <a href="../javalib/linting.html#_linting_with_checkstyle" class="xref page">Checkstyle</a>, <a href="../javalib/linting.html#_autoformatting_with_palantir_java_format" class="xref page">Palantir Java Format</a>, <a href="../javalib/linting.html#_code_coverage_with_jacoco" class="xref page">Jacoco</a>, <a href="../javalib/linting.html#_static_analysis_with_pmd" class="xref page">PMD</a>, <a href="../javalib/publishing.html#_checking_api_compatibility" class="xref page">RevApi</a></p>
</li>
<li>
<p><a href="../kotlinlib/linting.html#_linting_with_detekt" class="xref page">Detekt</a>, <a href="../kotlinlib/linting.html#_linting_with_ktlint" class="xref page">KtLint</a>, <a href="../kotlinlib/linting.html#_autoformatting_with_ktfmt" class="xref page">KtFmt</a>, <a href="../kotlinlib/linting.html#_code_coverage_with_kover" class="xref page">Kover</a></p>
</li>
<li>
<p><a href="../scalalib/linting.html#_linting_and_autofixing_with_scalafix" class="xref page">Scalafix</a>, <a href="../scalalib/linting.html#_autoformatting_with_scalafmt" class="xref page">Scalafmt</a>, <a href="../scalalib/linting.html#_code_coverage_with_scoverage" class="xref page">Scoverage</a>, <a href="../scalalib/linting.html#_binary_compatibility_enforcement" class="xref page">Mima</a></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Packaging</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../javalib/publishing.html#_building_executable_assemblies" class="xref page">Executable Assemblies</a></p>
</li>
<li>
<p><a href="../javalib/publishing.html#_building_native_image_binaries_with_graal_vm" class="xref page">Graal Native Image</a>, <a href="../javalib/publishing.html#_java_app_and_bundles_using_jlink" class="xref page">JLink</a>, <a href="../javalib/publishing.html#_java_installers_using_jpackage" class="xref page">JPackage</a></p>
</li>
<li>
<p><a href="../contrib/docker.html" class="xref page">Docker</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Publishing</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../javalib/publishing.html#_publishing_to_sonatype_maven_central" class="xref page">Maven Central</a>, <a href="../contrib/artifactory.html" class="xref page">Artifactory</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Web Frameworks</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../javalib/web-examples.html#_spring_boot_todomvc_app" class="xref page">Spring Boot</a>, <a href="../javalib/web-examples.html#_micronaut_todomvc_app" class="xref page">Micronaut</a></p>
</li>
<li>
<p><a href="../kotlinlib/web-examples.html#_ktor_todomvc_app" class="xref page">Ktor</a>, <a href="../kotlinlib/web-examples.html#_ktor_webapp_kotlinjs_client" class="xref page">Kotlin.js</a></p>
</li>
<li>
<p><a href="../scalalib/web-examples.html#_todomvc_http4s_web_app" class="xref page">Http4s</a>, <a href="../scalalib/web-examples.html#_scala_js_webserver_integration" class="xref page">Scala.js</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Others</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../javalib/module-config.html#_annotation_processors" class="xref page">Java Annotation Processors</a>, <a href="../kotlinlib/module-config.html#_kotlin_compiler_plugins" class="xref page">Kotlin Compiler Plugins</a>, <a href="../scalalib/module-config.html#_scala_compiler_plugins" class="xref page">Scala Compiler Plugins</a></p>
</li>
<li>
<p><a href="../javalib/module-config.html#_native_c_code_with_jni" class="xref page">JNI</a></p>
</li>
<li>
<p><a href="../scalalib/spark.html" class="xref page">Apache Spark</a>, <a href="../scalalib/native-examples.html" class="xref page">Scala-Native</a></p>
</li>
<li>
<p><a href="../large/selective-execution.html" class="xref page">Selective Test Execution</a>, <a href="../large/multi-language-builds.html" class="xref page">Multi-Language Builds</a></p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Mill’s builtin functionality means you can get very far without spending time fiddling
with plugins. These builtins are all designed, tested, and maintained to the same level of quality
as Mill itself, letting you skip the tedious task of finding and vetting a list of third-party
plugins of appropriate quality for use in your project.</p>
</div>
<div class="paragraph">
<p>When the time comes that you do need functionality not bundled with Mill, Mill also has
a rich ecosystem of third party plugins for less common use cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../extending/thirdparty-plugins.html" class="xref page">Third-Party Plugins</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_extending_mill"><a class="anchor" href="#_extending_mill"></a>Extending Mill</h3>
<div class="paragraph">
<p>When you do need to extend it, Mill allows you to directly write code to configure your build,
and even download libraries from Maven Central.</p>
</div>
<div class="paragraph">
<p>Most build tools need plugins to do anything: if you want to <em>Foo</em> you need a
<em>Foo plugin</em>, if you want to Bar you need a <em>Bar plugin</em>, for any possible <em>Foo</em> or <em>Bar</em>. These could
be simple tasks - zipping up files, pre-rendering web templates, preparing static assets for
deployment - but even a task that would be trivial to implement in a few lines of code requires
you to Google for third-party plugins, dig through their Github to see which one is best
maintained, and hope for the best when you include it in your build. And while you could
write plugins yourself, doing so is usually non-trivial.</p>
</div>
<div class="paragraph">
<p>Mill is different. Although Mill does have plugins supporting common integrations (linked above),
for most simple things you can directly write code to achieve what you want, using the bundled
filesystem, subprocess, and dependency-management libraries. And even if you need third-party
libraries from Maven Central to do <code>xyz</code>, you can directly import the “xyz” library and use it
directly, without having to find a &quot;xyz build plugin&quot; wrapper.</p>
</div>
</div>
<div class="sect2">
<h3 id="_simple_custom_tasks"><a class="anchor" href="#_simple_custom_tasks"></a>Simple Custom Tasks</h3>
<div class="paragraph">
<p>The following Mill build is a minimal Java module <code>foo</code>. It contains no custom configuration, and
so inherits all the defaults from <code>mill.javalib.JavaModule</code>: default source folder layout, default
assembly configuration, default compiler flags, and so on. This <em>convention over configuration</em>
is a philosophy that Mill inherited from Maven and other JVM build tools:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends JavaModule {
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; mill compile
Compiling 1 Java source...</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to add a custom task, this is as simple as defining a method e.g.
<code>def lineCount = Task { ...​ }</code>. The body of <code>Task</code> performs the action we want, and
can depend on other tasks such as <code>allSourceFiles()</code> below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends JavaModule {
  /** Total number of lines in module source files */
  def lineCount = Task {
    allSourceFiles().map(f =&gt; os.read.lines(f.path).size).sum
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once we define a new task, we can immediately begin using it in our build.
<code>lineCount</code> is not used by any existing <code>JavaModule</code> tasks, but we can still
show its value via the Mill command line to evaluate it, or inspect its metadata:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; ./mill show foo.lineCount
17

&gt; ./mill inspect foo.lineCount
foo.lineCount(build.mill:4)
    Total number of lines in module source files

Inputs:
    foo.allSourceFiles</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that as <code>lineCount</code> is a <code>Task</code>, we get automatic caching, invalidation, and
parallelization: these are things that every <code>Task</code> gets for free, without the task
author to do anything. And although we wrote the <code>lineCount</code> logic in the main
<code>build.mill</code> file for this example, if it grows complex enough to get messy it is
easy to move it to your own <a href="../extending/writing-plugins.html" class="xref page">custom plugins</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_overriding_tasks"><a class="anchor" href="#_overriding_tasks"></a>Overriding Tasks</h3>
<div class="paragraph">
<p>To wire up <code>lineCount</code> into our main <code>JavaModule</code> <code>compile</code>/<code>test</code>/<code>run</code> tasks,
one way is to take the line count value and write it to a JVM resource file
to be used at runtime. In Mill your JVM resources are just a method <code>def resources</code>,
so we can override it and make it depend on <code>lineCount</code>, in addition
to its prior value <code>super.resources()</code> (that references the <code>resources/</code> folder on disk):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends JavaModule {
  /** Total number of lines in module source files */
  def lineCount = Task {
    allSourceFiles().map(f =&gt; os.read.lines(f.path).size).sum
  }

  /** Generate resources using lineCount of sources */
  override def resources = Task {
    os.write(Task.dest / &quot;line-count.txt&quot;, &quot;&quot; + lineCount())
    super.resources() ++ Seq(PathRef(Task.dest))
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because our <code>def resources</code> overrides the existing <code>resources</code> method inherited from <code>JavaModule</code>,
the downstream tasks automatically now use the new override instead, similar to any Java
method overrides. That means if you call <code>mill foo.run</code>, it will automatically pick up the new
<code>resources</code> including the generated <code>line-count.txt</code> file and make it available to
the application code to use e.g. to print it out at runtime:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; mill foo.run
Line Count: 18</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we’ll look at a more realistic example,
which includes usage of third-party libraries in the build.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_third_party_jvm_libraries_in_tasks"><a class="anchor" href="#_using_third_party_jvm_libraries_in_tasks"></a>Using Third-Party JVM Libraries in Tasks</h3>
<div class="paragraph">
<p>Many build tasks require third-party libraries. One example is pre-rendering HTML pages
in the build so they can be served at runtime: if a page never changes, rendering it on every request is
wasteful, and even rendering it once on startup and then caching it
can impact your application startup time. Thus, you may want to move some HTML rendering to
build-time, but with traditional build tools such a move is sufficiently inconvenient and
complicated that people rarely do it. Other use cases may include custom linters, custom
deployment artifacts, custom debugging metadata, and so on.</p>
</div>
<div class="paragraph">
<p>With Mill, using third-party libraries in your build tasks is very easy. Mill does not
ship with a bundled HTML templating engine, but you can use the
<a href="../extending/import-mvn-plugins.html" class="xref page">//| mvnDeps</a> syntax to include one such as
<a href="https://www.thymeleaf.org/">Thymeleaf</a>, which would immediately make the
Thymeleaf classes available for you to import and use in your build as below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">//| mvnDeps: [&quot;org.thymeleaf:thymeleaf:3.1.1.RELEASE&quot;]
package build

import mill.*, javalib.*
import org.thymeleaf.TemplateEngine
import org.thymeleaf.context.Context

object foo extends JavaModule {
  /** Total number of lines in module source files */
  def lineCount = Task {
    allSourceFiles().map(f =&gt; os.read.lines(f.path).size).sum
  }

  def htmlSnippet = Task {
    var context = new Context()
    context.setVariable(&quot;heading&quot;, &quot;Line Count is: &quot; + lineCount())
    new TemplateEngine().process(
        &quot;&lt;h1 th:text=\&quot;${heading}\&quot;&gt;&lt;/h1&gt;&quot;,
        context
    )
  }

  def resources = Task {
    os.write(Task.dest / &quot;snippet.txt&quot;, htmlSnippet())
    super.resources() ++ Seq(PathRef(Task.dest))
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once we have specified our <code>//| mvnDeps</code> in the build file YAML header, we can import
<code>TemplateEngine</code>, <code>Context</code>, and follow our <code>def lineCount</code> with a <code>def htmlSnippet</code> task
that uses Thymeleaf to render HTML. We get full IDE support for working with the
Thymeleaf Java API, the new <code>htmlSnippet</code> task is inspectable from the Mill command line
via <code>show</code>, and we wire it up into <code>def resources</code> so it can be inspected and used at
runtime by the application (in this case just printed out):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/why-mill/ExtendingIDESupport.png" alt="ExtendingIDESupport" />
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; mill show foo.htmlSnippet
&quot;&lt;h1&gt;Line count is: 17&lt;/h1&gt;&quot;

&gt; mill foo.compile
compiling 1 Java source...
...

&gt; mill foo.run
generated snippet.txt resource: &lt;h1&gt;Line count is: 17&lt;/h1&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rendering HTML using the Thymeleaf templating engine is not rocket science, but what is
interesting here is what we did <em>not</em> need to do:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We did <em>not</em> need to find a Thymeleaf-Mill plugin in order to include Thymeleaf in our
build</p>
</li>
<li>
<p>We did <em>not</em> need to learn a special API or framework for authoring build plugins ourselves
to write a plugin to include Thymeleaf in our build</p>
</li>
<li>
<p>We did <em>not</em> need to add fragile shell scripts to augment our build logic and
implement the functionality we need.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Instead, we could simply import Thymeleaf as a Java library directly from Maven Central
and use it just like we would use it in any Java application, with IDE support,
typechecking, and all the necessary build tool features like automatic parallelism, caching,
and invalidation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mill_vs_gradle_configuration_as_code"><a class="anchor" href="#_mill_vs_gradle_configuration_as_code"></a>Mill vs Gradle Configuration as Code</h3>
<div class="paragraph">
<p>It’s worth contrasting the Mill config above with e.g. the equivalent Gradle configuration
for setting up a line-count resource file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">import java.io.File

tasks.register(&quot;generateLineCount&quot;) {
    val sourceDirs = listOf(&quot;src/main/java&quot;)
    val outputDir = layout.buildDirectory.dir(&quot;generated-resources&quot;)
    val outputFile = outputDir.get().file(&quot;line-count.txt&quot;)

    inputs.files(fileTree(&quot;src/main&quot;))
    outputs.file(outputFile)

    doLast {
        var totalLines = 0

        sourceDirs.map(::file).filter { it.exists() }.forEach { srcDir -&gt;
            srcDir.walkTopDown()
                .filter { it.isFile &amp;&amp; it.extension in listOf(&quot;java&quot;) }
                .forEach { file -&gt;
                    totalLines += file.readLines().size
                }
        }

        outputFile.asFile.writeText(totalLines.toString())
        println(&quot;Generated line-count.txt with $totalLines lines&quot;)
    }
}

tasks.named(&quot;processResources&quot;) {
    dependsOn(&quot;generateLineCount&quot;)
    from(layout.buildDirectory.dir(&quot;generated-resources&quot;))
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>While the Gradle config is a bit more verbose than Mill’s, that is not where the problem
lies. The problem lies in the fact that the Gradle &quot;config as code&quot; doesn’t <em>actually</em>
look like the code you are writing day-to-day: although it is written in Kotlin,
things like <code>task.named</code>, <code>dependsOn</code>, <code>inputs.files</code> and <code>outputs.file</code>, <code>doLast</code>
(or should we use <code>doFirst</code>?) are not &quot;normal&quot; Kotlin. The stringly-typed <code>&quot;generateLineCount&quot;</code>,
<code>&quot;generated-resources&quot;</code>, <code>&quot;processResources&quot;</code>, values add to the potential for error.
The end result is that although you may know Kotlin as a compiled language with great
IDE support, you will likely be unfamiliar with Gradle’s flavor of Kotlin, and your
IDE will likely not be as useful as you would like.</p>
</div>
<div class="paragraph">
<p>In fact, there is even a bug in the above Gradle config that will cause the build to
be non-deterministically slower sometimes, but not other times.
Can you spot it?</p>
</div>
<div class="paragraph">
<p>The difficulty of catching these issues e.g. during code review
illustrates how difficult it is to write &quot;correct&quot; Gradle config: if even the simplest
hello-world customization results in impossible-to-find bugs slowing things down, how many
bugs will there be in any more-complex real-world customization or plugin? It’s no wonder
then than real-world builds using Gradle or other tools often end up being inexplicably
slow and flaky!
(Click the footnote to see the answer <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>)</p>
</div>
<div class="paragraph">
<p>In contrast, Mill’s <code>extends</code>, <code>def</code>s, and <code>overrides</code>
behave exactly as you would expect any object-oriented program to work, so you already
know how Mill behaves even if you’ve never touched a Mill build before. And the fact
that Mill build config is so much easier to write means that you’re much less likely
to have bugs causing slowness or flakiness, resulting in the improved performance
(discussed above) and not needing to regularly run <code>clean</code> as you often have to do with other
build tools.</p>
</div>
<hr />
<div class="paragraph">
<p>Most real projects require some kind of ad-hoc build tasks: you may be pre-processing static
assets for web deployment, embedding build metadata for runtime debugging, or generating
reports for security scanning. With most build tools, you often needed to pull
in some poorly-maintained plugin off of Github, write your own using a complicated plugin
framework, or even wrap your build tool in ad-hoc shell scripts. With most other build tools,
caching and parallelism are things that the build or plugin author needs to set up manually,
meaning everyone makes mistakes and your build system performance is never as good as it could be.</p>
</div>
<div class="paragraph">
<p>In contrast, Mill makes it easy it is to write concise type-checked code to perform ad-hoc tasks
to do whatever you need to do. You get full IDE support, automatic caching and
parallelism, and access to the huge JVM library ecosystem on Maven Central.
Rather than grabbing unmaintained plugins off of Github or augmenting your build
with fragile shell scripts, Mill allows your own custom logic to be implemented
in a way that is flexible, performant, and safe, such that anyone can configure their
build correctly and achieve maximum performance even without being a build tool expert.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ide_support"><a class="anchor" href="#_ide_support"></a>IDE Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The last area that Mill does better than Maven, Gradle or SBT is providing a seamless IDE
experience. Working with Mill builds in IntelliJ or VSCode, you get the full power of
your IDE to autocomplete, peek at docs, browse signatures, and otherwise navigate
around your build system. Working with your Mill build, you get the same level of
IDE support as working within any Java, Scala, or Kotlin application codebase.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/comparisons/IntellijOverrideAutocomplete.png" alt="IntellijOverrideAutocomplete" /></span></p>
</div>
<div class="sect2">
<h3 id="_limitations_of_existing_build_tool_ide_integrations"><a class="anchor" href="#_limitations_of_existing_build_tool_ide_integrations"></a>Limitations of Existing Build Tool IDE Integrations</h3>
<div class="paragraph">
<p>While JVM application codebases universally have excellent IDE support, build tools are usually
not nearly as well-supported. For example, consider the snippet below where we are using Gradle to
configure the javac compiler options. The autocomplete and code-assist experience working
with these files is hit-or-miss. In the example below, we can see that IntelliJ is able to
identify that <code>compileArgs</code> exists and has the type <code>List&lt;String&gt;</code>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/comparisons/IntellijMockitoGradleCompileOptions.png" alt="IntellijMockitoGradleCompileOptions" /></span></p>
</div>
<div class="paragraph">
<p>But if you try to jump to definition or find out anything else about it you hit a wall.
The IDE is able to bring you to the getter and setter, but it isn’t able to tell you
<em>where the value is coming from</em>, <em>how it is computed</em>, or <em>where it is used</em>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/comparisons/IntellijMockitoGradleCompileOptions2.png" alt="IntellijMockitoGradleCompileOptions2" /></span></p>
</div>
<div class="paragraph">
<p>Often working with build configurations feels like hitting dead ends: if you don’t have
<code>options.compilerArgs</code> memorized in your head, there is literally nothing you can do in
your IDE to figure out what it is or what it is used for. That leaves
you googling for answers, which can be a frustrating experience that distracts you from
the task at hand.</p>
</div>
<div class="paragraph">
<p>Although this example is using Gradle’s un-typed Groovy syntax, the experience
using Gradle’s typed Kotlin syntax is largely the same. The problem isn’t unique
to Gradle, and isn’t unique to IntelliJ: any IDE would have similar problems working
with this code. The problem is the build tool configuration itself, or rather the
style of code that most build tools require they be configured with.</p>
</div>
</div>
<div class="sect2">
<h3 id="_global_mutable_variables"><a class="anchor" href="#_global_mutable_variables"></a>Global Mutable Variables</h3>
<div class="paragraph">
<p>The fundamental problem with build tools like Gradle is that the entire configuration system
is based around <em>global mutable variables</em>. The Groovy or Kotlin code you write does not
actually <em>perform the build</em>, but instead is just setting up some
global mutable data structure that is used to configure the <em>real</em> build engine that
runs <em>later</em>. Thus when you explore the Gradle build in an IDE, the IDE can only explore the
configuration logic (the <code>getCompilerArgs</code> method above) and is unable to explore
the actual build logic (how <code>getCompilerArgs</code> <em>actually gets used in Gradle</em>). And
just because the global mutable variable is wrapped in a getter and setter
does not make it any less global or any less mutable!</p>
</div>
<div class="paragraph">
<p>The problem with IDEs not being able to understand code written with global mutable
variables is not new. If you wrote your application code primarily using global mutable
variables, your IDE would not be able to help you much there either! So nobody does that,
and instead applications are primarily built using classes and methods, but some how
no build tool follows the same style so they all have problems with IDEs not being able
to work with their global mutable variables effectively.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_mill_ide_experience"><a class="anchor" href="#_the_mill_ide_experience"></a>The Mill IDE Experience</h3>
<div class="paragraph">
<p>In comparison, not only are Mill’s <code>.mill</code> files statically typed, they are
built on top of <em>classes</em> and <em>methods</em> like any other JVM codebase. While IDEs struggle
with global variables, they are very good at navigating classes and methods!
For example IntelliJ is able to take your <code>def javacOptions</code> override and
find the original definitions that were overridden, and show you where they are defined:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/comparisons/IntellijMockitoMillJavacOptionsParents.png" alt="IntellijMockitoMillJavacOptionsParents" />
</div>
</div>
<div class="paragraph">
<p>You can jump to any of the overridden <code>def</code>s quickly and precisely:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/comparisons/IntellijMockitoMillJavacOptionsDef.png" alt="IntellijMockitoMillJavacOptionsDef" />
</div>
</div>
<div class="paragraph">
<p>And because tasks in Mill are just normal methods, IntelliJ is
able to <em>find usages</em>, showing you where the task is used. Below, we can see the method
call in the <code>def compile</code> task, which uses <code>javacOptions()</code> along with a number of other tasks:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/comparisons/IntellijMockitoMillCompile.png" alt="IntellijMockitoMillCompile" />
</div>
</div>
<div class="paragraph">
<p>From there, if you are curious about any of the other tasks used alongside <code>javacOptions</code>, it’s
easy for you to pull up <em>their</em> documentation, jump to <em>their</em>
definition, or find <em>their</em> usages. For example we can pull up the docs of
<code>compileClasspath()</code> below, jump to <em>its</em> implementation, and continue
interactively exploring your build logic from there:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/comparisons/IntellijMockitoMillCompileClasspath.png" alt="IntellijMockitoMillCompileClasspath" />
</div>
</div>
<div class="paragraph">
<p>Unlike most other build tools, Mill build pipelines can be explored interactively in your
IDE. If you do not know what something does, it’s documentation, definition, or usages is always
one click away in IntelliJ or VSCode. This isn’t a new experience for Java developers, as it
is what you experience every day working in your application code! But Mill brings that same
polished experience to your build system - traditionally something that has been opaque
and hard to understand - and does so in a way that no other build tool does. And this is
possible because Mill builds avoid the global mutable variables common in other build
tools, in favor of configuring your build via classes and methods that are familiar to
both users and to IDEs.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_object_oriented_builds"><a class="anchor" href="#_object_oriented_builds"></a>Object-Oriented Builds</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mill has a lot of improvements over build tools like Maven or Gradle, but it begs the
question: why can’t other build tools improve performance, extensibility, IDE support
as well? It turns out that other tools <em>have</em> been working on improving performance,
extensibility and IDE support - for decades in the case of Maven or Gradle - but Mill
does have secret sauce that makes providing this experience in Mill much easier than
providing it in any other build tool.</p>
</div>
<div class="paragraph">
<p>All build tools are complex, because the requirements of building any size-able real-world
project are complex. One big source of build tool complexity is that users need some way to
define templated, customizable graph-computations when setting up their build pipelines.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Computations</strong> as you need to specify what each build step does</p>
</li>
<li>
<p><strong>Graph</strong> as the data structure necessary to order and parallelize steps in your build</p>
</li>
<li>
<p><strong>Templated</strong> as different modules in a build are often very similar, with similar pipelines</p>
</li>
<li>
<p><strong>Customizable</strong> as there are always some module, or group of modules, special in some way</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, even a simplified three-module Java build pipeline may look like this:</p>
</div>
<div class="paragraph">
<center>
<svg width="767px" height="364px" viewBox="0.00 0.00 767.02 364.00" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 360.0)">
<title>G</title>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="8,-240 8,-348 484.87,-348 484.87,-240 8,-240"></polygon>
<text text-anchor="middle" x="246.43" y="-331.4" font-family="Times,serif" font-size="14.00">foo</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_1</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="126.09,-124 126.09,-232 617.74,-232 617.74,-124 126.09,-124"></polygon>
<text text-anchor="middle" x="371.92" y="-215.4" font-family="Times,serif" font-size="14.00">bar</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_2</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="250.41,-8 250.41,-116 751.02,-116 751.02,-8 250.41,-8"></polygon>
<text text-anchor="middle" x="500.71" y="-99.4" font-family="Times,serif" font-size="14.00">qux</text>
</g>
<!-- foo.sources -->
<g id="node1" class="node">
<title>foo.sources</title>
<polygon fill="white" stroke="black" points="96.21,-272.3 15.93,-272.3 15.93,-247.7 96.21,-247.7 96.21,-272.3"></polygon>
<text text-anchor="middle" x="56.07" y="-255.8" font-family="Times,serif" font-size="14.00">foo.sources</text>
</g>
<!-- foo.compile -->
<g id="node2" class="node">
<title>foo.compile</title>
<polygon fill="white" stroke="black" points="215.53,-272.3 132.01,-272.3 132.01,-247.7 215.53,-247.7 215.53,-272.3"></polygon>
<text text-anchor="middle" x="173.77" y="-255.8" font-family="Times,serif" font-size="14.00">foo.compile</text>
</g>
<!-- foo.sources&#45;&gt;foo.compile -->
<g id="edge1" class="edge">
<title>foo.sources-&gt;foo.compile</title>
<path fill="none" stroke="black" d="M96.24,-260C104.53,-260 113.4,-260 122.05,-260"></path>
<polygon fill="black" stroke="black" points="122.06,-263.5 132.06,-260 122.06,-256.5 122.06,-263.5"></polygon>
</g>
<!-- foo.classPath -->
<g id="node5" class="node">
<title>foo.classPath</title>
<polygon fill="white" stroke="black" points="344.9,-272.3 254.39,-272.3 254.39,-247.7 344.9,-247.7 344.9,-272.3"></polygon>
<text text-anchor="middle" x="299.64" y="-255.8" font-family="Times,serif" font-size="14.00">foo.classPath</text>
</g>
<!-- foo.compile&#45;&gt;foo.classPath -->
<g id="edge2" class="edge">
<title>foo.compile-&gt;foo.classPath</title>
<path fill="none" stroke="black" d="M215.67,-260C224.78,-260 234.58,-260 244.14,-260"></path>
<polygon fill="black" stroke="black" points="244.37,-263.5 254.37,-260 244.37,-256.5 244.37,-263.5"></polygon>
</g>
<!-- foo.mainClass -->
<g id="node3" class="node">
<title>foo.mainClass</title>
<polygon fill="white" stroke="black" points="348.13,-315.3 251.16,-315.3 251.16,-290.7 348.13,-290.7 348.13,-315.3"></polygon>
<text text-anchor="middle" x="299.64" y="-298.8" font-family="Times,serif" font-size="14.00">foo.mainClass</text>
</g>
<!-- foo.assembly -->
<g id="node4" class="node">
<title>foo.assembly</title>
<polygon fill="white" stroke="black" points="477,-293.3 386.48,-293.3 386.48,-268.7 477,-268.7 477,-293.3"></polygon>
<text text-anchor="middle" x="431.74" y="-276.8" font-family="Times,serif" font-size="14.00">foo.assembly</text>
</g>
<!-- foo.mainClass&#45;&gt;foo.assembly -->
<g id="edge4" class="edge">
<title>foo.mainClass-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M347.98,-295C357.16,-293.44 366.84,-291.81 376.23,-290.22"></path>
<polygon fill="black" stroke="black" points="376.98,-293.64 386.26,-288.52 375.81,-286.74 376.98,-293.64"></polygon>
</g>
<!-- foo.classPath&#45;&gt;foo.assembly -->
<g id="edge3" class="edge">
<title>foo.classPath-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M345.05,-267.17C355.2,-268.81 366.1,-270.57 376.61,-272.26"></path>
<polygon fill="black" stroke="black" points="376.1,-275.73 386.53,-273.86 377.22,-268.82 376.1,-275.73"></polygon>
</g>
<!-- bar.compile -->
<g id="node7" class="node">
<title>bar.compile</title>
<polygon fill="white" stroke="black" points="341.12,-156.3 258.17,-156.3 258.17,-131.7 341.12,-131.7 341.12,-156.3"></polygon>
<text text-anchor="middle" x="299.64" y="-139.8" font-family="Times,serif" font-size="14.00">bar.compile</text>
</g>
<!-- foo.classPath&#45;&gt;bar.compile -->
<g id="edge5" class="edge">
<title>foo.classPath-&gt;bar.compile</title>
<path fill="none" stroke="black" d="M299.64,-247.49C299.64,-220.65 299.64,-193.81 299.64,-166.97"></path>
<polygon fill="black" stroke="black" points="303.14,-166.69 299.64,-156.69 296.14,-166.69 303.14,-166.69"></polygon>
</g>
<!-- bar.classPath -->
<g id="node10" class="node">
<title>bar.classPath</title>
<polygon fill="white" stroke="black" points="476.71,-156.3 386.77,-156.3 386.77,-131.7 476.71,-131.7 476.71,-156.3"></polygon>
<text text-anchor="middle" x="431.74" y="-139.8" font-family="Times,serif" font-size="14.00">bar.classPath</text>
</g>
<!-- foo.classPath&#45;&gt;bar.classPath -->
<g id="edge6" class="edge">
<title>foo.classPath-&gt;bar.classPath</title>
<path fill="none" stroke="black" d="M331.99,-247.6C337.72,-244.39 343.32,-240.54 347.89,-236 372.69,-211.32 358.71,-190.29 383.89,-166 385.34,-164.6 386.91,-163.27 388.54,-162.02"></path>
<polygon fill="black" stroke="black" points="390.76,-164.75 397.23,-156.36 386.94,-158.88 390.76,-164.75"></polygon>
</g>
<!-- bar.sources -->
<g id="node6" class="node">
<title>bar.sources</title>
<polygon fill="white" stroke="black" points="213.63,-156.3 133.92,-156.3 133.92,-131.7 213.63,-131.7 213.63,-156.3"></polygon>
<text text-anchor="middle" x="173.77" y="-139.8" font-family="Times,serif" font-size="14.00">bar.sources</text>
</g>
<!-- bar.sources&#45;&gt;bar.compile -->
<g id="edge8" class="edge">
<title>bar.sources-&gt;bar.compile</title>
<path fill="none" stroke="black" d="M213.63,-144C224.49,-144 236.46,-144 247.9,-144"></path>
<polygon fill="black" stroke="black" points="248.22,-147.5 258.22,-144 248.22,-140.5 248.22,-147.5"></polygon>
</g>
<!-- bar.compile&#45;&gt;bar.classPath -->
<g id="edge9" class="edge">
<title>bar.compile-&gt;bar.classPath</title>
<path fill="none" stroke="black" d="M341.09,-144C352.29,-144 364.62,-144 376.46,-144"></path>
<polygon fill="black" stroke="black" points="376.7,-147.5 386.7,-144 376.7,-140.5 376.7,-147.5"></polygon>
</g>
<!-- bar.mainClass -->
<g id="node8" class="node">
<title>bar.mainClass</title>
<polygon fill="white" stroke="black" points="479.44,-199.3 384.04,-199.3 384.04,-174.7 479.44,-174.7 479.44,-199.3"></polygon>
<text text-anchor="middle" x="431.74" y="-182.8" font-family="Times,serif" font-size="14.00">bar.mainClass</text>
</g>
<!-- bar.assembly -->
<g id="node9" class="node">
<title>bar.assembly</title>
<polygon fill="white" stroke="black" points="609.98,-177.3 520.03,-177.3 520.03,-152.7 609.98,-152.7 609.98,-177.3"></polygon>
<text text-anchor="middle" x="565" y="-160.8" font-family="Times,serif" font-size="14.00">bar.assembly</text>
</g>
<!-- bar.mainClass&#45;&gt;bar.assembly -->
<g id="edge7" class="edge">
<title>bar.mainClass-&gt;bar.assembly</title>
<path fill="none" stroke="black" d="M479.76,-179.12C489.58,-177.47 500.01,-175.73 510.06,-174.04"></path>
<polygon fill="black" stroke="black" points="510.66,-177.49 519.94,-172.38 509.5,-170.59 510.66,-177.49"></polygon>
</g>
<!-- bar.classPath&#45;&gt;bar.assembly -->
<g id="edge10" class="edge">
<title>bar.classPath-&gt;bar.assembly</title>
<path fill="none" stroke="black" d="M476.81,-151.05C487.42,-152.75 498.87,-154.58 509.88,-156.34"></path>
<polygon fill="black" stroke="black" points="509.4,-159.81 519.82,-157.93 510.5,-152.9 509.4,-159.81"></polygon>
</g>
<!-- qux.compile -->
<g id="node12" class="node">
<title>qux.compile</title>
<polygon fill="white" stroke="black" points="474.34,-83.3 389.14,-83.3 389.14,-58.7 474.34,-58.7 474.34,-83.3"></polygon>
<text text-anchor="middle" x="431.74" y="-66.8" font-family="Times,serif" font-size="14.00">qux.compile</text>
</g>
<!-- bar.classPath&#45;&gt;qux.compile -->
<g id="edge11" class="edge">
<title>bar.classPath-&gt;qux.compile</title>
<path fill="none" stroke="black" d="M431.74,-131.25C431.74,-118.7 431.74,-106.16 431.74,-93.61"></path>
<polygon fill="black" stroke="black" points="435.24,-93.55 431.74,-83.55 428.24,-93.55 435.24,-93.55"></polygon>
</g>
<!-- qux.classPath -->
<g id="node15" class="node">
<title>qux.classPath</title>
<polygon fill="white" stroke="black" points="611.1,-83.3 518.91,-83.3 518.91,-58.7 611.1,-58.7 611.1,-83.3"></polygon>
<text text-anchor="middle" x="565" y="-66.8" font-family="Times,serif" font-size="14.00">qux.classPath</text>
</g>
<!-- bar.classPath&#45;&gt;qux.classPath -->
<g id="edge12" class="edge">
<title>bar.classPath-&gt;qux.classPath</title>
<path fill="none" stroke="black" d="M461.19,-131.67C468.96,-128.09 477.32,-124.05 484.87,-120 502.55,-110.5 521.71,-98.68 536.74,-89.03"></path>
<polygon fill="black" stroke="black" points="539.03,-91.72 545.52,-83.35 535.22,-85.85 539.03,-91.72"></polygon>
</g>
<!-- qux.sources -->
<g id="node11" class="node">
<title>qux.sources</title>
<polygon fill="white" stroke="black" points="341.13,-83.3 258.16,-83.3 258.16,-58.7 341.13,-58.7 341.13,-83.3"></polygon>
<text text-anchor="middle" x="299.64" y="-66.8" font-family="Times,serif" font-size="14.00">qux.sources</text>
</g>
<!-- qux.sources&#45;&gt;qux.compile -->
<g id="edge14" class="edge">
<title>qux.sources-&gt;qux.compile</title>
<path fill="none" stroke="black" d="M341.09,-71C352.98,-71 366.16,-71 378.66,-71"></path>
<polygon fill="black" stroke="black" points="378.97,-74.5 388.97,-71 378.97,-67.5 378.97,-74.5"></polygon>
</g>
<!-- qux.compile&#45;&gt;qux.classPath -->
<g id="edge15" class="edge">
<title>qux.compile-&gt;qux.classPath</title>
<path fill="none" stroke="black" d="M474.63,-71C485.43,-71 497.22,-71 508.59,-71"></path>
<polygon fill="black" stroke="black" points="508.88,-74.5 518.88,-71 508.88,-67.5 508.88,-74.5"></polygon>
</g>
<!-- qux.mainClass -->
<g id="node13" class="node">
<title>qux.mainClass</title>
<polygon fill="white" stroke="black" points="614.33,-40.3 515.68,-40.3 515.68,-15.7 614.33,-15.7 614.33,-40.3"></polygon>
<text text-anchor="middle" x="565" y="-23.8" font-family="Times,serif" font-size="14.00">qux.mainClass</text>
</g>
<!-- qux.assembly -->
<g id="node14" class="node">
<title>qux.assembly</title>
<polygon fill="white" stroke="black" points="742.82,-61.3 650.62,-61.3 650.62,-36.7 742.82,-36.7 742.82,-61.3"></polygon>
<text text-anchor="middle" x="696.72" y="-44.8" font-family="Times,serif" font-size="14.00">qux.assembly</text>
</g>
<!-- qux.mainClass&#45;&gt;qux.assembly -->
<g id="edge13" class="edge">
<title>qux.mainClass-&gt;qux.assembly</title>
<path fill="none" stroke="black" d="M614.67,-35.88C623.04,-37.23 631.8,-38.65 640.33,-40.03"></path>
<polygon fill="black" stroke="black" points="639.78,-43.49 650.21,-41.63 640.89,-36.58 639.78,-43.49"></polygon>
</g>
<!-- qux.classPath&#45;&gt;qux.assembly -->
<g id="edge16" class="edge">
<title>qux.classPath-&gt;qux.assembly</title>
<path fill="none" stroke="black" d="M611.37,-63.31C620.81,-61.71 630.85,-60 640.59,-58.35"></path>
<polygon fill="black" stroke="black" points="641.32,-61.78 650.59,-56.65 640.15,-54.87 641.32,-61.78"></polygon>
</g>
</g>
</svg>

</center>
</div>
<div class="paragraph">
<p>Apart from the various tasks doing different things, we also see multiple modules
with similar task layouts (<code>foo</code>, <code>bar</code> and <code>qux</code>), but with subtle customizations in
each module to wire them up
(e.g. <code>foo.classPath</code> having one upstream task but <code>bar.classPath</code> and <code>qux.classPath</code>
each having two). And this is one of the simplest possible builds: you can imagine that
with compiler and runtime flags, code-generation, dependency-downloading, different language
toolchains, these graphs can get complicated quickly. And any build tool will need some way
for the user to define these graphs and maintain them over time.</p>
</div>
<div class="paragraph">
<p>Most build tools provide ad-hoc config formats (Maven’s XML) or programmatic builder
APIs (e.g. Gradle’s Groovy/Kotlin) to satisfy this need, but these ad-hoc formats
inevitably end up being unfamiliar and confusing to users (e.g. the Gradle code
<a href="#_mill_vs_gradle_configuration_as_code">discussed above</a>). Many
tools try to hide complexity behind plugins, but that doesn’t actually solve it: plugin
authors are human too, and can also make mistakes and cause bugs when publishing their plugins.
It doesn’t matter whether the bugs are in your own build customization or in the plugins
you use if the end result is your build system becomes slow and flaky!</p>
</div>
<div class="paragraph">
<p>Fundamentally, defining an API for templated, customizable graph-computations is
non-trivial, so it is not surprising the APIs and to do so can get complicated. But Mill
has one big insight in how it can be done better:</p>
</div>
<div class="sect2">
<h3 id="_object_oriented_build_pipelines"><a class="anchor" href="#_object_oriented_build_pipelines"></a>Object-Oriented Build Pipelines</h3>
<div class="paragraph">
<p>Mill has the same requirement of defining templated, customizable graph-computations, but
rather than inventing a bespoke programming, configuration and plugin model to do so, Mill
builds upon what everyone already knows: <em>Object-Oriented Programming</em>. It turns out that the
object-oriented programming every Java developer learned in school provides all the key
building blocks necessary to define templated, customizable graph-computations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Methods</strong> provide a way of defining discrete build steps that perform
some necessary action in your build</p>
</li>
<li>
<p>The <strong>Call Graph</strong> between methods provides the build graph, where which method call
which other methods defines the incoming edges of that node in the graph</p>
</li>
<li>
<p><strong>Classes</strong> provide the templating, where you can define a set of methods calling each
other, and instantiate those call graphs more than once in different parts of your build</p>
</li>
<li>
<p><strong>Overrides</strong> and <strong>Subclasses</strong> provide customization: when a particular instance or
sub-class needs a different implementation of one-or-more build steps, you can
override the respective methods to customize the build call graph to your liking</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Thus, when you see a Mill build configured as such, with an <code>object</code> extending a <code>class</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends JavaModule {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is not some special syntax, but is literally defining an object named <code>foo</code>
inheriting from the class <code>JavaModule</code>. Like any other inheritance, this picks up
the methods and method call graph of <code>JavaModule</code> (slightly simplified below)</p>
</div>
<div class="paragraph">
<center>
<svg width="493px" height="132px" viewBox="0.00 0.00 492.68 132.00" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 128.0)">
<title>G</title>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="8,-8 8,-116 476.68,-116 476.68,-8 8,-8"></polygon>
<text text-anchor="middle" x="242.34" y="-99.4" font-family="Times,serif" font-size="14.00">foo</text>
</g>
<!-- foo.sources -->
<g id="node1" class="node">
<title>foo.sources</title>
<polygon fill="white" stroke="black" points="96.21,-83.3 15.93,-83.3 15.93,-58.7 96.21,-58.7 96.21,-83.3"></polygon>
<text text-anchor="middle" x="56.07" y="-66.8" font-family="Times,serif" font-size="14.00">foo.sources</text>
</g>
<!-- foo.compile -->
<g id="node2" class="node">
<title>foo.compile</title>
<polygon fill="white" stroke="black" points="215.53,-83.3 132.01,-83.3 132.01,-58.7 215.53,-58.7 215.53,-83.3"></polygon>
<text text-anchor="middle" x="173.77" y="-66.8" font-family="Times,serif" font-size="14.00">foo.compile</text>
</g>
<!-- foo.sources&#45;&gt;foo.compile -->
<g id="edge1" class="edge">
<title>foo.sources-&gt;foo.compile</title>
<path fill="none" stroke="black" d="M96.24,-71C104.53,-71 113.4,-71 122.05,-71"></path>
<polygon fill="black" stroke="black" points="122.06,-74.5 132.06,-71 122.06,-67.5 122.06,-74.5"></polygon>
</g>
<!-- foo.classPath -->
<g id="node3" class="node">
<title>foo.classPath</title>
<polygon fill="white" stroke="black" points="342.17,-83.3 251.65,-83.3 251.65,-58.7 342.17,-58.7 342.17,-83.3"></polygon>
<text text-anchor="middle" x="296.91" y="-66.8" font-family="Times,serif" font-size="14.00">foo.classPath</text>
</g>
<!-- foo.compile&#45;&gt;foo.classPath -->
<g id="edge2" class="edge">
<title>foo.compile-&gt;foo.classPath</title>
<path fill="none" stroke="black" d="M215.44,-71C223.74,-71 232.6,-71 241.3,-71"></path>
<polygon fill="black" stroke="black" points="241.39,-74.5 251.39,-71 241.39,-67.5 241.39,-74.5"></polygon>
</g>
<!-- foo.assembly -->
<g id="node4" class="node">
<title>foo.assembly</title>
<polygon fill="white" stroke="black" points="468.81,-61.3 378.29,-61.3 378.29,-36.7 468.81,-36.7 468.81,-61.3"></polygon>
<text text-anchor="middle" x="423.55" y="-44.8" font-family="Times,serif" font-size="14.00">foo.assembly</text>
</g>
<!-- foo.classPath&#45;&gt;foo.assembly -->
<g id="edge3" class="edge">
<title>foo.classPath-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M342.2,-63.18C350.65,-61.69 359.58,-60.11 368.3,-58.57"></path>
<polygon fill="black" stroke="black" points="369.16,-61.98 378.4,-56.79 367.94,-55.08 369.16,-61.98"></polygon>
</g>
<!-- foo.resources -->
<g id="node5" class="node">
<title>foo.resources</title>
<polygon fill="white" stroke="black" points="342.42,-40.3 251.39,-40.3 251.39,-15.7 342.42,-15.7 342.42,-40.3"></polygon>
<text text-anchor="middle" x="296.91" y="-23.8" font-family="Times,serif" font-size="14.00">foo.resources</text>
</g>
<!-- foo.resources&#45;&gt;foo.assembly -->
<g id="edge4" class="edge">
<title>foo.resources-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M342.55,-35.52C350.89,-36.93 359.68,-38.41 368.27,-39.85"></path>
<polygon fill="black" stroke="black" points="367.77,-43.32 378.21,-41.53 368.93,-36.42 367.77,-43.32"></polygon>
</g>
</g>
</svg>

</center>
</div>
<div class="paragraph">
<p>And when you add additional tasks by defining methods using <code>def</code>, or <code>override</code> tasks
and call <code>super</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends JavaModule {
  /** Total number of lines in module source files */
  def lineCount = Task {
    allSourceFiles().map(f =&gt; os.read.lines(f.path).size).sum
  }

  /** Generate resources using lineCount of sources */
  override def resources = Task {
    os.write(Task.dest / &quot;line-count.txt&quot;, &quot;&quot; + lineCount())
    super.resources() ++ Seq(PathRef(Task.dest))
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You as a Java programmer already know how these changes affect the build graph, by splicing
in the new method <code>foo.lineCount</code>, replacing <code>foo.resources</code> with a new method body, and
calling <code>foo.super.resources</code>:</p>
</div>
<div class="paragraph">
<center>
<svg width="534px" height="175px" viewBox="0.00 0.00 534.25 175.00" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 171.0)">
<title>G</title>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="8,-8 8,-159 518.25,-159 518.25,-8 8,-8"></polygon>
<text text-anchor="middle" x="263.12" y="-142.4" font-family="Times,serif" font-size="14.00">foo</text>
</g>
<!-- foo.sources -->
<g id="node1" class="node">
<title>foo.sources</title>
<polygon fill="white" stroke="black" points="96.21,-104.3 15.93,-104.3 15.93,-79.7 96.21,-79.7 96.21,-104.3"></polygon>
<text text-anchor="middle" x="56.07" y="-87.8" font-family="Times,serif" font-size="14.00">foo.sources</text>
</g>
<!-- foo.compile -->
<g id="node2" class="node">
<title>foo.compile</title>
<polygon fill="white" stroke="black" points="236.32,-126.3 152.79,-126.3 152.79,-101.7 236.32,-101.7 236.32,-126.3"></polygon>
<text text-anchor="middle" x="194.56" y="-109.8" font-family="Times,serif" font-size="14.00">foo.compile</text>
</g>
<!-- foo.sources&#45;&gt;foo.compile -->
<g id="edge1" class="edge">
<title>foo.sources-&gt;foo.compile</title>
<path fill="none" stroke="black" d="M96.18,-98.3C110.66,-100.64 127.28,-103.32 142.65,-105.79"></path>
<polygon fill="black" stroke="black" points="142.11,-109.25 152.54,-107.39 143.22,-102.34 142.11,-109.25"></polygon>
</g>
<!-- foo.lineCount -->
<g id="node7" class="node">
<title>foo.lineCount</title>
<polygon fill="white" stroke="darkgreen" stroke-width="3" points="241.44,-83.3 147.67,-83.3 147.67,-58.7 241.44,-58.7 241.44,-83.3"></polygon>
<text text-anchor="middle" x="194.56" y="-66.8" font-family="Times,serif" font-size="14.00">foo.lineCount</text>
</g>
<!-- foo.sources&#45;&gt;foo.lineCount -->
<g id="edge6" class="edge">
<title>foo.sources-&gt;foo.lineCount</title>
<path fill="none" stroke="darkgreen" stroke-width="3" d="M96.18,-85.98C109.11,-83.99 123.76,-81.74 137.7,-79.59"></path>
<polygon fill="darkgreen" stroke="darkgreen" stroke-width="3" points="138.33,-83.04 147.68,-78.06 137.27,-76.12 138.33,-83.04"></polygon>
</g>
<!-- foo.classPath -->
<g id="node3" class="node">
<title>foo.classPath</title>
<polygon fill="white" stroke="black" points="383.74,-126.3 293.22,-126.3 293.22,-101.7 383.74,-101.7 383.74,-126.3"></polygon>
<text text-anchor="middle" x="338.48" y="-109.8" font-family="Times,serif" font-size="14.00">foo.classPath</text>
</g>
<!-- foo.compile&#45;&gt;foo.classPath -->
<g id="edge2" class="edge">
<title>foo.compile-&gt;foo.classPath</title>
<path fill="none" stroke="black" d="M236.23,-114C250.87,-114 267.64,-114 283.26,-114"></path>
<polygon fill="black" stroke="black" points="283.33,-117.5 293.33,-114 283.33,-110.5 283.33,-117.5"></polygon>
</g>
<!-- foo.assembly -->
<g id="node4" class="node">
<title>foo.assembly</title>
<polygon fill="white" stroke="black" points="510.38,-104.3 419.86,-104.3 419.86,-79.7 510.38,-79.7 510.38,-104.3"></polygon>
<text text-anchor="middle" x="465.12" y="-87.8" font-family="Times,serif" font-size="14.00">foo.assembly</text>
</g>
<!-- foo.classPath&#45;&gt;foo.assembly -->
<g id="edge3" class="edge">
<title>foo.classPath-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M383.78,-106.18C392.22,-104.69 401.16,-103.11 409.87,-101.57"></path>
<polygon fill="black" stroke="black" points="410.73,-104.98 419.97,-99.79 409.51,-98.08 410.73,-104.98"></polygon>
</g>
<!-- foo.super.resources -->
<g id="node5" class="node">
<title>foo.super.resources</title>
<polygon fill="white" stroke="black" points="256.89,-40.3 132.22,-40.3 132.22,-15.7 256.89,-15.7 256.89,-40.3"></polygon>
<text text-anchor="middle" x="194.56" y="-23.8" font-family="Times,serif" font-size="14.00">foo.super.resources</text>
</g>
<!-- foo.resources -->
<g id="node6" class="node">
<title>foo.resources</title>
<polygon fill="white" stroke="darkgreen" stroke-width="3" points="384,-83.3 292.97,-83.3 292.97,-58.7 384,-58.7 384,-83.3"></polygon>
<text text-anchor="middle" x="338.48" y="-66.8" font-family="Times,serif" font-size="14.00">foo.resources</text>
</g>
<!-- foo.super.resources&#45;&gt;foo.resources -->
<g id="edge4" class="edge">
<title>foo.super.resources-&gt;foo.resources</title>
<path fill="none" stroke="darkgreen" stroke-width="3" d="M236.23,-40.32C252.11,-45.14 270.49,-50.7 287.2,-55.76"></path>
<polygon fill="darkgreen" stroke="darkgreen" stroke-width="3" points="286.22,-59.13 296.81,-58.68 288.25,-52.43 286.22,-59.13"></polygon>
</g>
<!-- foo.resources&#45;&gt;foo.assembly -->
<g id="edge5" class="edge">
<title>foo.resources-&gt;foo.assembly</title>
<path fill="none" stroke="darkgreen" stroke-width="3" d="M384.13,-78.52C392.46,-79.93 401.25,-81.41 409.84,-82.85"></path>
<polygon fill="darkgreen" stroke="darkgreen" stroke-width="3" points="409.34,-86.32 419.79,-84.53 410.51,-79.42 409.34,-86.32"></polygon>
</g>
<!-- foo.lineCount&#45;&gt;foo.resources -->
<g id="edge7" class="edge">
<title>foo.lineCount-&gt;foo.resources</title>
<path fill="none" stroke="darkgreen" stroke-width="3" d="M241.64,-71C254.66,-71 268.97,-71 282.47,-71"></path>
<polygon fill="darkgreen" stroke="darkgreen" stroke-width="3" points="282.6,-74.5 292.6,-71 282.6,-67.5 282.6,-74.5"></polygon>
</g>
</g>
</svg>

</center>
</div>
<div class="paragraph">
<p>If you want to re-use your build pipeline customizations, it as simple as turning the
<code>object foo</code> into a <code>class MyJavaModule</code> (called a <code>trait MyJavaModule</code> in Mill’s syntax), so it
can be inherited  by <code>object foo</code> and <code>object bar</code> to share the configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends MyJavaModule
object bar extends MyJavaModule

trait MyJavaModule extends JavaModule {
  /** Total number of lines in module source files */
  def lineCount = Task {
    allSourceFiles().map(f =&gt; os.read.lines(f.path).size).sum
  }

  /** Generate resources using lineCount of sources */
  override def resources = Task {
    os.write(Task.dest / &quot;line-count.txt&quot;, &quot;&quot; + lineCount())
    super.resources() ++ Seq(PathRef(Task.dest))
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<center>
<svg width="534px" height="334px" viewBox="0.00 0.00 534.25 334.00" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 330.0)">
<title>G</title>
<g id="clust1" class="cluster">
<title>cluster_1</title>
<polygon fill="transparent" stroke="darkgreen" stroke-width="3" stroke-dasharray="5,2" points="8.39,-8 8.39,-159 517.86,-159 517.86,-8 8.39,-8"></polygon>
<text text-anchor="middle" x="263.12" y="-142.4" font-family="Times,serif" font-size="14.00">bar</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_0</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="8,-167 8,-318 518.25,-318 518.25,-167 8,-167"></polygon>
<text text-anchor="middle" x="263.12" y="-301.4" font-family="Times,serif" font-size="14.00">foo</text>
</g>
<!-- bar.sources -->
<g id="node1" class="node">
<title>bar.sources</title>
<polygon fill="white" stroke="black" points="95.92,-104.3 16.21,-104.3 16.21,-79.7 95.92,-79.7 95.92,-104.3"></polygon>
<text text-anchor="middle" x="56.07" y="-87.8" font-family="Times,serif" font-size="14.00">bar.sources</text>
</g>
<!-- bar.compile -->
<g id="node2" class="node">
<title>bar.compile</title>
<polygon fill="white" stroke="black" points="236.03,-126.3 153.08,-126.3 153.08,-101.7 236.03,-101.7 236.03,-126.3"></polygon>
<text text-anchor="middle" x="194.56" y="-109.8" font-family="Times,serif" font-size="14.00">bar.compile</text>
</g>
<!-- bar.sources&#45;&gt;bar.compile -->
<g id="edge1" class="edge">
<title>bar.sources-&gt;bar.compile</title>
<path fill="none" stroke="black" d="M95.82,-98.25C110.56,-100.62 127.57,-103.36 143.23,-105.89"></path>
<polygon fill="black" stroke="black" points="142.86,-109.37 153.29,-107.51 143.97,-102.46 142.86,-109.37"></polygon>
</g>
<!-- bar.lineCount -->
<g id="node7" class="node">
<title>bar.lineCount</title>
<polygon fill="white" stroke="black" points="240.66,-83.3 148.46,-83.3 148.46,-58.7 240.66,-58.7 240.66,-83.3"></polygon>
<text text-anchor="middle" x="194.56" y="-66.8" font-family="Times,serif" font-size="14.00">bar.lineCount</text>
</g>
<!-- bar.sources&#45;&gt;bar.lineCount -->
<g id="edge6" class="edge">
<title>bar.sources-&gt;bar.lineCount</title>
<path fill="none" stroke="black" d="M95.82,-86.04C109.01,-84.01 124.02,-81.7 138.25,-79.51"></path>
<polygon fill="black" stroke="black" points="139.09,-82.92 148.44,-77.94 138.02,-76 139.09,-82.92"></polygon>
</g>
<!-- bar.classPath -->
<g id="node3" class="node">
<title>bar.classPath</title>
<polygon fill="white" stroke="black" points="383.45,-126.3 293.51,-126.3 293.51,-101.7 383.45,-101.7 383.45,-126.3"></polygon>
<text text-anchor="middle" x="338.48" y="-109.8" font-family="Times,serif" font-size="14.00">bar.classPath</text>
</g>
<!-- bar.compile&#45;&gt;bar.classPath -->
<g id="edge2" class="edge">
<title>bar.compile-&gt;bar.classPath</title>
<path fill="none" stroke="black" d="M235.85,-114C250.64,-114 267.63,-114 283.43,-114"></path>
<polygon fill="black" stroke="black" points="283.61,-117.5 293.61,-114 283.61,-110.5 283.61,-117.5"></polygon>
</g>
<!-- bar.assembly -->
<g id="node4" class="node">
<title>bar.assembly</title>
<polygon fill="white" stroke="black" points="510.1,-104.3 420.14,-104.3 420.14,-79.7 510.1,-79.7 510.1,-104.3"></polygon>
<text text-anchor="middle" x="465.12" y="-87.8" font-family="Times,serif" font-size="14.00">bar.assembly</text>
</g>
<!-- bar.classPath&#45;&gt;bar.assembly -->
<g id="edge3" class="edge">
<title>bar.classPath-&gt;bar.assembly</title>
<path fill="none" stroke="black" d="M383.42,-106.24C392.08,-104.72 401.26,-103.1 410.2,-101.52"></path>
<polygon fill="black" stroke="black" points="410.91,-104.95 420.15,-99.76 409.7,-98.05 410.91,-104.95"></polygon>
</g>
<!-- bar.super.resources -->
<g id="node5" class="node">
<title>bar.super.resources</title>
<polygon fill="white" stroke="black" points="256.61,-40.3 132.51,-40.3 132.51,-15.7 256.61,-15.7 256.61,-40.3"></polygon>
<text text-anchor="middle" x="194.56" y="-23.8" font-family="Times,serif" font-size="14.00">bar.super.resources</text>
</g>
<!-- bar.resources -->
<g id="node6" class="node">
<title>bar.resources</title>
<polygon fill="white" stroke="black" points="383.71,-83.3 293.25,-83.3 293.25,-58.7 383.71,-58.7 383.71,-83.3"></polygon>
<text text-anchor="middle" x="338.48" y="-66.8" font-family="Times,serif" font-size="14.00">bar.resources</text>
</g>
<!-- bar.super.resources&#45;&gt;bar.resources -->
<g id="edge4" class="edge">
<title>bar.super.resources-&gt;bar.resources</title>
<path fill="none" stroke="black" d="M236.23,-40.32C252.11,-45.14 270.49,-50.7 287.2,-55.76"></path>
<polygon fill="black" stroke="black" points="286.22,-59.13 296.81,-58.68 288.25,-52.43 286.22,-59.13"></polygon>
</g>
<!-- bar.resources&#45;&gt;bar.assembly -->
<g id="edge5" class="edge">
<title>bar.resources-&gt;bar.assembly</title>
<path fill="none" stroke="black" d="M383.78,-78.46C392.22,-79.89 401.16,-81.39 409.87,-82.86"></path>
<polygon fill="black" stroke="black" points="409.53,-86.35 419.97,-84.56 410.69,-79.45 409.53,-86.35"></polygon>
</g>
<!-- bar.lineCount&#45;&gt;bar.resources -->
<g id="edge7" class="edge">
<title>bar.lineCount-&gt;bar.resources</title>
<path fill="none" stroke="black" d="M240.85,-71C254.17,-71 268.88,-71 282.72,-71"></path>
<polygon fill="black" stroke="black" points="283.1,-74.5 293.1,-71 283.1,-67.5 283.1,-74.5"></polygon>
</g>
<!-- foo.sources -->
<g id="node8" class="node">
<title>foo.sources</title>
<polygon fill="white" stroke="black" points="96.21,-263.3 15.93,-263.3 15.93,-238.7 96.21,-238.7 96.21,-263.3"></polygon>
<text text-anchor="middle" x="56.07" y="-246.8" font-family="Times,serif" font-size="14.00">foo.sources</text>
</g>
<!-- foo.compile -->
<g id="node9" class="node">
<title>foo.compile</title>
<polygon fill="white" stroke="black" points="236.32,-285.3 152.79,-285.3 152.79,-260.7 236.32,-260.7 236.32,-285.3"></polygon>
<text text-anchor="middle" x="194.56" y="-268.8" font-family="Times,serif" font-size="14.00">foo.compile</text>
</g>
<!-- foo.sources&#45;&gt;foo.compile -->
<g id="edge8" class="edge">
<title>foo.sources-&gt;foo.compile</title>
<path fill="none" stroke="black" d="M96.18,-257.3C110.66,-259.64 127.28,-262.32 142.65,-264.79"></path>
<polygon fill="black" stroke="black" points="142.11,-268.25 152.54,-266.39 143.22,-261.34 142.11,-268.25"></polygon>
</g>
<!-- foo.lineCount -->
<g id="node14" class="node">
<title>foo.lineCount</title>
<polygon fill="white" stroke="black" points="241.44,-242.3 147.67,-242.3 147.67,-217.7 241.44,-217.7 241.44,-242.3"></polygon>
<text text-anchor="middle" x="194.56" y="-225.8" font-family="Times,serif" font-size="14.00">foo.lineCount</text>
</g>
<!-- foo.sources&#45;&gt;foo.lineCount -->
<g id="edge13" class="edge">
<title>foo.sources-&gt;foo.lineCount</title>
<path fill="none" stroke="black" d="M96.18,-244.98C109.11,-242.99 123.76,-240.74 137.7,-238.59"></path>
<polygon fill="black" stroke="black" points="138.33,-242.04 147.68,-237.06 137.27,-235.12 138.33,-242.04"></polygon>
</g>
<!-- foo.classPath -->
<g id="node10" class="node">
<title>foo.classPath</title>
<polygon fill="white" stroke="black" points="383.74,-285.3 293.22,-285.3 293.22,-260.7 383.74,-260.7 383.74,-285.3"></polygon>
<text text-anchor="middle" x="338.48" y="-268.8" font-family="Times,serif" font-size="14.00">foo.classPath</text>
</g>
<!-- foo.compile&#45;&gt;foo.classPath -->
<g id="edge9" class="edge">
<title>foo.compile-&gt;foo.classPath</title>
<path fill="none" stroke="black" d="M236.23,-273C250.87,-273 267.64,-273 283.26,-273"></path>
<polygon fill="black" stroke="black" points="283.33,-276.5 293.33,-273 283.33,-269.5 283.33,-276.5"></polygon>
</g>
<!-- foo.assembly -->
<g id="node11" class="node">
<title>foo.assembly</title>
<polygon fill="white" stroke="black" points="510.38,-263.3 419.86,-263.3 419.86,-238.7 510.38,-238.7 510.38,-263.3"></polygon>
<text text-anchor="middle" x="465.12" y="-246.8" font-family="Times,serif" font-size="14.00">foo.assembly</text>
</g>
<!-- foo.classPath&#45;&gt;foo.assembly -->
<g id="edge10" class="edge">
<title>foo.classPath-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M383.78,-265.18C392.22,-263.69 401.16,-262.11 409.87,-260.57"></path>
<polygon fill="black" stroke="black" points="410.73,-263.98 419.97,-258.79 409.51,-257.08 410.73,-263.98"></polygon>
</g>
<!-- foo.super.resources -->
<g id="node12" class="node">
<title>foo.super.resources</title>
<polygon fill="white" stroke="black" points="256.89,-199.3 132.22,-199.3 132.22,-174.7 256.89,-174.7 256.89,-199.3"></polygon>
<text text-anchor="middle" x="194.56" y="-182.8" font-family="Times,serif" font-size="14.00">foo.super.resources</text>
</g>
<!-- foo.resources -->
<g id="node13" class="node">
<title>foo.resources</title>
<polygon fill="white" stroke="black" points="384,-242.3 292.97,-242.3 292.97,-217.7 384,-217.7 384,-242.3"></polygon>
<text text-anchor="middle" x="338.48" y="-225.8" font-family="Times,serif" font-size="14.00">foo.resources</text>
</g>
<!-- foo.super.resources&#45;&gt;foo.resources -->
<g id="edge11" class="edge">
<title>foo.super.resources-&gt;foo.resources</title>
<path fill="none" stroke="black" d="M236.23,-199.32C252.11,-204.14 270.49,-209.7 287.2,-214.76"></path>
<polygon fill="black" stroke="black" points="286.22,-218.13 296.81,-217.68 288.25,-211.43 286.22,-218.13"></polygon>
</g>
<!-- foo.resources&#45;&gt;foo.assembly -->
<g id="edge12" class="edge">
<title>foo.resources-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M384.13,-237.52C392.46,-238.93 401.25,-240.41 409.84,-241.85"></path>
<polygon fill="black" stroke="black" points="409.34,-245.32 419.79,-243.53 410.51,-238.42 409.34,-245.32"></polygon>
</g>
<!-- foo.lineCount&#45;&gt;foo.resources -->
<g id="edge14" class="edge">
<title>foo.lineCount-&gt;foo.resources</title>
<path fill="none" stroke="black" d="M241.64,-230C254.66,-230 268.97,-230 282.47,-230"></path>
<polygon fill="black" stroke="black" points="282.6,-233.5 292.6,-230 282.6,-226.5 282.6,-233.5"></polygon>
</g>
</g>
</svg>

</center>
</div>
<div class="paragraph">
<p>If you want to further customize either of those modules, you can <code>override</code>
one or more of the inherited methods. And if you want to publish your customizations
for others to use in their own projects,
you can <a href="../extending/writing-plugins.html#_publishing" class="xref page">publish
MyJavaModule to Maven Central</a> for others to
<a href="../extending/import-mvn-plugins.html" class="xref page">import into their build</a>.</p>
</div>
<div class="paragraph">
<p>Mill’s usage of methods, classes, and overrides is also what powers the IDE support
discussed earlier on this page. IDEs like IntelliJ or VSCode are uniquely adept at
working with JVM codebases full of methods and classes, and so
they can help you navigate and understand your Mill build pipelines just as easily
as any application codebase. And the simplicity of this extension model is what
allows Mill developers to avoid making mistakes aroun caching or parallelism when setting
up their builds or publishing plugins, which ultimately is what gives Mill builds great
performance without ever needing to <code>clean</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Build systems have traditionally been mysterious black boxes that only experts could work
with: slow for unknown reasons, with cargo-culted configuration and usage commands,
and challenging for normal application developers to contribute improvements to.
The things that a build tool needs to do - templated, customizable graph-computations -
are inherently complex, and so it is not a surprise that this complexity bleeds through
to the user experience.</p>
</div>
<div class="paragraph">
<p>Mill does not make the complexity in your build pipelines go away, or hide it behind
hard-coded helpers or plugins. Instead, Mill lets you manage that complexity using the
same object-oriented programming techniques you are already familiar with. With Mill,
you can navigate, maintain, and extend your build pipelines in exactly the same way you
already navigate, maintain, and extend your JVM application code. And just as
object-oriented Java, Scala or Kotlin is performance well-understood by developers or
IDEs, object-oriented Mill build code is similarly able to give you the performance,
ease of use, and excellent IDE support that the JVM platform is known for.</p>
</div>
<div class="paragraph">
<p>The rest of this doc-site contains more Mill build tool comparisons
(with <a href="maven.html" class="xref page">Maven</a>, <a href="gradle.html" class="xref page">Gradle</a>,
<a href="sbt.html" class="xref page">sbt</a>), with getting started instructions
for using Mill with <a href="../javalib/intro.html" class="xref page">Java</a>, with <a href="../scalalib/intro.html" class="xref page">Scala</a>,
or with <a href="../kotlinlib/intro.html" class="xref page">Kotlin</a>, and detailed documentation for how Mill
works. Please try it out and let us know in the
<a href="https://github.com/com-lihaoyi/mill/discussions">discussions forum</a> how it goes!</p>
</div>
</div>
</div>
<div id="footnotes">
<hr />
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. The bug is <code>inputs.files</code> is depending on <code>src/main</code>, when it only really needs <code>src/main/java</code>. That means that changes to <code>src/main/resources</code> or <code>src/main/templates</code> will cause the task redundantly re-compute, making your build slower than necessary. If the bug was the other way - rather than depending on too large a folder instead depending on too small a folder - it would instead cause flakiness where <code>generateLineCount</code> would sometimes not run when it needs to.
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../javascriptlib/build-examples.html">JavaScript Build Examples</a></span>
  <span class="next"><a href="maven.html">Case Study: Mill vs Maven</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async="async" src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async="async" src="../../../search-index.js"></script>
  
</body></html>