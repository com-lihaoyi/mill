<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Library Dependencies in Mill :: The Mill Build Tool</title>
    <link rel="canonical" href="https://mill-build.org/mill/fundamentals/library-deps.html">
    <link rel="prev" href="out-dir.html">
    <link rel="next" href="cross-builds.html">
    <meta name="generator" content="Antora 3.1.12">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1C582ZJR85"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-1C582ZJR85')</script>
<link rel="icon" href="../../../_/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <style>
  /* auto-hyphenation is super ugly */
  *{
    hyphens: manual !important;
  }

  /* Reduce font size from 17px to something reasonable */
  .doc {
   font-size: 16px !important;
  }
  .doc pre {
   font-size: 14px !important;
  }
  /* Shrink unreasonably large top bar */
  nav.navbar{
    height: 2.5rem;
  }
  body.article{
    padding-top: 2.5rem;
  }
  div.nav-container{
    top: 2.5rem;
  }
  div.toolbar{
    top: 2.5rem;
  }
  aside.nav{
    top: 2.5rem;
    height: calc(100vh - 2.5rem);
  }
  </style>
  <script>
  gtag('config', 'AW-16649289906');

  document.addEventListener('DOMContentLoaded', function() {
  const links = document.querySelectorAll('a');
    links.forEach(link => {
      if (link.textContent.trim().toLowerCase() === 'download') {
        link.addEventListener('click', function(event) {
          console.log("download link clicked")
          gtag('event', 'conversion', {'send_to': 'AW-16649289906/rsphCKfVq8QZELKBgIM-'});
        });
      }
    });
  });
  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <!-- TODO: add mill icon -->
      <a class="navbar-item" href="https://mill-build.org"><img src="../../../_/logo-white.svg" height="20" />&nbsp;The Mill Build Tool</a>
      <div class="navbar-item search">
        <input id="search-input" type="text" placeholder="Search the docs">
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill">GitHub</a>
        <a class="navbar-item" href="https://mill-build.org/blog/index.html">Blog</a>
        <a class="navbar-item" href="https://mill-build.org/api/latest/mill.html">API</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/issues">Issues</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/discussions">Discuss</a>


            <!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Documentation</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#"></a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Plugins</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
        -->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="mill" data-version="0.12.x">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">

  <li class="nav-item" data-depth="0">
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../javalib/intro.html">Building Java with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/module-config.html">Java Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/dependencies.html">Java Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/testing.html">Testing Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/linting.html">Linting Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/publishing.html">Java Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/build-examples.html">Java Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/web-examples.html">Java Web Project Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scalalib/intro.html">Building Scala with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/module-config.html">Scala Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/dependencies.html">Scala Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/testing.html">Testing Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/linting.html">Linting Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/publishing.html">Scala Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/build-examples.html">Scala Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/web-examples.html">Scala Web Project Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/native-examples.html">Scala Native Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/spark.html">Spark Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../kotlinlib/intro.html">Building Kotlin with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/module-config.html">Kotlin Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/dependencies.html">Kotlin Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/testing.html">Testing Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/linting.html">Linting Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/publishing.html">Kotlin Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/web-examples.html">Kotlin Web Project Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Experimental Platform Support</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../pythonlib/intro.html">Building Python with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/module-config.html">Python Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/dependencies.html">Python Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/linting.html">Linting Python Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/testing.html">Testing Python Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/publishing.html">Python Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <span class="nav-text">xref:pythonlib/web-examples.adoc</span>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../javascriptlib/intro.html">Building Javascript with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/dependencies.html">Typescript Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/module-config.html">Typescript Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/testing.html">Testing Typescript Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../javascriptlib/linting.html">Linting Typescript Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../javascriptlib/publishing.html">Typescript Packaging &amp; Publishing</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Building Android Apps</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/java.html">Android Java Projects</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/kotlin.html">Android Kotlin Projects</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/android-linting.html">Linting Android Projects</a>
  </li>
</ul>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../comparisons/why-mill.html">Why Use Mill?</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../comparisons/maven.html">Case Study: Mill vs Maven</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../comparisons/gradle.html">Case Study: Mill vs Gradle</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../comparisons/sbt.html">Case Study: Mill vs <code>sbt</code></a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">The Mill CLI</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/installation-ide.html">Installation &amp; IDE Setup</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/flags.html">Mill Command-Line Flags</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/builtin-commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../cli/query-syntax.html">Task Query Syntax</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../migrating/migrating.html">Migrating to Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migrating/maven.html">Migrating From Maven to Mill</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migrating/gradle.html">Migrating From Gradle to Mill</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migrating/sbt.html">Migrating From sbt to Mill</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill Fundamentals</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tasks.html">Tasks</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="modules.html">Modules</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="out-dir.html">The Output Directory</a>
  </li>

  <li class="nav-item is-current-page is-active" data-depth="2">
    <a class="nav-link" href="library-deps.html">Library Dependencies in Mill</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="cross-builds.html">Cross Builds</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="bundled-libraries.html">Bundled Libraries</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="configuring-jvm-versions.html">Configuring JVM Versions</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extending Mill</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../extending/import-ivy-plugins.html">Import Libraries and Plugins</a>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../extending/contrib-plugins.html">Contrib Plugins</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/artifactory.html">Artifactory</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/bintray.html">Bintray</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/bloop.html">Bloop</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/buildinfo.html">BuildInfo</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/codeartifact.html">Codeartifact</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/docker.html">Docker</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/flyway.html">Flyway</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/gitlab.html">Gitlab</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/jmh.html">JMH</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/playlib.html">Play Framework</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/proguard.html">Proguard</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/scalapblib.html">ScalaPB</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/scoverage.html">Scoverage</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/sonatypecentral.html">Sonatype Central</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/testng.html">TestNG</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/twirllib.html">Twirl</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/versionfile.html">Version file</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../extending/thirdparty-plugins.html">Third-Party Plugins</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/running-jvm-code.html">Running Dynamic JVM Code</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/writing-plugins.html">Writing Mill Plugins</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/meta-build.html">The Mill Meta-Build</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/example-typescript-support.html">Example: Typescript Support</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/example-python-support.html">Example: Python Support</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../large/large.html">Large Builds and Monorepos</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/selective-execution.html">Selective Test Execution</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/multi-file-builds.html">Multi-File Builds</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/multi-language-builds.html">Multi-Language Builds</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill In Depth</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/execution-model.html">The Mill Execution Model</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/caching.html">Caching in Mill</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/parallelism.html">Parallelism in Mill</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/process-architecture.html">The Mill Process Architecture</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/sandboxing.html">Mill Sandboxing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/design-principles.html">Mill Design Principles</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/why-scala.html">Why does Mill use Scala?</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://mill-build.org/api/latest/mill/index.html">Mill Scaladoc</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/com-lihaoyi/mill/blob/main/changelog.adoc">Changelog</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/talks-blog-posts.html">Talks &amp; Blog Posts</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Mill Documentation</span>
    <span class="version">0.12.14</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../../index.html">Mill Documentation</a></div>
      <ul class="versions">
        <li class="version">
          <a href="../../main-branch/index.html">main-branch</a>
        </li>
        <li class="version is-latest">
          <a href="../../index.html">1.0.3</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">0.12.14</a>
        </li>
        <li class="version">
          <a href="../../0.11.x/index.html">0.11.13</a>
        </li>
        <li class="version">
          <a href="../../0.10.15/index.html">0.10.15</a>
        </li>
        <li class="version">
          <a href="../../0.9.12/index.html">0.9.12</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../blog/index.html">The Mill Build Engineering Blog</a></div>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">

<div class="toolbar" role="navigation" style="position: fixed; top: 2.5rem; height: 2rem; left: 0px;">
<button class="nav-toggle"></button>
</div>
<div class="toolbar" style="position: fixed; top: 2.5rem; height: 1.5rem; right: 0px; ">
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Library Dependencies in Mill</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Beside the dependencies between Mill modules, most non-trivial source projects have dependencies to other libraries.</p>
</div>
<div class="paragraph">
<p>Mill uses <a href="https://github.com/coursier/coursier">coursier</a> to resolve and download dependencies.
Once downloaded, they are located in the coursier specific cache locations.
For more details about coursier, refer to the <a href="https://get-coursier.io/docs/overview">coursier documentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependencies_in_general"><a class="anchor" href="#_dependencies_in_general"></a>Dependencies in General</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mill dependencies have the simple form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ivy"{organization}:{name}:{version}"</pre>
</div>
</div>
<div class="paragraph">
<p>Additional attributes are also supported:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ivy"{organization}:{name}:{version}[;{attribute}={value}]*"</pre>
</div>
</div>
<div class="paragraph">
<p>When working in other Java and Scala projects, you will find some synonyms, which typically all mean the same.
For example in the Maven ecosystem, the <code>organization</code> is called the <code>group</code> and the <code>name</code> is called the <code>artifact</code>.
The whole triplet is often called <code>GAV</code>.</p>
</div>
<div class="paragraph">
<p>In Mill we use the additional term <code>artifactId</code> which is identical to the <code>name</code> when used in the normal form shown above.
When a different form is used, e.g. some double-colons are used between the parts, the <code>artifactId</code> typically contains suffixes, but the name doesn&#8217;t.</p>
</div>
<div class="listingblock">
<div class="title">Example for a simple Java Dependency</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">def ivyDeps = Agg(
  ivy"org.slf4j:slf4j-api:1.7.25"
)</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_test_dependencies_there_is_no_test_scope"><a class="anchor" href="#_test_dependencies_there_is_no_test_scope"></a>Test dependencies (there is no <code>test</code> scope)</h3>
<div class="paragraph">
<p>One difference between Mill and other build tools like sbt or Maven is the fact, that tests are ordinary submodules on their own.
For convenience, most modules already come with a pre-configured trait for a test submodule,
which already inherits all dependencies of their parent module.
If you need additional test dependencies, you simply add them by overriding <code>def ivyDeps</code>, as you would do with normal library dependencies.</p>
</div>
<div class="paragraph">
<p>When migrating a sbt project and seeing a dependency like this: <code>"ch.qos.logback" % "logback-classic" % "1.2.3" % "test"</code>,
simply add it to the test module&#8217;s <code>ivyDeps</code> as ordinary dependency.
There is no special test scope in Mill.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">object main extends JavaModule {
  object test extends JavaModuleTests {
    def ivyDeps = Agg(
      ivy"org.qos.logback:logback-classic:1.2.3"
    )
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compile_only_dependencies_provided_scope"><a class="anchor" href="#_compile_only_dependencies_provided_scope"></a>Compile-only dependencies (<code>provided</code> scope)</h3>
<div class="paragraph">
<p>If you want to use a dependency only at compile time, you can declare it with the <code>compileIvyDeps</code> task.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">def compileIvyDeps = Agg(
  ivy"org.slf4j:slf4j-api:1.7.25"
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>When Mill generated file to interact with package manager like <code>pom.xml</code> for Maven repositories, such compile-only dependencies are mapped to the <code>provided</code> scope.</p>
</div>
<div class="paragraph">
<p>Please note, that dependencies with <code>provided</code> scope will never be resolved transitively. Hence, the name "provided", as the task runtime needs to "provide" them, if they are needed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_runtime_dependencies"><a class="anchor" href="#_runtime_dependencies"></a>Runtime dependencies</h3>
<div class="paragraph">
<p>If you want to declare dependencies to be used at runtime (but not at compile time), you can use the <code>runIvyDeps</code> tasks.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">def runIvyDeps = Agg(
  ivy"ch.qos.logback:logback-classic:1.2.0"
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to use a higher version of the same library dependencies already defined in <code>ivyDeps</code>, to ensure you compile against a minimal API version, but actually run with the latest available version.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transitive_dependencies"><a class="anchor" href="#_transitive_dependencies"></a>Transitive dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To render a tree of dependencies (transitive included) you can run <code>mill myModule.ivyDepsTree</code>. Here is how the start of <code>./mill __.ivyDepsTree</code> looks like in the <code>mill</code> project itself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">├─ ch.epfl.scala:bsp4j:2.1.0-M3
│  ├─ org.eclipse.lsp4j:org.eclipse.lsp4j.generator:0.12.0
│  │  ├─ org.eclipse.lsp4j:org.eclipse.lsp4j.jsonrpc:0.12.0
│  │  │  └─ com.google.code.gson:gson:2.9.1
│  │  └─ org.eclipse.xtend:org.eclipse.xtend.lib:2.24.0
│  │     ├─ org.eclipse.xtend:org.eclipse.xtend.lib.macro:2.24.0
│  │     │  └─ org.eclipse.xtext:org.eclipse.xtext.xbase.lib:2.24.0
...
│  │  ├─ com.lihaoyi:fastparse_2.13:2.3.0
│  │  │  ├─ com.lihaoyi:geny_2.13:0.6.0 -&gt; 0.7.1 (possible incompatibility)
│  │  │  │  └─ org.scala-lang:scala-library:2.13.10
│  │  │  └─ com.lihaoyi:sourcecode_2.13:0.2.1 -&gt; 0.3.0 (possible incompatibility)</code></pre>
</div>
</div>
<div class="paragraph">
<p>After compiling your module(s) you can find and examine files such as <code>ivyDeps.json</code> and <code>transitiveIvyDeps.json</code> in your <code>out</code> build&#8217;s folder for a given module.
After running the <code>ivyDepsTree</code> command you&#8217;ll also find the <code>ivyDepsTree.json</code> and <code>ivyDepsTree.log</code> file that contain the output of the above <code>ivyDepsTree</code> command.</p>
</div>
<div class="paragraph">
<p>You can observe the actual version being used by running <code>mill show myModule.resolvedIvyDeps</code>. If you run <code>mill myModule.resolvedIvyDeps</code>, the same information is available in <code>out/myModule/resolvedIvyDeps.json</code>.</p>
</div>
<div class="sect2">
<h3 id="_figuring_out_where_a_dependency_comes_from"><a class="anchor" href="#_figuring_out_where_a_dependency_comes_from"></a>Figuring out where a dependency comes from</h3>
<div class="paragraph">
<p>There will be times when you want to figure out where a dependency is coming
from. The output of <code>ivyDepsTree</code> can be quite large in larger projects so the
command provides a nice utility to be able to target the part of the tree that
brings in a specific dependency.</p>
</div>
<div class="paragraph">
<p>For example, let&#8217;s again  use the Mill codebase as an example. We&#8217;ll search the
tree in the  <code>main</code> module and try to find where the <code>jsoniter-scala-core_2.13</code>
artifact is coming from using the <code>--whatDependsOn</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">❯ ./mill -i dev.run ~/Documents/scala-workspace/com-lihaoyi/mill  main.ivyDepsTree --whatDependsOn com.github.plokhotnyuk.jsoniter-scala:jsoniter-scala-core_2.13
[33/33] main.ivyDepsTree
└─ com.github.plokhotnyuk.jsoniter-scala:jsoniter-scala-core_2.13:2.13.5
   ├─ io.get-coursier:coursier_2.13:2.1.0-RC1
   └─ org.virtuslab.scala-cli:config_2.13:0.1.16
      └─ io.get-coursier:coursier-cache_2.13:2.1.0-RC1
         └─ io.get-coursier:coursier_2.13:2.1.0-RC1</code></pre>
</div>
</div>
<div class="paragraph">
<p>By looking at the output we can see that it&#8217;s our dependency on <code>coursier_2.13</code>
that is bringing in the <code>jsoniter-scala-core_2.13</code> artifact.</p>
</div>
<div class="paragraph">
<p>The <code>--whatDependsOn</code> argument can also be repeated to target multiple
artifacts at once. Just repeat the <code>--whatDependsOn &lt;artifact&gt;</code> pattern. Note
that the artifact pattern follows the <code>org:artifact</code> convention. You can&#8217;t
include a version as the utility will show you all usages of the <code>artifact</code>.
Also note that when using <code>--whatDependsOn</code> on usage of <code>--inverse</code> is forced
in order to make the tree appear in an inverted manner to more easily show you
where the dependency is coming from.</p>
</div>
</div>
<div class="sect2">
<h3 id="_excluding_transitive_dependencies"><a class="anchor" href="#_excluding_transitive_dependencies"></a>Excluding transitive dependencies</h3>
<div class="paragraph">
<p>You can use the <code>.exclude</code> method on a dependency. It accepts  <code>organization</code> and <code>name</code> tuples, to be excluded.
Use the special name <code>*</code> to match all <code>organization</code>s or <code>name</code>s.</p>
</div>
<div class="listingblock">
<div class="title">Example: Exclude <code>fansi_2.12</code> library from transitive dependency set of <code>pprint</code>.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">def deps = Agg(
  ivy"com.lihaoyi::pprint:0.5.3".exclude("com.lihaoyi" -&gt; "fansi_2.12")
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use <code>.excludeOrg</code> or <code>excludeName</code>:</p>
</div>
<div class="paragraph">
<p>There is also a short notation available:</p>
</div>
<div class="listingblock">
<div class="title">Example: Shot notation to exclude <code>fansi_2.12</code> library from transitive dependency set of <code>pprint</code>.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">def deps = Agg(
  ivy"com.lihaoyi::pprint:0.5.3;exclude=com.lihaoyi:fansi_2.12"
)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example: Exclude all <code>com.lihaoyi</code> libraries from transitive dependency set of <code>pprint</code>.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">val deps = Agg(ivy"com.lihaoyi::pprint:0.5.3".excludeOrg("com.lihaoyi"))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note: You can chain multiple exclusions with <code>exclude</code>, <code>excludeOrg</code>, and <code>excludeName</code>.</p>
</div>
<div class="listingblock">
<div class="title">Example: Excluding a library (fansi) by name from transitive dependency set of <code>pprint</code>.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">val deps = Agg(
  ivy"com.lihaoyi::pprint:0.5.3"
    .excludeName("fansi_2.12")
    .excludeName("sourcecode")
)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_forcing_versions"><a class="anchor" href="#_forcing_versions"></a>Forcing versions</h3>
<div class="paragraph">
<p>You can use the <code>forceVersion</code> method to ensure the used version of a dependency is what you have declared.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You declare a dependency <code>val deps = Agg(ivy"com.lihaoyi::fansi:0.2.14")</code></p>
</li>
<li>
<p>There is another dependency, <code>val deps = Agg(ivy"com.lihaoyi::PPrint:0.8.1")</code></p>
</li>
<li>
<p>PPrint 0.8.1 uses fansi 0.4.0, so it is a transitive dependency</p>
</li>
<li>
<p><code>mill show myModule.resolvedIvyDeps | grep "fansi"</code> should show fansi 0.4.0</p>
</li>
<li>
<p>If you want to force to the older version (to prevent it being evicted, and replaced by 0.4.0) then you can use <code>val deps = Agg(ivy"com.lihaoyi::fansi:0.2.14".forceVersion())</code></p>
</li>
<li>
<p><code>mill show myModule.resolvedIvyDeps | grep "fansi"</code> should show fansi 0.2.14</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependency_management"><a class="anchor" href="#_dependency_management"></a>Dependency management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dependency management consists in listing dependencies whose versions we want to force. Having
a dependency in dependency management doesn&#8217;t mean that this dependency will be fetched, only
that</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if it ends up being fetched transitively, its version will be forced to the one in dependency management</p>
</li>
<li>
<p>if its version is empty in an <code>ivyDeps</code> section in Mill, the version from dependency management will be used</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dependency management also allows to add exclusions to dependencies, both explicit dependencies and
transitive ones.</p>
</div>
<div class="paragraph">
<p>Dependency management can be passed to Mill in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>via external Maven Bill of Material (BOM), like <a href="https://repo1.maven.org/maven2/com/google/cloud/libraries-bom/26.50.0/libraries-bom-26.50.0.pom">this one</a>,
whose Maven coordinates are <code>com.google.cloud:libraries-bom:26.50.0</code></p>
</li>
<li>
<p>via the <code>depManagement</code> task, that allows to directly list dependencies whose versions we want to enforce</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_external_bill_of_material_bom"><a class="anchor" href="#_external_bill_of_material_bom"></a>External Bill of Material (BOM)</h3>
<div class="paragraph">
<p>Pass an external BOM to a <code>JavaModule</code> / <code>ScalaModule</code> / <code>KotlinModule</code> with <code>bomIvyDeps</code>, like</p>
</div>
<div class="listingblock">
<div class="title">build.mill (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/0.12.14/mill-dist-0.12.14-example-fundamentals-dependencies-1-external-bom.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/0.12.14/example/fundamentals/dependencies/1-external-bom">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill._, javalib._

object foo extends JavaModule {
  def bomIvyDeps = Agg(
    ivy"com.google.cloud:libraries-bom:26.50.0"
  )
  def ivyDeps = Agg(
    ivy"io.grpc:grpc-protobuf"
  )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The version of grpc-protobuf (<code>io.grpc:grpc-protobuf</code>) isn&#8217;t written down here, so the version
from the BOM, <code>1.67.1</code> is used.</p>
</div>
<div class="paragraph">
<p>Also, by default, grpc-protobuf <code>1.67.1</code> pulls version <code>3.25.3</code> of protobuf-java (<code>com.google.protobuf:protobuf-java</code>) .
But the BOM specifies another version for that dependency, <code>4.28.3</code>, so
protobuf-java <code>4.28.3</code> ends up being pulled here.</p>
</div>
<div class="paragraph">
<p>Several BOMs can be passed to <code>bomIvyDeps</code>. If several specify a version for a dependency,
the version from the first one in the <code>bomIvyDeps</code> list is used. If several specify exclusions
for a dependency, all exclusions are added to that dependency.</p>
</div>
</div>
<div class="sect2">
<h3 id="_managed_bill_of_material_bom"><a class="anchor" href="#_managed_bill_of_material_bom"></a>Managed Bill of Material (BOM)</h3>
<div class="paragraph">
<p>Pass dependencies to <code>depManagement</code> in a <code>JavaModule</code> / <code>ScalaModule</code> / <code>KotlinModule</code>, like</p>
</div>
<div class="listingblock">
<div class="title">build.mill (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/0.12.14/mill-dist-0.12.14-example-fundamentals-dependencies-2-managed.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/0.12.14/example/fundamentals/dependencies/2-managed">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill._, javalib._

object foo extends JavaModule {
  def depManagement = Agg(
    ivy"com.google.protobuf:protobuf-java:4.28.3",
    ivy"io.grpc:grpc-protobuf:1.67.1"
  )
  def ivyDeps = Agg(
    ivy"io.grpc:grpc-protobuf"
  )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The version of grpc-protobuf (<code>io.grpc:grpc-protobuf</code>) isn&#8217;t written down here, so the version
found in <code>depManagement</code>, <code>1.67.1</code> is used.</p>
</div>
<div class="paragraph">
<p>Also, by default, grpc-protobuf <code>1.67.1</code> pulls version <code>3.25.3</code> of protobuf-java (<code>com.google.protobuf:protobuf-java</code>) .
But <code>depManagement</code> specifies another version for that dependency, <code>4.28.3</code>, so
protobuf-java <code>4.28.3</code> ends up being pulled here.</p>
</div>
<div class="paragraph">
<p>One can also add exclusions via dependency management, like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">object bar extends JavaModule {
  def depManagement = Agg(
    ivy"io.grpc:grpc-protobuf:1.67.1"
      .exclude(("com.google.protobuf", "protobuf-java"))
  )
  def ivyDeps = Agg(
    ivy"io.grpc:grpc-protobuf"
  )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, grpc-protobuf has an empty version in <code>ivyDeps</code>, so the one in <code>depManagement</code>,
<code>1.67.1</code>, is used. Also, <code>com.google.protobuf:protobuf-java</code> is excluded from grpc-protobuf
in <code>depManagement</code>, so it ends up being excluded from it in <code>ivyDeps</code> too.</p>
</div>
<div class="paragraph">
<p>If one wants to add exclusions via <code>depManagement</code>, specifying a version is optional,
like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">object baz extends JavaModule {
  def depManagement = Agg(
    ivy"io.grpc:grpc-protobuf"
      .exclude(("com.google.protobuf", "protobuf-java"))
  )
  def ivyDeps = Agg(
    ivy"io.grpc:grpc-protobuf:1.67.1"
  )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, given that grpc-protobuf is fetched during dependency resolution,
<code>com.google.protobuf:protobuf-java</code> is excluded from it because of the dependency management.</p>
</div>
<div class="paragraph">
<p>One can manage and publish Bill of Material (BOM) modules from Mill, by using <code>BomModule</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">object myBom extends BomModule {
  // Importing external BOMs from our BOM module with bomIvyDeps
  def bomIvyDeps = Agg(
    ivy"com.google.protobuf:protobuf-bom:4.28.1"
  )
  // Managing versions directly from our BOM module with depManagement
  def depManagement = Agg(
    ivy"io.grpc:grpc-protobuf:1.67.1"
  )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the BOM you defined with bomModuleDeps:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">object bomUser extends JavaModule {
  def bomModuleDeps = Seq(
    myBom
  )
  def ivyDeps = Agg(
    ivy"io.grpc:grpc-protobuf"
  )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These BOM modules can published, resulting in a Maven module with
packaging type <code>pom</code>, usable as a BOM from other build tools:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">object myPublishedBom extends BomModule with MyPublishModule {
  def bomIvyDeps = Agg(
    ivy"com.google.protobuf:protobuf-bom:4.28.1"
  )
  def depManagement = Agg(
    ivy"io.grpc:grpc-protobuf:1.67.1"
  )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once published, the BOM can be used in other projects,
but we can still use it right from our build with bomModuleDeps:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">object publishedBomUser extends JavaModule with MyPublishModule {
  def bomModuleDeps = Seq(
    myPublishedBom
  )
  def ivyDeps = Agg(
    ivy"io.grpc:grpc-protobuf"
  )
}

trait MyPublishModule extends PublishModule {
  def pomSettings = PomSettings(
    description = "My Project",
    organization = "com.lihaoyi.mill-examples",
    url = "https://github.com/com-lihaoyi/mill",
    licenses = Seq(License.MIT),
    versionControl = VersionControl.github("com-lihaoyi", "mill"),
    developers = Seq(Developer("me", "Me", "https://github.com/me"))
  )
  def publishVersion = "0.1.0"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_searching_for_dependency_updates"><a class="anchor" href="#_searching_for_dependency_updates"></a>Searching For Dependency Updates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mill can search for updated versions of your project&#8217;s dependencies, if
available from your project&#8217;s configured repositories. Note that it uses
heuristics based on common versioning schemes, so it may not work as expected for
dependencies with particularly weird version numbers. For example, given the following
build:</p>
</div>
<div class="listingblock">
<div class="title">build.mill (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/0.12.14/mill-dist-0.12.14-example-fundamentals-dependencies-3-search-updates.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/0.12.14/example/fundamentals/dependencies/3-search-updates">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill._, scalalib._

trait MyModule extends ScalaModule {
  def scalaVersion = "2.13.11"
}

object foo extends MyModule {
  def moduleDeps = Seq(bar)
  def ivyDeps = Agg(ivy"com.lihaoyi::mainargs:0.4.0")
}

object bar extends MyModule {
  def ivyDeps = Agg(ivy"com.lihaoyi::scalatags:0.8.2")
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; mill mill.scalalib.Dependency/showUpdates

&gt; mill mill.scalalib.Dependency/showUpdates --allowPreRelease true # also show pre-release versions</code></pre>
</div>
</div>
<div class="paragraph">
<p>Current limitations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only works for <code>JavaModule</code> modules (including <code>ScalaModule</code>s,
<code>CrossScalaModule</code>s, etc.) and Maven repositories.</p>
</li>
<li>
<p>Always applies to all modules in the build.</p>
</li>
<li>
<p>Doesn&#8217;t apply to <code>$ivy</code> dependencies used in the build definition itself.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="out-dir.html">The Output Directory</a></span>
  <span class="next"><a href="cross-builds.html">Cross Builds</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
