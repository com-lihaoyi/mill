<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>The Mill Process Architecture :: The Mill Build Tool</title>
    <link rel="canonical" href="https://mill-build.org/mill/depth/process-architecture.html" />
    <link rel="prev" href="parallelism.html" />
    <link rel="next" href="sandboxing.html" />
    <meta name="generator" content="Antora 3.1.12" />
    <link rel="stylesheet" href="../../../_/css/site.css" />
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-1C582ZJR85"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-1C582ZJR85')</script>
<link rel="icon" href="../../../_/favicon.png" type="image/x-icon" />
  
  <style>
  /* auto-hyphenation is super ugly */
  *{
    hyphens: manual !important;
  }

  /* Reduce font size from 17px to something reasonable */
  .doc {
   font-size: 16px !important;
  }
  .doc pre {
   font-size: 14px !important;
  }
  /* Shrink unreasonably large top bar */
  nav.navbar{
    height: 2.5rem;
  }
  body.article{
    padding-top: 2.5rem;
  }
  div.nav-container{
    top: 2.5rem;
  }
  div.toolbar{
    top: 2.5rem;
  }
  aside.nav{
    top: 2.5rem;
    height: calc(100vh - 2.5rem);
  }
  </style></head><body class="article">
  
<header class="header">
  
  <script>
  gtag('config', 'AW-16649289906');

  document.addEventListener('DOMContentLoaded', function() {
  const links = document.querySelectorAll('a');
    links.forEach(link => {
      if (link.textContent.trim().toLowerCase() === 'download') {
        link.addEventListener('click', function(event) {
          console.log("download link clicked")
          gtag('event', 'conversion', {'send_to': 'AW-16649289906/rsphCKfVq8QZELKBgIM-'});
        });
      }
    });
  });
  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <!-- TODO: add mill icon -->
      <a class="navbar-item" href="https://mill-build.org"><img src="../../../_/logo-white.svg" height="20" /> The Mill Build Tool</a>
      <div class="navbar-item search">
        <input id="search-input" type="text" placeholder="Search the docs" />
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill">GitHub</a>
        <a class="navbar-item" href="https://mill-build.org/blog/index.html">Blog</a>
        <a class="navbar-item" href="https://mill-build.org/api/latest/mill.html">API</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/issues">Issues</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/discussions">Discuss</a>


            <!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Documentation</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#"></a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Plugins</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
        -->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="mill" data-version="main-branch">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">

  <li class="nav-item" data-depth="0">
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../javalib/intro.html">Building Java with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/module-config.html">Java Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/dependencies.html">Java Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/testing.html">Testing Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/linting.html">Linting Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/publishing.html">Java Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/build-examples.html">Java Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/web-examples.html">Java Web Project Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scalalib/intro.html">Building Scala with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/module-config.html">Scala Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/dependencies.html">Scala Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/testing.html">Testing Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/linting.html">Linting Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/publishing.html">Scala Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/build-examples.html">Scala Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/web-examples.html">Scala Web Project Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/native-examples.html">Scala Native Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/spark.html">Spark Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../kotlinlib/intro.html">Building Kotlin with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/module-config.html">Kotlin Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/dependencies.html">Kotlin Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/testing.html">Testing Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/linting.html">Linting Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/publishing.html">Kotlin Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/web-examples.html">Kotlin Web Project Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Experimental Platform Support</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Building Android Apps</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/android-initial-setup.html">Android Initial Setup</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/ide.html">Android IDE Support</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/java.html">Android Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/kotlin.html">Android Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/android-linting.html">Linting Android Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/compose-samples.html">Android Jetpack Compose</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/hilt-sample.html">Android Hilt Sample</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../pythonlib/intro.html">Building Python with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/module-config.html">Python Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/dependencies.html">Python Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/linting.html">Linting Python Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/testing.html">Testing Python Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/publishing.html">Python Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <span class="nav-text">xref:pythonlib/web-examples.adoc</span>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../javascriptlib/intro.html">Building Javascript with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/dependencies.html">Typescript Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/module-config.html">Typescript Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/testing.html">Testing Typescript Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../javascriptlib/linting.html">Linting Typescript Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../javascriptlib/publishing.html">Typescript Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../javascriptlib/build-examples.html">JavaScript Build Examples</a>
  </li>
</ul>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../comparisons/why-mill.html">Why Use Mill?</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../comparisons/maven.html">Case Study: Mill vs Maven</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../comparisons/gradle.html">Case Study: Mill vs Gradle</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../comparisons/sbt.html">Case Study: Mill vs <code>sbt</code></a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">The Mill CLI</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/installation-ide.html">Installation &amp; IDE Setup</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/flags.html">Mill Command-Line Flags</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/builtin-commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../cli/query-syntax.html">Task Query Syntax</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../cli/build-header.html">Build Header Config</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../migrating/migrating.html">Migrating to Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migrating/auto-migrating.html">Automated Migration Tools</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill Fundamentals</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/tasks.html">Tasks</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/modules.html">Modules</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/out-dir.html">The Output Directory</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/library-deps.html">Library Dependencies in Mill</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/cross-builds.html">Cross Builds</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/bundled-libraries.html">Bundled Libraries</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/configuring-jvm-versions.html">Configuring JVM Versions</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extending Mill</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../extending/import-mvn-plugins.html">Import Libraries and Plugins</a>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../extending/contrib-plugins.html">Contrib Plugins</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/artifactory.html">Artifactory</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/buildinfo.html">BuildInfo</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/codeartifact.html">Codeartifact</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/docker.html">Docker</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/flyway.html">Flyway</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/gitlab.html">Gitlab</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/jmh.html">JMH</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/playlib.html">Play Framework</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/proguard.html">Proguard</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/scalapblib.html">ScalaPB</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/scoverage.html">Scoverage</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/sonatypecentral.html">Sonatype Central (Plugin Moved to Scalalib)</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/testng.html">TestNG</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/twirllib.html">Twirl</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/versionfile.html">Version file</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../extending/thirdparty-plugins.html">Third-Party Plugins</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/running-jvm-code.html">Running Dynamic JVM Code</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/writing-plugins.html">Writing Mill Plugins</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/meta-build.html">The Mill Meta-Build</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/example-typescript-support.html">Example: Typescript Support</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/example-python-support.html">Example: Python Support</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../large/large.html">Large Builds and Monorepos</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/selective-execution.html">Selective Test Execution</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/multi-file-builds.html">Multi-File Builds</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/multi-language-builds.html">Multi-Language Builds</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill In Depth</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="evaluation-model.html">The Mill Evaluation Model</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="caching.html">Caching in Mill</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parallelism.html">Parallelism in Mill</a>
  </li>

  <li class="nav-item is-current-page is-active" data-depth="2">
    <a class="nav-link" href="process-architecture.html">The Mill Process Architecture</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="sandboxing.html">Mill Sandboxing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="design-principles.html">Mill Design Principles</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="why-scala.html">Why does Mill use Scala?</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://mill-build.org/api/latest/mill.html">Mill API Reference</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/com-lihaoyi/mill/blob/main/changelog.adoc">Changelog</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/talks-blog-posts.html">Talks &amp; Blog Posts</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Mill Documentation</span>
    <span class="version">main-branch</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../../index.html">Mill Documentation</a></div>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">main-branch</a>
        </li>
        <li class="version is-latest">
          <a href="../../index.html">1.0.4</a>
        </li>
        <li class="version">
          <a href="../../0.12.x/index.html">0.12.14</a>
        </li>
        <li class="version">
          <a href="../../0.11.x/index.html">0.11.13</a>
        </li>
        <li class="version">
          <a href="../../0.10.15/index.html">0.10.15</a>
        </li>
        <li class="version">
          <a href="../../0.9.12/index.html">0.9.12</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../blog/index.html">The Mill Build Engineering Blog</a></div>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">

<div class="toolbar" role="navigation" style="position: fixed; top: 2.5rem; height: 2rem; left: 0px;">
<button class="nav-toggle"></button>
</div>
<div class="toolbar" style="position: fixed; top: 2.5rem; height: 1.5rem; right: 0px;">
<div class="edit-this-page"><a href="https://github.com/com-lihaoyi/mill/edit/main/docs/modules/ROOT/pages/depth/process-architecture.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">The Mill Process Architecture</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This page goes into detail of how the Mill process and application is structured.
At a high-level, a simplified version of the main components and data-flows within
a running Mill process is shown below:</p>
</div>
<div class="paragraph">
<center>
<svg width="990px" height="430px" viewBox="0.00 0.00 990.27 430.40" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 426.4)">
<title>G</title>
<g id="clust1" class="cluster">
<title>cluster_client</title>
<polygon fill="transparent" stroke="black" points="131.08,-261 131.08,-369 269.6,-369 269.6,-261 131.08,-261"></polygon>
<text text-anchor="middle" x="200.34" y="-352.4" font-family="Times,serif" font-size="14.00">mill launcher</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_out</title>
<polygon fill="transparent" stroke="black" points="281.6,-8 281.6,-402 408.54,-402 408.54,-8 281.6,-8"></polygon>
<text text-anchor="middle" x="345.07" y="-385.4" font-family="Times,serif" font-size="14.00">out/</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_mill_server_folder</title>
<polygon fill="transparent" stroke="black" points="299.52,-218 299.52,-369 390.62,-369 390.62,-218 299.52,-218"></polygon>
<text text-anchor="middle" x="345.07" y="-352.4" font-family="Times,serif" font-size="14.00">mill-daemon/</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_out_foo_folder</title>
<polygon fill="transparent" stroke="black" points="289.6,-16 289.6,-210 400.54,-210 400.54,-16 289.6,-16"></polygon>
<text text-anchor="middle" x="345.07" y="-193.4" font-family="Times,serif" font-size="14.00">foo/</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_server</title>
<polygon fill="transparent" stroke="black" points="416.54,-103 416.54,-409 974.27,-409 974.27,-103 416.54,-103"></polygon>
<text text-anchor="middle" x="695.41" y="-392.4" font-family="Times,serif" font-size="14.00">mill daemon</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_classloder</title>
<polygon fill="transparent" stroke="black" points="424.54,-111 424.54,-301 966.27,-301 966.27,-111 424.54,-111"></polygon>
<text text-anchor="middle" x="695.41" y="-284.4" font-family="Times,serif" font-size="14.00">URLClassLoader</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_build</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="432.54,-119 432.54,-268 958.27,-268 958.27,-119 432.54,-119"></polygon>
<text text-anchor="middle" x="695.41" y="-251.4" font-family="Times,serif" font-size="14.00">build</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_foo</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="440.54,-127 440.54,-235 950.27,-235 950.27,-127 440.54,-127"></polygon>
<text text-anchor="middle" x="695.41" y="-218.4" font-family="Times,serif" font-size="14.00">foo</text>
</g>
<!-- launcher&#45;stdin -->
<g id="node1" class="node">
<title>launcher-stdin</title>
<polygon fill="white" stroke="black" stroke-width="0" points="99.62,-422.3 3.46,-422.3 3.46,-397.7 99.62,-397.7 99.62,-422.3"></polygon>
<text text-anchor="middle" x="51.54" y="-405.8" font-family="Times,serif" font-size="14.00">launcher-stdin</text>
</g>
<!-- Socket -->
<g id="node6" class="node">
<title>Socket</title>
<polygon fill="white" stroke="black" points="227.45,-336.3 173.24,-336.3 173.24,-311.7 227.45,-311.7 227.45,-336.3"></polygon>
<text text-anchor="middle" x="200.34" y="-319.8" font-family="Times,serif" font-size="14.00">Socket</text>
</g>
<!-- launcher&#45;stdin&#45;&gt;Socket -->
<g id="edge1" class="edge">
<title>launcher-stdin-&gt;Socket</title>
<path fill="none" stroke="black" d="M83.42,-397.59C90.02,-394.65 96.86,-391.39 103.08,-388 128.3,-374.27 155.4,-355.89 174.4,-342.35"></path>
<polygon fill="black" stroke="black" points="176.45,-345.19 182.52,-336.51 172.36,-339.51 176.45,-345.19"></polygon>
</g>
<!-- launcher&#45;stdout -->
<g id="node2" class="node">
<title>launcher-stdout</title>
<polygon fill="white" stroke="black" stroke-width="0" points="103.12,-379.3 -0.04,-379.3 -0.04,-354.7 103.12,-354.7 103.12,-379.3"></polygon>
<text text-anchor="middle" x="51.54" y="-362.8" font-family="Times,serif" font-size="14.00">launcher-stdout</text>
</g>
<!-- launcher&#45;stdout&#45;&gt;Socket -->
<g id="edge3" class="edge">
<title>launcher-stdout-&gt;Socket</title>
<path fill="none" stroke="black" d="M104.33,-351.83C127.54,-345.03 153.92,-337.31 172.98,-331.72"></path>
<polygon fill="black" stroke="black" points="103.22,-348.51 94.61,-354.68 105.19,-355.23 103.22,-348.51"></polygon>
</g>
<!-- launcher&#45;stderr -->
<g id="node3" class="node">
<title>launcher-stderr</title>
<polygon fill="white" stroke="black" stroke-width="0" points="101.77,-336.3 1.31,-336.3 1.31,-311.7 101.77,-311.7 101.77,-336.3"></polygon>
<text text-anchor="middle" x="51.54" y="-319.8" font-family="Times,serif" font-size="14.00">launcher-stderr</text>
</g>
<!-- launcher&#45;stderr&#45;&gt;Socket -->
<g id="edge2" class="edge">
<title>launcher-stderr-&gt;Socket</title>
<path fill="none" stroke="black" d="M112.08,-324C133.27,-324 156.07,-324 173.04,-324"></path>
<polygon fill="black" stroke="black" points="111.83,-320.5 101.83,-324 111.83,-327.5 111.83,-320.5"></polygon>
</g>
<!-- launcher&#45;exit -->
<g id="node4" class="node">
<title>launcher-exit</title>
<polygon fill="white" stroke="black" stroke-width="0" points="96.39,-293.3 6.69,-293.3 6.69,-268.7 96.39,-268.7 96.39,-293.3"></polygon>
<text text-anchor="middle" x="51.54" y="-276.8" font-family="Times,serif" font-size="14.00">launcher-exit</text>
</g>
<!-- MillLauncherMain -->
<g id="node7" class="node">
<title>MillLauncherMain</title>
<polygon fill="white" stroke="black" points="261.37,-293.3 139.32,-293.3 139.32,-268.7 261.37,-268.7 261.37,-293.3"></polygon>
<text text-anchor="middle" x="200.34" y="-276.8" font-family="Times,serif" font-size="14.00">MillLauncherMain</text>
</g>
<!-- launcher&#45;exit&#45;&gt;MillLauncherMain -->
<g id="edge5" class="edge">
<title>launcher-exit-&gt;MillLauncherMain</title>
<path fill="none" stroke="black" d="M106.59,-281C117.24,-281 128.48,-281 139.31,-281"></path>
<polygon fill="black" stroke="black" points="106.59,-277.5 96.59,-281 106.59,-284.5 106.59,-277.5"></polygon>
</g>
<!-- launcher&#45;args -->
<g id="node5" class="node">
<title>launcher-args</title>
<polygon fill="white" stroke="black" stroke-width="0" points="97.72,-250.3 5.37,-250.3 5.37,-225.7 97.72,-225.7 97.72,-250.3"></polygon>
<text text-anchor="middle" x="51.54" y="-233.8" font-family="Times,serif" font-size="14.00">launcher-args</text>
</g>
<!-- launcher&#45;args&#45;&gt;MillLauncherMain -->
<g id="edge4" class="edge">
<title>launcher-args-&gt;MillLauncherMain</title>
<path fill="none" stroke="black" d="M94.61,-250.32C111.04,-255.14 130.05,-260.7 147.33,-265.76"></path>
<polygon fill="black" stroke="black" points="146.69,-269.22 157.27,-268.68 148.66,-262.51 146.69,-269.22"></polygon>
</g>
<!-- socketPort -->
<g id="node9" class="node">
<title>socketPort</title>
<polygon fill="white" stroke="black" stroke-width="0" points="382.67,-336.3 307.47,-336.3 307.47,-311.7 382.67,-311.7 382.67,-336.3"></polygon>
<text text-anchor="middle" x="345.07" y="-319.8" font-family="Times,serif" font-size="14.00">socketPort</text>
</g>
<!-- Socket&#45;&gt;socketPort -->
<g id="edge16" class="edge">
<title>Socket-&gt;socketPort</title>
<path fill="none" stroke="black" d="M237.8,-324C255.87,-324 277.9,-324 297.2,-324"></path>
<polygon fill="black" stroke="black" points="237.52,-320.5 227.52,-324 237.52,-327.5 237.52,-320.5"></polygon>
<polygon fill="black" stroke="black" points="297.31,-327.5 307.31,-324 297.31,-320.5 297.31,-327.5"></polygon>
</g>
<!-- runArgs -->
<g id="node8" class="node">
<title>runArgs</title>
<polygon fill="white" stroke="black" stroke-width="0" points="375.94,-293.3 314.2,-293.3 314.2,-268.7 375.94,-268.7 375.94,-293.3"></polygon>
<text text-anchor="middle" x="345.07" y="-276.8" font-family="Times,serif" font-size="14.00">runArgs</text>
</g>
<!-- MillLauncherMain&#45;&gt;runArgs -->
<g id="edge6" class="edge">
<title>MillLauncherMain-&gt;runArgs</title>
<path fill="none" stroke="black" d="M261.46,-281C275.77,-281 290.69,-281 303.86,-281"></path>
<polygon fill="black" stroke="black" points="303.99,-284.5 313.99,-281 303.99,-277.5 303.99,-284.5"></polygon>
</g>
<!-- exitCode -->
<g id="node10" class="node">
<title>exitCode</title>
<polygon fill="white" stroke="black" stroke-width="0" points="378.12,-250.3 312.02,-250.3 312.02,-225.7 378.12,-225.7 378.12,-250.3"></polygon>
<text text-anchor="middle" x="345.07" y="-233.8" font-family="Times,serif" font-size="14.00">exitCode</text>
</g>
<!-- MillLauncherMain&#45;&gt;exitCode -->
<g id="edge15" class="edge">
<title>MillLauncherMain-&gt;exitCode</title>
<path fill="none" stroke="black" d="M252.08,-265.71C271.95,-259.73 294.16,-253.04 311.78,-247.73"></path>
<polygon fill="black" stroke="black" points="250.81,-262.44 242.24,-268.68 252.83,-269.14 250.81,-262.44"></polygon>
</g>
<!-- MillDaemonMain -->
<g id="node16" class="node">
<title>MillDaemonMain</title>
<polygon fill="white" stroke="black" points="547.2,-333.3 430.02,-333.3 430.02,-308.7 547.2,-308.7 547.2,-333.3"></polygon>
<text text-anchor="middle" x="488.61" y="-316.8" font-family="Times,serif" font-size="14.00">MillDaemonMain</text>
</g>
<!-- runArgs&#45;&gt;MillDaemonMain -->
<g id="edge11" class="edge">
<title>runArgs-&gt;MillDaemonMain</title>
<path fill="none" stroke="black" d="M376.09,-289.48C392.96,-294.25 414.51,-300.34 434.17,-305.9"></path>
<polygon fill="black" stroke="black" points="433.36,-309.31 443.93,-308.66 435.26,-302.57 433.36,-309.31"></polygon>
</g>
<!-- ServerSocket -->
<g id="node18" class="node">
<title>ServerSocket</title>
<polygon fill="white" stroke="black" points="533.75,-376.3 443.47,-376.3 443.47,-351.7 533.75,-351.7 533.75,-376.3"></polygon>
<text text-anchor="middle" x="488.61" y="-359.8" font-family="Times,serif" font-size="14.00">ServerSocket</text>
</g>
<!-- socketPort&#45;&gt;ServerSocket -->
<g id="edge17" class="edge">
<title>socketPort-&gt;ServerSocket</title>
<path fill="none" stroke="black" d="M392.85,-337.22C406.09,-340.96 420.61,-345.07 434.22,-348.91"></path>
<polygon fill="black" stroke="black" points="393.46,-333.76 382.89,-334.41 391.56,-340.49 393.46,-333.76"></polygon>
<polygon fill="black" stroke="black" points="433.36,-352.3 443.93,-351.66 435.26,-345.57 433.36,-352.3"></polygon>
</g>
<!-- exitCode&#45;&gt;MillDaemonMain -->
<g id="edge14" class="edge">
<title>exitCode-&gt;MillDaemonMain</title>
<path fill="none" stroke="black" d="M387.89,-250.64C394.95,-253.36 402.08,-256.49 408.54,-260 433.67,-273.66 459.26,-295.05 474.27,-308.53"></path>
<polygon fill="black" stroke="black" points="388.96,-247.31 378.37,-247.19 386.58,-253.89 388.96,-247.31"></polygon>
</g>
<!-- compile.json -->
<g id="node11" class="node">
<title>compile.json</title>
<polygon fill="white" stroke="black" stroke-width="0" points="389.01,-177.3 301.14,-177.3 301.14,-152.7 389.01,-152.7 389.01,-177.3"></polygon>
<text text-anchor="middle" x="345.07" y="-160.8" font-family="Times,serif" font-size="14.00">compile.json</text>
</g>
<!-- foo.compile -->
<g id="node22" class="node">
<title>foo.compile</title>
<polygon fill="white" stroke="black" points="673.74,-182.3 590.22,-182.3 590.22,-157.7 673.74,-157.7 673.74,-182.3"></polygon>
<text text-anchor="middle" x="631.98" y="-165.8" font-family="Times,serif" font-size="14.00">foo.compile</text>
</g>
<!-- compile.json&#45;&gt;foo.compile -->
<g id="edge21" class="edge">
<title>compile.json-&gt;foo.compile</title>
<path fill="none" stroke="black" d="M399.33,-165.93C451.01,-166.84 528.91,-168.21 579.86,-169.1"></path>
<polygon fill="black" stroke="black" points="399.09,-162.43 389.03,-165.75 398.97,-169.43 399.09,-162.43"></polygon>
<polygon fill="black" stroke="black" points="579.92,-172.6 589.98,-169.28 580.05,-165.61 579.92,-172.6"></polygon>
</g>
<!-- compile.dest -->
<g id="node12" class="node">
<title>compile.dest</title>
<polygon fill="white" stroke="black" stroke-width="0" points="388.72,-134.3 301.42,-134.3 301.42,-109.7 388.72,-109.7 388.72,-134.3"></polygon>
<text text-anchor="middle" x="345.07" y="-117.8" font-family="Times,serif" font-size="14.00">compile.dest</text>
</g>
<!-- compile.dest&#45;&gt;foo.compile -->
<g id="edge20" class="edge">
<title>compile.dest-&gt;foo.compile</title>
<path fill="none" stroke="black" d="M398.69,-130.86C450.48,-139.59 529.03,-152.82 580.18,-161.44"></path>
<polygon fill="black" stroke="black" points="399.17,-127.4 388.73,-129.19 398.01,-134.3 399.17,-127.4"></polygon>
<polygon fill="black" stroke="black" points="579.9,-164.94 590.35,-163.15 581.07,-158.04 579.9,-164.94"></polygon>
</g>
<!-- assembly.json -->
<g id="node13" class="node">
<title>assembly.json</title>
<polygon fill="white" stroke="black" stroke-width="0" points="392.51,-91.3 297.64,-91.3 297.64,-66.7 392.51,-66.7 392.51,-91.3"></polygon>
<text text-anchor="middle" x="345.07" y="-74.8" font-family="Times,serif" font-size="14.00">assembly.json</text>
</g>
<!-- foo.assembly -->
<g id="node24" class="node">
<title>foo.assembly</title>
<polygon fill="white" stroke="black" points="942.4,-159.3 851.88,-159.3 851.88,-134.7 942.4,-134.7 942.4,-159.3"></polygon>
<text text-anchor="middle" x="897.14" y="-142.8" font-family="Times,serif" font-size="14.00">foo.assembly</text>
</g>
<!-- assembly.json&#45;&gt;foo.assembly -->
<g id="edge23" class="edge">
<title>assembly.json-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M402.89,-81.8C491.64,-86.83 668.33,-99.43 816.01,-126 825.16,-127.65 834.8,-129.8 844.09,-132.1"></path>
<polygon fill="black" stroke="black" points="402.94,-78.3 392.76,-81.24 402.56,-85.29 402.94,-78.3"></polygon>
<polygon fill="black" stroke="black" points="843.45,-135.55 854,-134.63 845.18,-128.76 843.45,-135.55"></polygon>
</g>
<!-- assembly.dest -->
<g id="node14" class="node">
<title>assembly.dest</title>
<polygon fill="white" stroke="black" stroke-width="0" points="392.22,-48.3 297.92,-48.3 297.92,-23.7 392.22,-23.7 392.22,-48.3"></polygon>
<text text-anchor="middle" x="345.07" y="-31.8" font-family="Times,serif" font-size="14.00">assembly.dest</text>
</g>
<!-- assembly.dest&#45;&gt;foo.assembly -->
<g id="edge22" class="edge">
<title>assembly.dest-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M402.38,-38.82C491.89,-44.56 671.29,-61.2 816.01,-107 833.52,-112.54 851.94,-121.49 866.69,-129.51"></path>
<polygon fill="black" stroke="black" points="402.38,-35.32 392.18,-38.19 401.94,-42.3 402.38,-35.32"></polygon>
<polygon fill="black" stroke="black" points="865.37,-132.79 875.81,-134.61 868.79,-126.68 865.37,-132.79"></polygon>
</g>
<!-- PromptLogger -->
<g id="node15" class="node">
<title>PromptLogger</title>
<polygon fill="white" stroke="black" points="680.63,-376.3 583.33,-376.3 583.33,-351.7 680.63,-351.7 680.63,-376.3"></polygon>
<text text-anchor="middle" x="631.98" y="-359.8" font-family="Times,serif" font-size="14.00">PromptLogger</text>
</g>
<!-- daemon&#45;stdout -->
<g id="node19" class="node">
<title>daemon-stdout</title>
<polygon fill="white" stroke="black" stroke-width="0" points="816.12,-376.3 716.7,-376.3 716.7,-351.7 816.12,-351.7 816.12,-376.3"></polygon>
<text text-anchor="middle" x="766.41" y="-359.8" font-family="Times,serif" font-size="14.00">daemon-stdout</text>
</g>
<!-- PromptLogger&#45;&gt;daemon&#45;stdout -->
<g id="edge19" class="edge">
<title>PromptLogger-&gt;daemon-stdout</title>
<path fill="none" stroke="black" d="M690.83,-364C699.49,-364 708.34,-364 716.78,-364"></path>
<polygon fill="black" stroke="black" points="690.79,-360.5 680.79,-364 690.79,-367.5 690.79,-360.5"></polygon>
</g>
<!-- daemon&#45;stderr -->
<g id="node20" class="node">
<title>daemon-stderr</title>
<polygon fill="white" stroke="black" stroke-width="0" points="814.76,-333.3 718.06,-333.3 718.06,-308.7 814.76,-308.7 814.76,-333.3"></polygon>
<text text-anchor="middle" x="766.41" y="-316.8" font-family="Times,serif" font-size="14.00">daemon-stderr</text>
</g>
<!-- PromptLogger&#45;&gt;daemon&#45;stderr -->
<g id="edge18" class="edge">
<title>PromptLogger-&gt;daemon-stderr</title>
<path fill="none" stroke="black" d="M680.77,-348.48C696.12,-343.5 712.91,-338.05 727.46,-333.32"></path>
<polygon fill="black" stroke="black" points="679.36,-345.26 670.93,-351.68 681.52,-351.92 679.36,-345.26"></polygon>
</g>
<!-- Evaluator -->
<g id="node17" class="node">
<title>Evaluator</title>
<polygon fill="white" stroke="black" points="667.41,-333.3 596.56,-333.3 596.56,-308.7 667.41,-308.7 667.41,-333.3"></polygon>
<text text-anchor="middle" x="631.98" y="-316.8" font-family="Times,serif" font-size="14.00">Evaluator</text>
</g>
<!-- MillDaemonMain&#45;&gt;Evaluator -->
<g id="edge12" class="edge">
<title>MillDaemonMain-&gt;Evaluator</title>
<path fill="none" stroke="black" d="M557.74,-321C567.39,-321 577.12,-321 586.18,-321"></path>
<polygon fill="black" stroke="black" points="557.52,-317.5 547.52,-321 557.52,-324.5 557.52,-317.5"></polygon>
<polygon fill="black" stroke="black" points="586.47,-324.5 596.47,-321 586.47,-317.5 586.47,-324.5"></polygon>
</g>
<!-- ServerSocket&#45;&gt;PromptLogger -->
<g id="edge13" class="edge">
<title>ServerSocket-&gt;PromptLogger</title>
<path fill="none" stroke="black" d="M544.02,-364C556.82,-364 570.37,-364 582.87,-364"></path>
<polygon fill="black" stroke="black" points="543.95,-360.5 533.95,-364 543.95,-367.5 543.95,-360.5"></polygon>
</g>
<!-- foo.sources -->
<g id="node21" class="node">
<title>foo.sources</title>
<polygon fill="white" stroke="black" points="528.75,-202.3 448.47,-202.3 448.47,-177.7 528.75,-177.7 528.75,-202.3"></polygon>
<text text-anchor="middle" x="488.61" y="-185.8" font-family="Times,serif" font-size="14.00">foo.sources</text>
</g>
<!-- foo.sources&#45;&gt;foo.compile -->
<g id="edge7" class="edge">
<title>foo.sources-&gt;foo.compile</title>
<path fill="none" stroke="black" d="M528.99,-184.43C544.82,-182.19 563.28,-179.58 580.11,-177.2"></path>
<polygon fill="black" stroke="black" points="580.93,-180.62 590.34,-175.75 579.95,-173.69 580.93,-180.62"></polygon>
</g>
<!-- foo.classPath -->
<g id="node23" class="node">
<title>foo.classPath</title>
<polygon fill="white" stroke="black" points="811.67,-202.3 721.15,-202.3 721.15,-177.7 811.67,-177.7 811.67,-202.3"></polygon>
<text text-anchor="middle" x="766.41" y="-185.8" font-family="Times,serif" font-size="14.00">foo.classPath</text>
</g>
<!-- foo.compile&#45;&gt;foo.classPath -->
<g id="edge8" class="edge">
<title>foo.compile-&gt;foo.classPath</title>
<path fill="none" stroke="black" d="M673.8,-176.16C685.67,-177.96 698.83,-179.94 711.38,-181.84"></path>
<polygon fill="black" stroke="black" points="710.87,-185.3 721.28,-183.34 711.92,-178.38 710.87,-185.3"></polygon>
</g>
<!-- foo.classPath&#45;&gt;foo.assembly -->
<g id="edge9" class="edge">
<title>foo.classPath-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M804.3,-177.68C818.44,-172.95 834.76,-167.5 849.68,-162.52"></path>
<polygon fill="black" stroke="black" points="850.87,-165.81 859.25,-159.32 848.66,-159.17 850.87,-165.81"></polygon>
</g>
<!-- foo.resources -->
<g id="node25" class="node">
<title>foo.resources</title>
<polygon fill="white" stroke="black" points="811.93,-159.3 720.9,-159.3 720.9,-134.7 811.93,-134.7 811.93,-159.3"></polygon>
<text text-anchor="middle" x="766.41" y="-142.8" font-family="Times,serif" font-size="14.00">foo.resources</text>
</g>
<!-- foo.resources&#45;&gt;foo.assembly -->
<g id="edge10" class="edge">
<title>foo.resources-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M812.07,-147C821.67,-147 831.91,-147 841.82,-147"></path>
<polygon fill="black" stroke="black" points="841.99,-150.5 851.99,-147 841.99,-143.5 841.99,-150.5"></polygon>
</g>
</g>
</svg>

</center>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_mill_launcher"><a class="anchor" href="#_the_mill_launcher"></a>The Mill Launcher</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Mill launcher is a small Java application that is responsible for launching
and delegating work to the Mill daemon, a long-lived process. Each <code>./mill</code>
command spawns a new Mill launcher, but generally re-uses the same Mill daemon where
possible in order to reduce startup overhead and to allow the Mill daemon
process to warm up and provide good performance</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Mill launcher takes all the inputs of a typical command-line application -
stdin and command-line arguments - and proxies them to the long-lived Mill
daemon process.</p>
</li>
<li>
<p>It then takes the outputs from the Mill daemon - stdout, stderr,
and finally the exitcode - and proxies those back to the calling process or terminal.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this way, the Mill launcher acts and behaves for most all intents and purposes
as a normal CLI application, except it is really a thin wrapper around logic that
is actually running in the long-lived Mill daemon.</p>
</div>
<div class="paragraph">
<p>The Mill daemon sometimes is shut down and needs to be restarted, e.g. if Mill
version changed, or the user used <code>Ctrl-C</code> to interrupt the ongoing computation.
In such a scenario, the Mill launcher will automatically restart the daemon the next
time it is run, so apart from a slight performance penalty from starting a &quot;cold&quot;
Mill daemon such shutdowns and restarts should be mostly invisible to the user.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_mill_daemon"><a class="anchor" href="#_the_mill_daemon"></a>The Mill Daemon</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Mill daemon is a long-lived process that the Mill launcher spawns.
Only one Mill daemon should be running in a codebase at a time, and each daemon
takes a filelock at startup time to enforce this mutual exclusion. While multiple
launchers can connect to a single daemon, a second lock is taken when the daemon
is running a build for a particular launcher, to ensure that only one build is
happening at a time.</p>
</div>
<div class="paragraph">
<p>The Mill daemon compiles your <code>build.mill</code> and <code>package.mill</code>, spawns a
<code>URLClassLoader</code> containing the compiled classfiles, and uses that to instantiate
the various <a href="../fundamentals/modules.html" class="xref page">Modules</a> and <a href="../fundamentals/tasks.html" class="xref page">Tasks</a>
dynamically in-memory. These are then used by the <code>Evaluator</code>, which resolves,
plans, and executes the tasks specified by the given <code>runArgs</code></p>
</div>
<div class="paragraph">
<p>During execution, both standard output
and standard error are captured during evaluation and forwarded to the <code>PromptLogger</code>.
<code>PromptLogger</code> annotates the output stream with the line-prefixes, prompt, and ANSI
terminal commands necessary to generate the dynamic prompt, and then forwards both
streams multi-plexed over a single socket stream back to the Mill launcher. The launcher
then de-multiplexes the combined stream to split it back into output and error, which
are then both forwarded to the process or terminal that invoked the Mill launcher.</p>
</div>
<div class="paragraph">
<p>Lastly, when the Mill daemon completes its tasks, it writes the <code>exitCode</code> back to
the Mill launcher over the multiplexed stream. The Mill launcher terminates with this
exit code, but the Mill daemon remains alive and ready to serve to the next Mill
launcher that connects to it</p>
</div>
<div class="paragraph">
<p>For a more detailed discussion of what exactly goes into &quot;execution&quot;, see
<a href="evaluation-model.html" class="xref page">The Mill Evaluation Model</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_out_folder"><a class="anchor" href="#_the_out_folder"></a>The Out Folder</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>out/</code> directory is where most of Mill’s state lives on disk, both build-task state
such as the <code>foo/compile.json</code> metadata cache for <code>foo.compile</code>, or the <code>foo/compile.dest</code>
which stores any generated files or binaries. It also contains <code>mill-daemon/</code> folder which
is used to pass data back and forth between the launcher and daemon: the <code>runArgs</code>, <code>exitCode</code>,
etc.</p>
</div>
<div class="paragraph">
<p>Each task during evaluation reads and writes from its own designated paths in the <code>out/</code>
folder. Each task’s files are not touched by any other tasks, nor are they used in the rest
of the Mill architecture: they are solely meant to serve each task’s caching and filesystem
needs.</p>
</div>
<div class="paragraph">
<p>More documentation on what the <code>out/</code> directory contains and how to make use of it can be
found at <a href="../fundamentals/out-dir.html" class="xref page">The Output Directory</a>.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="parallelism.html">Parallelism in Mill</a></span>
  <span class="next"><a href="sandboxing.html">Mill Sandboxing</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async="async" src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async="async" src="../../../search-index.js"></script>
  
</body></html>