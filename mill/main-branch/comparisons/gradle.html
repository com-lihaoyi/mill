<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Comparing Mill vs Gradle: Programmable Builds :: The Mill Build Tool</title>
    <link rel="canonical" href="https://mill-build.org/mill/comparisons/gradle.html">
    <link rel="prev" href="maven.html">
    <link rel="next" href="performance.html">
    <meta name="generator" content="Antora 3.1.12">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1C582ZJR85"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-1C582ZJR85')</script>
<link rel="icon" href="../../../_/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <style>
  /* auto-hyphenation is super ugly */
  *{
    hyphens: manual !important;
  }

  /* Reduce font size from 17px to something reasonable */
  .doc {
   font-size: 16px !important;
  }
  .doc pre {
   font-size: 14px !important;
  }
  /* Shrink unreasonably large top bar */
  nav.navbar{
    height: 2.5rem;
  }
  body.article{
    padding-top: 2.5rem;
  }
  div.nav-container{
    top: 2.5rem;
  }
  div.toolbar{
    top: 2.5rem;
  }
  aside.nav{
    top: 2.5rem;
    height: calc(100vh - 2.5rem);
  }
  </style>
  <script>
  gtag('config', 'AW-16649289906');

  document.addEventListener('DOMContentLoaded', function() {
  const links = document.querySelectorAll('a');
    links.forEach(link => {
      if (link.textContent.trim().toLowerCase() === 'download') {
        link.addEventListener('click', function(event) {
          console.log("download link clicked")
          gtag('event', 'conversion', {'send_to': 'AW-16649289906/rsphCKfVq8QZELKBgIM-'});
        });
      }
    });
  });
  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <!-- TODO: add mill icon -->
      <a class="navbar-item" href="https://mill-build.org"><img src="../../../_/logo-white.svg" height="20" />&nbsp;The Mill Build Tool</a>
      <div class="navbar-item search">
        <input id="search-input" type="text" placeholder="Search the docs">
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill">GitHub</a>
        <a class="navbar-item" href="https://mill-build.org/blog/index.html">Blog</a>
        <a class="navbar-item" href="https://mill-build.org/api/latest/mill.html">API</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/issues">Issues</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/discussions">Discuss</a>


            <!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Documentation</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#"></a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Plugins</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
        -->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="mill" data-version="main-branch">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">

  <li class="nav-item" data-depth="0">
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../javalib/intro.html">Building Java with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/module-config.html">Java Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/dependencies.html">Java Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/testing.html">Testing Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/linting.html">Linting Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/packaging.html">Packaging Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/publishing.html">Publishing Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/build-examples.html">Java Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/web-examples.html">Java Web Project Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/spring-boot.html">Spring Boot Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/script.html">Java Single-File Scripts</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scalalib/intro.html">Building Scala with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/module-config.html">Scala Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/dependencies.html">Scala Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/testing.html">Testing Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/linting.html">Linting Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/packaging.html">Packaging Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/publishing.html">Publishing Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/build-examples.html">Scala Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/web-examples.html">Scala Web Project Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/native-examples.html">Scala Native Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/spark.html">Spark Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/script.html">Scala Single-File Scripts</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../kotlinlib/intro.html">Building Kotlin with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/module-config.html">Kotlin Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/dependencies.html">Kotlin Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/testing.html">Testing Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/linting.html">Linting Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/packaging.html">Packaging Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/publishing.html">Publishing Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/web-examples.html">Kotlin Web Project Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/script.html">Kotlin Single-File Scripts</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Why Mill?</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="maven.html">Comparing Mill vs Maven: Declarative Builds</a>
  </li>

  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="gradle.html">Comparing Mill vs Gradle: Programmable Builds</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="performance.html">Mill Build Performance</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">The Mill CLI</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/installation-ide.html">Installation &amp; IDE Setup</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/flags.html">Mill Command-Line Flags</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/builtin-commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../cli/query-syntax.html">Task Query Syntax</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../cli/build-header.html">Build Header Config</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../migrating/migrating.html">Migrating to Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migrating/auto-migrating.html">Automated Migration Tools</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill Fundamentals</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/tasks.html">Tasks</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/modules.html">Modules</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/out-dir.html">The Output Directory</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/library-deps.html">Library Dependencies in Mill</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/cross-builds.html">Cross Builds</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/bundled-libraries.html">Bundled Libraries</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/configuring-jvm-versions.html">Managing JVM Versions</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../large/large.html">Large Builds and Monorepos</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/selective-execution.html">Selective Test Execution</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/multi-file-builds.html">Multi-File Builds</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/multi-language-builds.html">Multi-Language Builds</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extending Mill</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../extending/import-mvn-plugins.html">Import Libraries and Plugins</a>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../extending/contrib-plugins.html">Contrib Plugins</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/artifactory.html">Artifactory</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/buildinfo.html">BuildInfo</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/codeartifact.html">Codeartifact</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/docker.html">Docker</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/flyway.html">Flyway</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/gitlab.html">Gitlab</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/jmh.html">JMH</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/playlib.html">Play Framework</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/proguard.html">Proguard</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/scalapblib.html">ScalaPB</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/scoverage.html">Scoverage</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/sbom.html">Software Bill of Materials (SBOM)</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/sonatypecentral.html">Sonatype Central</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/testng.html">TestNG</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/twirllib.html">Twirl</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/versionfile.html">Version file</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../extending/thirdparty-plugins.html">Third-Party Plugins</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/running-jvm-code.html">Running Dynamic JVM Code</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/writing-plugins.html">Writing Mill Plugins</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/meta-build.html">The Mill Meta-Build</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/example-typescript-support.html">Example: Typescript Support</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/example-python-support.html">Example: Python Support</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Experimental Platform Support</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Building Android Apps</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/android-initial-setup.html">Android Initial Setup</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/android-release.html">Android Release Guide</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/ide.html">Android IDE Support</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/java.html">Android Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/kotlin.html">Android Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/android-linting.html">Linting Android Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/compose-samples.html">Android Jetpack Compose</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/hilt-sample.html">Android Hilt Sample</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/android-native-example.html">Android Native Example</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../pythonlib/intro.html">Building Python with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/module-config.html">Python Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/dependencies.html">Python Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/linting.html">Linting Python Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/testing.html">Testing Python Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/publishing.html">Python Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/web-examples.html">Python Web Project Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../javascriptlib/intro.html">Building Javascript with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/dependencies.html">Typescript Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/module-config.html">Typescript Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascriptlib/testing.html">Testing Typescript Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../javascriptlib/linting.html">Linting Typescript Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../javascriptlib/publishing.html">Typescript Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../javascriptlib/build-examples.html">JavaScript Build Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../groovylib/intro.html">Building Groovy with Mill</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill In Depth</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/evaluation-model.html">The Mill Evaluation Model</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/caching.html">Caching in Mill</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/parallelism.html">Parallelism in Mill</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/process-architecture.html">The Mill Process Architecture</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/sandboxing.html">Mill Sandboxing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/design-principles.html">Mill Design Principles</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/why-scala.html">Why does Mill use Scala?</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://mill-build.org/api/latest/mill.html">Mill API Reference</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/com-lihaoyi/mill/blob/main/changelog.adoc">Changelog</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/talks-blog-posts.html">Talks &amp; Blog Posts</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Mill Documentation</span>
    <span class="version">main-branch</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../../index.html">Mill Documentation</a></div>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">main-branch</a>
        </li>
        <li class="version is-latest">
          <a href="../../index.html">1.1.0</a>
        </li>
        <li class="version">
          <a href="../../dev-1.1.0-10-fec938/index.html">dev-1.1.0-10-fec938</a>
        </li>
        <li class="version">
          <a href="../../1.0.x/index.html">1.0.6</a>
        </li>
        <li class="version">
          <a href="../../0.12.x/index.html">0.12.17</a>
        </li>
        <li class="version">
          <a href="../../0.11.x/index.html">0.11.13</a>
        </li>
        <li class="version">
          <a href="../../0.10.15/index.html">0.10.15</a>
        </li>
        <li class="version">
          <a href="../../0.9.12/index.html">0.9.12</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../blog/index.html">The Mill Build Engineering Blog</a></div>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">

<div class="toolbar" role="navigation" style="position: fixed; top: 2.5rem; height: 2rem; left: 0px;">
<button class="nav-toggle"></button>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Comparing Mill vs Gradle: Programmable Builds</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Gradle is a popular open source build tool in the Java and JVM ecosystem, second only
to Maven. Gradle&#8217;s core API is built around programmable configuration files written in
Groovy or Kotlin: this provides a lot of flexibility, but also a lot of complexity,
sparking complaints about
<a href="https://news.ycombinator.com/item?id=25801986">Gradle being complicated and hard to maintain</a>.</p>
</div>
<div class="paragraph">
<p>Mill defaults to a <a href="../javalib/intro.html#_declarative_configuration" class="xref page">declarative configuration syntax</a>,
but when you do need to extend your build with custom logic Mill&#8217;s
<a href="../javalib/intro.html#_programmable_configuration" class="xref page">programmable configuration syntax</a>
allows you to do so. Unlike Gradle, Mill builds upon the
idea of <a href="#_object_oriented_builds">object-oriented builds</a> which provides a much more familiar
programming API with much better IDE support than Gradle or other build tools have been able to do.</p>
</div>
<div class="paragraph">
<p>This article will discuss some of the problems with Gradle, and how Mill is able to improve upon
the Gradle&#8217;s design to provide programmatic builds without the complexity or confusion.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extending_gradle"><a class="anchor" href="#_extending_gradle"></a>Extending Gradle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most real projects require some kind of ad-hoc build customizations: you may be pre-processing static
assets for web deployment, embedding build metadata for production debugging, or generating
reports for security scanning. For example, consider the following requirement:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Count the lines of code in this project and include this as a resource for use at runtime
as a <code>line-count.txt</code> file</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>This is a bit of an artificial requirement, but it is representative of the many things that
real projects need to do in their build. Doing this in Gradle looks something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">tasks.register("generateLineCount") {
    val sourceDirs = listOf("src/main/java")
    val outputDir = layout.buildDirectory.dir("generated-resources")
    val outputFile = outputDir.get().file("line-count.txt")

    inputs.files(fileTree("src/main"))
    outputs.file(outputFile)

    doLast {
        var totalLines = 0

        sourceDirs.map(::file).filter { it.exists() }.forEach { srcDir -&gt;
            srcDir.walkTopDown()
                .filter { it.isFile &amp;&amp; it.extension in listOf("java") }
                .forEach { file -&gt;
                    totalLines += file.readLines().size
                }
        }

        outputFile.asFile.writeText(totalLines.toString())
        println("Generated line-count.txt with $totalLines lines")
    }
}

tasks.named("processResources") {
    dependsOn("generateLineCount")
    from(layout.buildDirectory.dir("generated-resources"))
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a very basic build customization, but you may already notice some issues.</p>
</div>
<div class="sect2">
<h3 id="_gradle_build_plugin_apis"><a class="anchor" href="#_gradle_build_plugin_apis"></a>Gradle Build Plugin APIs</h3>
<div class="paragraph">
<p>Firstly, the Gradle "config as code" may be using Kotlin, doesn&#8217;t <em>actually</em>
look like Kotlin code you are writing day-to-day. In particular, there&#8217;s a non-trivial
"build plugin API" you need to learn to write this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>task.named</code> &amp; <code>task.register</code></p>
</li>
<li>
<p><code>dependsOn</code></p>
</li>
<li>
<p><code>inputs.files</code> &amp; <code>outputs.file</code></p>
</li>
<li>
<p><code>doLast</code> (or should we use <code>doFirst</code>?)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Furthermore, the stringly-typed values add to the potential for error:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"generateLineCount"</code></p>
</li>
<li>
<p><code>"generated-resources"</code></p>
</li>
<li>
<p><code>"processResources"</code></p>
</li>
<li>
<p><code>"src/main/java"</code></p>
</li>
<li>
<p><code>"src/main"</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In fact, there is even a bug in the above Gradle config that will cause the build to
be non-deterministically slower sometimes, but not other times.
Can you spot it? ChatGPT couldn&#8217;t! (Click the footnote to see the answer <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>)</p>
</div>
<div class="paragraph">
<p>The difficulty of catching these issues e.g. during code review
illustrates how difficult it is to write "correct" Gradle config: if even the simplest
hello-world customization results in impossible-to-find heisenbugs bugs slowing things down,
how many bugs will there be in any more-complex real-world customization or plugin? It&#8217;s
no wonder then than real-world builds using Gradle or other tools often end up being
inexplicably slow and flaky.</p>
</div>
<div class="paragraph">
<p>The end result is that although you may know Kotlin as a compiled language,
you will likely be unfamiliar with Gradle&#8217;s flavor of Kotlin. Counting the lines
of code in a folder is something any Kotlin programmer can do with their eyes closed,
but properly wiring it into a Gradle build can be a tricky and error-prone affair.
Lastly, although the JVM platform is famous for having excellent IDE support, when
working with Gradle your IDE will likely not be as useful as you would like. We&#8217;ll
dive into what that means in the next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_gradle_ide_support"><a class="anchor" href="#_gradle_ide_support"></a>Gradle IDE Support</h3>
<div class="paragraph">
<p>While JVM application codebases universally have excellent IDE support, build tools are usually
not nearly as well-supported. For example, consider the snippet below where we are using Gradle to
configure the javac compiler options. In the example below, we can see that IntelliJ is able to
identify that <code>compileArgs</code> exists and has the type <code>List&lt;String&gt;</code>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/comparisons/IntellijMockitoGradleCompileOptions.png" alt="IntellijMockitoGradleCompileOptions"></span></p>
</div>
<div class="paragraph">
<p>But if you try to jump to definition or find out anything else about it you hit a wall.
The IDE is able to bring you to the <em>getter</em> and <em>setter</em>, but it isn&#8217;t able to tell you
<em>where the value is coming from</em>, <em>how it is computed</em>, or <em>where it is used</em>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/comparisons/IntellijMockitoGradleCompileOptions2.png" alt="IntellijMockitoGradleCompileOptions2"></span></p>
</div>
<div class="paragraph">
<p>Often working with build configurations feels like constantly hitting a wall: if you
don&#8217;t have <code>options.compilerArgs</code> memorized in your head, there is literally nothing
you can do in your IDE to figure out what it is or what it is used for. That leaves
you Googling for answers or digging through stackoverflow, which can be a frustrating
experience. Even modern AI assistants like ChatGPT or Gemini often hallucinate and get
things wrong.</p>
</div>
<div class="paragraph">
<p>Notably, this is in stark contrast to the experience working with typical Java/Scala/Kotlin
code in an IDE like IntelliJ, where your IDE is amazingly helpful at tracing through
method calls and class hierarchies. Even without documentation, stackoverflow,
or AI coding assistants, in typical JVM projects you are easily able to trace through
the code and figure out exactly how it works and what it&#8217;s doing.</p>
</div>
<div class="paragraph">
<p>Although this example is using Gradle&#8217;s un-typed Groovy syntax, the experience
using Gradle&#8217;s typed Kotlin syntax is largely the same. The problem isn&#8217;t unique
to Gradle, isn&#8217;t unique to Groovy or Kotlin, and isn&#8217;t unique to IntelliJ. The
problem is the style of code that most build tools require they be configured with.</p>
</div>
</div>
<div class="sect2">
<h3 id="_global_mutable_variables"><a class="anchor" href="#_global_mutable_variables"></a>Global Mutable Variables</h3>
<div class="paragraph">
<p>The fundamental problem with build tools like Gradle is that the entire configuration system
is based around <em>global mutable variables</em>. We can see a hint of that in the IDE screenshot
above, where jumping to <code>compilerArgs</code> brings us to a <em>getter</em> and <em>setter</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public List&lt;String&gt; getCompilerArgs() {
    return this.compilerArgs;
}

public void setCompilerArgs(List&lt;String&gt; compilerArgs) {
    this.compilerArgs = compilerArgs;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Groovy or Kotlin code you write does not actually <em>perform the build</em>, but instead is
just setting up some global mutable data structure that is used to configure the <em>real</em>
build engine that runs <em>later</em>. IDEs are generally not good at understanding logic around
global mutable variables, and just because the global mutable variable is wrapped in a
getter and setter does not make it any less global or any less mutable!</p>
</div>
<div class="paragraph">
<p>This issue with global mutable variables is at the core of why IDEs have trouble with
build tools. It doesn&#8217;t matter what IDE you are using, and it doesn&#8217;t matter what language
the build tool is configured with. If the build tool is build on top of a big list of
global mutable variables - as is the case for Gradle and most other programmable build tools -
then inevitably the user is going to have a poor IDE experience trying to navigate it.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extending_mill"><a class="anchor" href="#_extending_mill"></a>Extending Mill</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Although Mill also has a programmable build definition syntax, it takes a very different
approach to Gradle, with a very different user and IDE experience:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>While most build tools require users to write plugins against a custom plugin API, Mill allows
you to customize your build using object-oriented methods, classes, and overrides</p>
</li>
<li>
<p>While most build tools are configured using global mutable variables, Mill builds are
built on top of classes and methods, providing an API much more familiar to users and
IDEs</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We&#8217;ll discuss these two ideas more in the examples below.</p>
</div>
<div class="sect2">
<h3 id="_simple_custom_tasks"><a class="anchor" href="#_simple_custom_tasks"></a>Simple Custom Tasks</h3>
<div class="paragraph">
<p>Consider the following minimal Mill build with a Java module <code>foo</code>. It contains no custom
configuration, and so inherits all the defaults from <code>mill.javalib.JavaModule</code>: default
source folder layout, default assembly configuration, default compiler flags, and so on.
This <em>convention over configuration</em> is a philosophy that Mill inherited from Maven and
other JVM build tools:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends JavaModule {
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; mill compile
Compiling 1 Java source...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mill "modules" are just vanilla JVM objects inheriting from a <code>*Module</code> class, and Mill
"tasks" are just vanilla JVM methods that return a <code>Task&lt;T&gt;</code> or <code>Task[T]</code> value.
So if we want to add a custom task to this example, perhaps <em>"counting the lines of
code and writing it to a resource file"</em> as we did above with Gradle, this is as
simple as defining a method. An implementation of this is shown below</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends JavaModule {
  /** Total number of lines in module source files */
  def lineCount = Task {
    allSourceFiles().map(f =&gt; os.read.lines(f.path).size).sum
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some notes on this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mill&#8217;s programmable <code>build.mill</code> files use Scala syntax, so a method is defined
using <code>def</code> e.g. <code>def lineCount = Task { &#8230;&#8203; }</code>.</p>
</li>
<li>
<p>The body of <code>Task</code> performs the action we want, and can depend on other tasks
such as <code>allSourceFiles()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once we define a new task, we can immediately begin using it in our build.
<code>lineCount</code> is not used by any existing <code>JavaModule</code> tasks, but we can still
show its value via the Mill command line to evaluate it, or inspect its metadata:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; ./mill show foo.lineCount
17

&gt; ./mill inspect foo.lineCount
foo.lineCount(build.mill:4)
    Total number of lines in module source files

Inputs:
    foo.allSourceFiles</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that as <code>lineCount</code> is a <code>Task</code>, we get automatic caching, invalidation, and
parallelization: these are things that every <code>Task</code> gets for free, without the
developer needing to do anything. And although we wrote the <code>lineCount</code> logic in the main
<code>build.mill</code> file for this example, if it grows complex enough to get messy it is
easy to move it to your own <a href="../extending/writing-plugins.html" class="xref page">custom plugins</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_overriding_tasks"><a class="anchor" href="#_overriding_tasks"></a>Overriding Tasks</h3>
<div class="paragraph">
<p>We have defined our custom <code>lineCount</code> task, but we still need to write it to a JVM
resource file so the value can be used at runtime. In Mill everything is a <code>Task</code> and
every task is a method, and so JVM resources defined by  <code>def resources</code> are no different.
And like any other method, the way we customize it is by <code>override</code>ing it, as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends JavaModule {
  /** Total number of lines in module source files */
  def lineCount = Task {
    allSourceFiles().map(f =&gt; os.read.lines(f.path).size).sum
  }

  /** Generate resources using lineCount of sources */
  override def resources = Task {
    os.write(Task.dest / "line-count.txt", "" + lineCount())
    super.resources() ++ Seq(PathRef(Task.dest))
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some notes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Our <code>def resources</code> overrides the existing <code>resources</code> method inherited from <code>JavaModule</code>,
the downstream tasks automatically now use the new override instead, similar to any Java
method overrides.</p>
</li>
<li>
<p>We append the new resource entry to its prior value <code>super.resources()</code> that references
the <code>resources/</code> folder on disk, so the resource folder on disk remains available</p>
</li>
<li>
<p><code>Task.dest</code> is a path in the <code>out/</code> folder unique to each <code>Task</code>, so it can write files
there without worrying about colliding with files written by other tasks</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This results in a small addition to the Mill build graph as shown below, with our
two custom tasks <code>def lintCount</code> and <code>def resources</code> spliced in among existing Mill tasks:</p>
</div>
<div class="paragraph">
<center>
<svg width="418px" height="76px"
 viewBox="0.00 0.00 418.28 75.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 71.8)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-71.8 414.28,-71.8 414.28,4 -4,4"/>
<!-- allSourceFiles -->
<g id="node1" class="node">
<title>allSourceFiles</title>
<polygon fill="white" stroke="white" points="96.14,-67.7 -0.05,-67.7 -0.05,-43.1 96.14,-43.1 96.14,-67.7"/>
<text text-anchor="middle" x="48.05" y="-51.2" font-family="Times,serif" font-size="14.00">allSourceFiles</text>
</g>
<!-- lineCount -->
<g id="node2" class="node">
<title>lineCount</title>
<polygon fill="white" stroke="black" points="219.15,-67.7 147.7,-67.7 147.7,-43.1 219.15,-43.1 219.15,-67.7"/>
<text text-anchor="middle" x="183.43" y="-51.2" font-family="Times,serif" font-size="14.00">lineCount</text>
</g>
<!-- allSourceFiles&#45;&gt;lineCount -->
<g id="edge1" class="edge">
<title>allSourceFiles&#45;&gt;lineCount</title>
<path fill="none" stroke="black" d="M96.45,-55.4C109.8,-55.4 124.28,-55.4 137.49,-55.4"/>
<polygon fill="black" stroke="black" points="137.76,-58.9 147.76,-55.4 137.76,-51.9 137.76,-58.9"/>
</g>
<!-- resources -->
<g id="node3" class="node">
<title>resources</title>
<polygon fill="white" stroke="black" points="339.55,-45.7 270.84,-45.7 270.84,-21.1 339.55,-21.1 339.55,-45.7"/>
<text text-anchor="middle" x="305.19" y="-29.2" font-family="Times,serif" font-size="14.00">resources</text>
</g>
<!-- lineCount&#45;&gt;resources -->
<g id="edge2" class="edge">
<title>lineCount&#45;&gt;resources</title>
<path fill="none" stroke="black" d="M219.07,-49.04C231.95,-46.67 246.74,-43.95 260.34,-41.46"/>
<polygon fill="black" stroke="black" points="261.25,-44.85 270.46,-39.6 259.99,-37.96 261.25,-44.85"/>
</g>
<!-- run -->
<g id="node4" class="node">
<title>run</title>
<polygon fill="white" stroke="white" points="410.11,-45.7 375.79,-45.7 375.79,-21.1 410.11,-21.1 410.11,-45.7"/>
<text text-anchor="middle" x="392.95" y="-29.2" font-family="Times,serif" font-size="14.00">run</text>
</g>
<!-- resources&#45;&gt;run -->
<g id="edge3" class="edge">
<title>resources&#45;&gt;run</title>
<path fill="none" stroke="black" d="M339.59,-33.4C348.23,-33.4 357.4,-33.4 365.61,-33.4"/>
<polygon fill="black" stroke="black" points="365.74,-36.9 375.74,-33.4 365.74,-29.9 365.74,-36.9"/>
</g>
<!-- resources.super -->
<g id="node5" class="node">
<title>resources.super</title>
<polygon fill="white" stroke="white" points="234.6,-24.7 132.25,-24.7 132.25,-0.1 234.6,-0.1 234.6,-24.7"/>
<text text-anchor="middle" x="183.43" y="-8.2" font-family="Times,serif" font-size="14.00">resources.super</text>
</g>
<!-- resources.super&#45;&gt;resources -->
<g id="edge4" class="edge">
<title>resources.super&#45;&gt;resources</title>
<path fill="none" stroke="black" d="M234.87,-21.25C243.51,-22.76 252.41,-24.32 260.84,-25.8"/>
<polygon fill="black" stroke="black" points="260.38,-29.27 270.84,-27.55 261.59,-22.38 260.38,-29.27"/>
</g>
</g>
</svg>

</center>
</div>
<div class="paragraph">
<p>Now if we call <code>mill foo.run</code>, it will automatically pick up the new
<code>resources</code> including the generated <code>line-count.txt</code> file and make it available to
the application code to use e.g. to print it out at runtime:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; mill foo.run
Line Count: 18</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nobody actually wants to count the lines of code in their program and write it in a resource file,
but this example demonstrates how easy it is to extend your Mill module with custom logic in its
own little pipeline. Where Gradle&#8217;s programmatic configuration is built on top of global mutable
variables, Mill is instead built on <code>class</code>es,  <code>extends</code>, method <code>def</code>s and calls, and <code>overrides</code>.
These behave exactly as you would expect any object-oriented program to work, so you already
know how Mill behaves even if you&#8217;ve never touched a Mill build before, and will very likely
get your Mill customizations right the first time without issue.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mill_ide_support"><a class="anchor" href="#_mill_ide_support"></a>Mill IDE Support</h3>
<div class="paragraph">
<p>One area that Mill does better than Gradle is in providing a seamless IDE
experience. Working with Mill builds in IntelliJ or VSCode, you get the full power of
your IDE to autocomplete, peek at docs, browse signatures, and otherwise navigate
around your build system. For example, when writing our <code>override def resources</code> above,
we get IDE assistance in auto-completing the <code>def</code> along with pop-up documentation about
what each method does so we can decide which one we want to override:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/comparisons/IntellijOverrideAutocomplete.png" alt="IntellijOverrideAutocomplete"></span></p>
</div>
<div class="paragraph">
<p>The big difference with Mill is that rather than building on global mutable variables, Mill is
built on top of <em>classes</em> and <em>methods</em> like any other JVM codebase. While IDEs struggle
with global variables, they are very good at navigating classes and methods!
For example, the equivalent to the Gradle <code>compilerArgs</code> setting we looked at earlier
is Mill&#8217;s <code>def javacOptions</code> method. But rather than being a global mutable variable
that gets set, <code>def javacOptions</code> is a method override, something that IntelliJ is extremely
capable and navigating, e.g. it can show you where the method you are overriding was defined,
where</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/comparisons/IntellijMockitoMillJavacOptionsParents.png" alt="IntellijMockitoMillJavacOptionsParents">
</div>
</div>
<div class="paragraph">
<p>IntelliJ can jump to any of the overridden <code>def</code>s quickly and precisely, so you can
see what value was there before we overrode it:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/comparisons/IntellijMockitoMillJavacOptionsDef.png" alt="IntellijMockitoMillJavacOptionsDef">
</div>
</div>
<div class="paragraph">
<p>And because tasks in Mill are just normal methods, IntelliJ is
able to <em>find usages</em>, showing you where the task is used. Below, we can see the method
call in the <code>def compile</code> task, which uses <code>javacOptions()</code> along with a number of other tasks:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/comparisons/IntellijMockitoMillCompile.png" alt="IntellijMockitoMillCompile">
</div>
</div>
<div class="paragraph">
<p>From there, if you are curious about any of the other tasks used alongside <code>javacOptions</code>, it&#8217;s
easy for you to pull up <em>their</em> documentation, jump to <em>their</em>
definition, or find <em>their</em> usages. For example we can pull up the docs of
<code>compileClasspath()</code> below, jump to <em>its</em> implementation, and continue
interactively exploring your build logic from there:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/comparisons/IntellijMockitoMillCompileClasspath.png" alt="IntellijMockitoMillCompileClasspath">
</div>
</div>
<div class="paragraph">
<p>Unlike most other build tools, Mill build pipelines can be explored interactively in your
IDE. If you do not know what something does, it&#8217;s documentation, definition, or usages is always
one click away in IntelliJ or VSCode. This isn&#8217;t a new experience for Java developers, as it
is what you experience every day working in your application code! But Mill brings that same
polished experience to your build system - traditionally something that has been opaque
and hard to understand - and does so in a way that no other build tool does. And this is
possible because Mill builds avoid the global mutable variables common in other build
tools, in favor of configuring your build via classes and methods that are familiar to
both users and to IDEs.</p>
</div>
<div class="paragraph">
<p>Mill&#8217;s programmable configurable has a lot of improvements over programmable build tools
like Gradle, but it begs the question: why can&#8217;t other build tools improve their ease of
extensibility or IDE support as well? It turns out that other tools <em>have</em> been working
on improving these things - for decades - but Mill does have some secret sauce that
makes providing this experience in Mill much easier than providing it in any other build tool.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_templated_graph_computations"><a class="anchor" href="#_templated_graph_computations"></a>Templated Graph Computations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All build tools are complex, because the requirements of building any non-trivial real-world
project are complex. One big source of build tool complexity is that users need some way to
define templated graph-computations when setting up their build pipelines.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Graph</strong> as the data structure necessary to order and parallelize steps in your build:
what build step needs to run first, what runs later, what can run in parallel and what cannot</p>
</li>
<li>
<p><strong>Computations</strong> as <code>.class</code> files and <code>.jar</code> files don&#8217;t make themselves, and someone
in Java or Groovy or Kotlin or Bash needs to specify how each step&#8217;s outputs are made</p>
</li>
<li>
<p><strong>Templated</strong> as different modules in a build are often very similar, with similar pipelines,
but will also have their differences and idiosyncrasies unique to each module</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, even a simplified three-module Java build pipeline may look like this, with
each module having its own <code>sources</code> and <code>compile</code> and <code>assembly</code> tasks that form a graph,
and each module looking similar but not quite the same (e.g. <code>foo.classPath</code> has no upstream
module, but <code>bar.classPath</code> does)</p>
</div>
<div class="paragraph">
<center>
<svg width="767px" height="364px"
 viewBox="0.00 0.00 767.02 364.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 360.0)">
<title>G</title>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="8,-240 8,-348 484.87,-348 484.87,-240 8,-240"/>
<text text-anchor="middle" x="246.43" y="-331.4" font-family="Times,serif" font-size="14.00">foo</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_2</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="250.41,-8 250.41,-116 751.02,-116 751.02,-8 250.41,-8"/>
<text text-anchor="middle" x="500.71" y="-99.4" font-family="Times,serif" font-size="14.00">qux</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_1</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="126.09,-124 126.09,-232 617.74,-232 617.74,-124 126.09,-124"/>
<text text-anchor="middle" x="371.92" y="-215.4" font-family="Times,serif" font-size="14.00">bar</text>
</g>
<!-- foo.sources -->
<g id="node1" class="node">
<title>foo.sources</title>
<polygon fill="white" stroke="black" points="96.21,-272.3 15.93,-272.3 15.93,-247.7 96.21,-247.7 96.21,-272.3"/>
<text text-anchor="middle" x="56.07" y="-255.8" font-family="Times,serif" font-size="14.00">foo.sources</text>
</g>
<!-- foo.compile -->
<g id="node2" class="node">
<title>foo.compile</title>
<polygon fill="white" stroke="black" points="215.53,-272.3 132.01,-272.3 132.01,-247.7 215.53,-247.7 215.53,-272.3"/>
<text text-anchor="middle" x="173.77" y="-255.8" font-family="Times,serif" font-size="14.00">foo.compile</text>
</g>
<!-- foo.sources&#45;&gt;foo.compile -->
<g id="edge1" class="edge">
<title>foo.sources&#45;&gt;foo.compile</title>
<path fill="none" stroke="black" d="M96.24,-260C104.53,-260 113.4,-260 122.05,-260"/>
<polygon fill="black" stroke="black" points="122.06,-263.5 132.06,-260 122.06,-256.5 122.06,-263.5"/>
</g>
<!-- foo.classPath -->
<g id="node5" class="node">
<title>foo.classPath</title>
<polygon fill="white" stroke="black" points="344.9,-272.3 254.39,-272.3 254.39,-247.7 344.9,-247.7 344.9,-272.3"/>
<text text-anchor="middle" x="299.64" y="-255.8" font-family="Times,serif" font-size="14.00">foo.classPath</text>
</g>
<!-- foo.compile&#45;&gt;foo.classPath -->
<g id="edge2" class="edge">
<title>foo.compile&#45;&gt;foo.classPath</title>
<path fill="none" stroke="black" d="M215.67,-260C224.78,-260 234.58,-260 244.14,-260"/>
<polygon fill="black" stroke="black" points="244.37,-263.5 254.37,-260 244.37,-256.5 244.37,-263.5"/>
</g>
<!-- foo.mainClass -->
<g id="node3" class="node">
<title>foo.mainClass</title>
<polygon fill="white" stroke="black" points="348.13,-315.3 251.16,-315.3 251.16,-290.7 348.13,-290.7 348.13,-315.3"/>
<text text-anchor="middle" x="299.64" y="-298.8" font-family="Times,serif" font-size="14.00">foo.mainClass</text>
</g>
<!-- foo.assembly -->
<g id="node4" class="node">
<title>foo.assembly</title>
<polygon fill="white" stroke="black" points="477,-293.3 386.48,-293.3 386.48,-268.7 477,-268.7 477,-293.3"/>
<text text-anchor="middle" x="431.74" y="-276.8" font-family="Times,serif" font-size="14.00">foo.assembly</text>
</g>
<!-- foo.mainClass&#45;&gt;foo.assembly -->
<g id="edge4" class="edge">
<title>foo.mainClass&#45;&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M347.98,-295C357.16,-293.44 366.84,-291.81 376.23,-290.22"/>
<polygon fill="black" stroke="black" points="376.98,-293.64 386.26,-288.52 375.81,-286.74 376.98,-293.64"/>
</g>
<!-- foo.classPath&#45;&gt;foo.assembly -->
<g id="edge3" class="edge">
<title>foo.classPath&#45;&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M345.05,-267.17C355.2,-268.81 366.1,-270.57 376.61,-272.26"/>
<polygon fill="black" stroke="black" points="376.1,-275.73 386.53,-273.86 377.22,-268.82 376.1,-275.73"/>
</g>
<!-- bar.compile -->
<g id="node7" class="node">
<title>bar.compile</title>
<polygon fill="white" stroke="black" points="341.12,-156.3 258.17,-156.3 258.17,-131.7 341.12,-131.7 341.12,-156.3"/>
<text text-anchor="middle" x="299.64" y="-139.8" font-family="Times,serif" font-size="14.00">bar.compile</text>
</g>
<!-- foo.classPath&#45;&gt;bar.compile -->
<g id="edge5" class="edge">
<title>foo.classPath&#45;&gt;bar.compile</title>
<path fill="none" stroke="black" d="M299.64,-247.49C299.64,-220.65 299.64,-193.81 299.64,-166.97"/>
<polygon fill="black" stroke="black" points="303.14,-166.69 299.64,-156.69 296.14,-166.69 303.14,-166.69"/>
</g>
<!-- bar.classPath -->
<g id="node10" class="node">
<title>bar.classPath</title>
<polygon fill="white" stroke="black" points="476.71,-156.3 386.77,-156.3 386.77,-131.7 476.71,-131.7 476.71,-156.3"/>
<text text-anchor="middle" x="431.74" y="-139.8" font-family="Times,serif" font-size="14.00">bar.classPath</text>
</g>
<!-- foo.classPath&#45;&gt;bar.classPath -->
<g id="edge6" class="edge">
<title>foo.classPath&#45;&gt;bar.classPath</title>
<path fill="none" stroke="black" d="M331.99,-247.6C337.72,-244.39 343.32,-240.54 347.89,-236 372.69,-211.32 358.71,-190.29 383.89,-166 385.34,-164.6 386.91,-163.27 388.54,-162.02"/>
<polygon fill="black" stroke="black" points="390.76,-164.75 397.23,-156.36 386.94,-158.88 390.76,-164.75"/>
</g>
<!-- bar.sources -->
<g id="node6" class="node">
<title>bar.sources</title>
<polygon fill="white" stroke="black" points="213.63,-156.3 133.92,-156.3 133.92,-131.7 213.63,-131.7 213.63,-156.3"/>
<text text-anchor="middle" x="173.77" y="-139.8" font-family="Times,serif" font-size="14.00">bar.sources</text>
</g>
<!-- bar.sources&#45;&gt;bar.compile -->
<g id="edge8" class="edge">
<title>bar.sources&#45;&gt;bar.compile</title>
<path fill="none" stroke="black" d="M213.63,-144C224.49,-144 236.46,-144 247.9,-144"/>
<polygon fill="black" stroke="black" points="248.22,-147.5 258.22,-144 248.22,-140.5 248.22,-147.5"/>
</g>
<!-- bar.compile&#45;&gt;bar.classPath -->
<g id="edge9" class="edge">
<title>bar.compile&#45;&gt;bar.classPath</title>
<path fill="none" stroke="black" d="M341.09,-144C352.29,-144 364.62,-144 376.46,-144"/>
<polygon fill="black" stroke="black" points="376.7,-147.5 386.7,-144 376.7,-140.5 376.7,-147.5"/>
</g>
<!-- bar.mainClass -->
<g id="node8" class="node">
<title>bar.mainClass</title>
<polygon fill="white" stroke="black" points="479.44,-199.3 384.04,-199.3 384.04,-174.7 479.44,-174.7 479.44,-199.3"/>
<text text-anchor="middle" x="431.74" y="-182.8" font-family="Times,serif" font-size="14.00">bar.mainClass</text>
</g>
<!-- bar.assembly -->
<g id="node9" class="node">
<title>bar.assembly</title>
<polygon fill="white" stroke="black" points="609.98,-177.3 520.03,-177.3 520.03,-152.7 609.98,-152.7 609.98,-177.3"/>
<text text-anchor="middle" x="565" y="-160.8" font-family="Times,serif" font-size="14.00">bar.assembly</text>
</g>
<!-- bar.mainClass&#45;&gt;bar.assembly -->
<g id="edge7" class="edge">
<title>bar.mainClass&#45;&gt;bar.assembly</title>
<path fill="none" stroke="black" d="M479.76,-179.12C489.58,-177.47 500.01,-175.73 510.06,-174.04"/>
<polygon fill="black" stroke="black" points="510.66,-177.49 519.94,-172.38 509.5,-170.59 510.66,-177.49"/>
</g>
<!-- bar.classPath&#45;&gt;bar.assembly -->
<g id="edge10" class="edge">
<title>bar.classPath&#45;&gt;bar.assembly</title>
<path fill="none" stroke="black" d="M476.81,-151.05C487.42,-152.75 498.87,-154.58 509.88,-156.34"/>
<polygon fill="black" stroke="black" points="509.4,-159.81 519.82,-157.93 510.5,-152.9 509.4,-159.81"/>
</g>
<!-- qux.compile -->
<g id="node12" class="node">
<title>qux.compile</title>
<polygon fill="white" stroke="black" points="474.34,-83.3 389.14,-83.3 389.14,-58.7 474.34,-58.7 474.34,-83.3"/>
<text text-anchor="middle" x="431.74" y="-66.8" font-family="Times,serif" font-size="14.00">qux.compile</text>
</g>
<!-- bar.classPath&#45;&gt;qux.compile -->
<g id="edge11" class="edge">
<title>bar.classPath&#45;&gt;qux.compile</title>
<path fill="none" stroke="black" d="M431.74,-131.25C431.74,-118.7 431.74,-106.16 431.74,-93.61"/>
<polygon fill="black" stroke="black" points="435.24,-93.55 431.74,-83.55 428.24,-93.55 435.24,-93.55"/>
</g>
<!-- qux.classPath -->
<g id="node15" class="node">
<title>qux.classPath</title>
<polygon fill="white" stroke="black" points="611.1,-83.3 518.91,-83.3 518.91,-58.7 611.1,-58.7 611.1,-83.3"/>
<text text-anchor="middle" x="565" y="-66.8" font-family="Times,serif" font-size="14.00">qux.classPath</text>
</g>
<!-- bar.classPath&#45;&gt;qux.classPath -->
<g id="edge12" class="edge">
<title>bar.classPath&#45;&gt;qux.classPath</title>
<path fill="none" stroke="black" d="M461.19,-131.67C468.96,-128.09 477.32,-124.05 484.87,-120 502.55,-110.5 521.71,-98.68 536.74,-89.03"/>
<polygon fill="black" stroke="black" points="539.03,-91.72 545.52,-83.35 535.22,-85.85 539.03,-91.72"/>
</g>
<!-- qux.sources -->
<g id="node11" class="node">
<title>qux.sources</title>
<polygon fill="white" stroke="black" points="341.13,-83.3 258.16,-83.3 258.16,-58.7 341.13,-58.7 341.13,-83.3"/>
<text text-anchor="middle" x="299.64" y="-66.8" font-family="Times,serif" font-size="14.00">qux.sources</text>
</g>
<!-- qux.sources&#45;&gt;qux.compile -->
<g id="edge14" class="edge">
<title>qux.sources&#45;&gt;qux.compile</title>
<path fill="none" stroke="black" d="M341.09,-71C352.98,-71 366.16,-71 378.66,-71"/>
<polygon fill="black" stroke="black" points="378.97,-74.5 388.97,-71 378.97,-67.5 378.97,-74.5"/>
</g>
<!-- qux.compile&#45;&gt;qux.classPath -->
<g id="edge15" class="edge">
<title>qux.compile&#45;&gt;qux.classPath</title>
<path fill="none" stroke="black" d="M474.63,-71C485.43,-71 497.22,-71 508.59,-71"/>
<polygon fill="black" stroke="black" points="508.88,-74.5 518.88,-71 508.88,-67.5 508.88,-74.5"/>
</g>
<!-- qux.mainClass -->
<g id="node13" class="node">
<title>qux.mainClass</title>
<polygon fill="white" stroke="black" points="614.33,-40.3 515.68,-40.3 515.68,-15.7 614.33,-15.7 614.33,-40.3"/>
<text text-anchor="middle" x="565" y="-23.8" font-family="Times,serif" font-size="14.00">qux.mainClass</text>
</g>
<!-- qux.assembly -->
<g id="node14" class="node">
<title>qux.assembly</title>
<polygon fill="white" stroke="black" points="742.82,-61.3 650.62,-61.3 650.62,-36.7 742.82,-36.7 742.82,-61.3"/>
<text text-anchor="middle" x="696.72" y="-44.8" font-family="Times,serif" font-size="14.00">qux.assembly</text>
</g>
<!-- qux.mainClass&#45;&gt;qux.assembly -->
<g id="edge13" class="edge">
<title>qux.mainClass&#45;&gt;qux.assembly</title>
<path fill="none" stroke="black" d="M614.67,-35.88C623.04,-37.23 631.8,-38.65 640.33,-40.03"/>
<polygon fill="black" stroke="black" points="639.78,-43.49 650.21,-41.63 640.89,-36.58 639.78,-43.49"/>
</g>
<!-- qux.classPath&#45;&gt;qux.assembly -->
<g id="edge16" class="edge">
<title>qux.classPath&#45;&gt;qux.assembly</title>
<path fill="none" stroke="black" d="M611.37,-63.31C620.81,-61.71 630.85,-60 640.59,-58.35"/>
<polygon fill="black" stroke="black" points="641.32,-61.78 650.59,-56.65 640.15,-54.87 641.32,-61.78"/>
</g>
</g>
</svg>

</center>
</div>
<div class="paragraph">
<p>Most build tools provide ad-hoc config formats (Maven&#8217;s XML) or programmable builder
APIs (e.g. Gradle&#8217;s Groovy/Kotlin) to satisfy this need.
But fundamentally, defining an API for templated graph-computations is
non-trivial, so it is not surprising the APIs and to do so can get complicated.</p>
</div>
<div class="paragraph">
<p>Although the need to define templated graph computations is universal, Mill has one
unique insight in how it can be done more easily. It turns out that everyone has
a standard way they&#8217;ve been writing templated graph computations for decades,
they just called it <em>Object-Oriented Programming</em></p>
</div>
<div class="sect2">
<h3 id="_object_oriented_builds"><a class="anchor" href="#_object_oriented_builds"></a>Object-Oriented Builds</h3>
<div class="paragraph">
<p>Mill has the same requirement of defining templated graph-computations, but
rather than inventing a bespoke programming, configuration and plugin model to do so, Mill
builds upon what everyone already knows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Methods</strong> provide a way of defining discrete build steps that perform
some necessary action in your build</p>
</li>
<li>
<p>The <strong>Call Graph</strong> between methods provides the build graph, where which method call
which other methods defines the incoming edges of that node in the graph</p>
</li>
<li>
<p><strong>Classes</strong> provide the templating, where you can define a set of methods calling each
other, and instantiate those call graphs more than once in different parts of your build</p>
</li>
<li>
<p><strong>Overrides</strong> and <strong>Subclasses</strong> provide customization: when a particular instance or
sub-class needs a different implementation of one-or-more build steps, you can
override the respective methods to customize the build call graph to your liking</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Thus, when you see a Mill build configured as such, with an <code>object</code> extending a <code>class</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends JavaModule {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is not some special syntax, but is literally defining an object named <code>foo</code>
inheriting from the class <code>JavaModule</code>. Like any other inheritance, this picks up
the methods and method call graph of <code>JavaModule</code> (slightly simplified below)</p>
</div>
<div class="paragraph">
<center>
<svg width="493px" height="132px"
 viewBox="0.00 0.00 492.68 132.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 128.0)">
<title>G</title>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="8,-8 8,-116 476.68,-116 476.68,-8 8,-8"/>
<text text-anchor="middle" x="242.34" y="-99.4" font-family="Times,serif" font-size="14.00">foo</text>
</g>
<!-- foo.sources -->
<g id="node1" class="node">
<title>foo.sources</title>
<polygon fill="white" stroke="black" points="96.21,-83.3 15.93,-83.3 15.93,-58.7 96.21,-58.7 96.21,-83.3"/>
<text text-anchor="middle" x="56.07" y="-66.8" font-family="Times,serif" font-size="14.00">foo.sources</text>
</g>
<!-- foo.compile -->
<g id="node2" class="node">
<title>foo.compile</title>
<polygon fill="white" stroke="black" points="215.53,-83.3 132.01,-83.3 132.01,-58.7 215.53,-58.7 215.53,-83.3"/>
<text text-anchor="middle" x="173.77" y="-66.8" font-family="Times,serif" font-size="14.00">foo.compile</text>
</g>
<!-- foo.sources&#45;&gt;foo.compile -->
<g id="edge1" class="edge">
<title>foo.sources&#45;&gt;foo.compile</title>
<path fill="none" stroke="black" d="M96.24,-71C104.53,-71 113.4,-71 122.05,-71"/>
<polygon fill="black" stroke="black" points="122.06,-74.5 132.06,-71 122.06,-67.5 122.06,-74.5"/>
</g>
<!-- foo.classPath -->
<g id="node3" class="node">
<title>foo.classPath</title>
<polygon fill="white" stroke="black" points="342.17,-83.3 251.65,-83.3 251.65,-58.7 342.17,-58.7 342.17,-83.3"/>
<text text-anchor="middle" x="296.91" y="-66.8" font-family="Times,serif" font-size="14.00">foo.classPath</text>
</g>
<!-- foo.compile&#45;&gt;foo.classPath -->
<g id="edge2" class="edge">
<title>foo.compile&#45;&gt;foo.classPath</title>
<path fill="none" stroke="black" d="M215.44,-71C223.74,-71 232.6,-71 241.3,-71"/>
<polygon fill="black" stroke="black" points="241.39,-74.5 251.39,-71 241.39,-67.5 241.39,-74.5"/>
</g>
<!-- foo.assembly -->
<g id="node4" class="node">
<title>foo.assembly</title>
<polygon fill="white" stroke="black" points="468.81,-61.3 378.29,-61.3 378.29,-36.7 468.81,-36.7 468.81,-61.3"/>
<text text-anchor="middle" x="423.55" y="-44.8" font-family="Times,serif" font-size="14.00">foo.assembly</text>
</g>
<!-- foo.classPath&#45;&gt;foo.assembly -->
<g id="edge3" class="edge">
<title>foo.classPath&#45;&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M342.2,-63.18C350.65,-61.69 359.58,-60.11 368.3,-58.57"/>
<polygon fill="black" stroke="black" points="369.16,-61.98 378.4,-56.79 367.94,-55.08 369.16,-61.98"/>
</g>
<!-- foo.resources -->
<g id="node5" class="node">
<title>foo.resources</title>
<polygon fill="white" stroke="black" points="342.42,-40.3 251.39,-40.3 251.39,-15.7 342.42,-15.7 342.42,-40.3"/>
<text text-anchor="middle" x="296.91" y="-23.8" font-family="Times,serif" font-size="14.00">foo.resources</text>
</g>
<!-- foo.resources&#45;&gt;foo.assembly -->
<g id="edge4" class="edge">
<title>foo.resources&#45;&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M342.55,-35.52C350.89,-36.93 359.68,-38.41 368.27,-39.85"/>
<polygon fill="black" stroke="black" points="367.77,-43.32 378.21,-41.53 368.93,-36.42 367.77,-43.32"/>
</g>
</g>
</svg>

</center>
</div>
<div class="paragraph">
<p>And when you add additional tasks by defining methods using <code>def</code>, or <code>override</code> tasks
and call <code>super</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends JavaModule {
  /** Total number of lines in module source files */
  def lineCount = Task {
    allSourceFiles().map(f =&gt; os.read.lines(f.path).size).sum
  }

  /** Generate resources using lineCount of sources */
  override def resources = Task {
    os.write(Task.dest / "line-count.txt", "" + lineCount())
    super.resources() ++ Seq(PathRef(Task.dest))
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You as a Java programmer already know how these changes affect the build graph, by splicing
in the new method <code>foo.lineCount</code>, replacing <code>foo.resources</code> with a new method body, and
calling <code>foo.super.resources</code>:</p>
</div>
<div class="paragraph">
<center>
<svg width="534px" height="175px"
 viewBox="0.00 0.00 534.25 175.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 171.0)">
<title>G</title>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="8,-8 8,-159 518.25,-159 518.25,-8 8,-8"/>
<text text-anchor="middle" x="263.12" y="-142.4" font-family="Times,serif" font-size="14.00">foo</text>
</g>
<!-- foo.sources -->
<g id="node1" class="node">
<title>foo.sources</title>
<polygon fill="white" stroke="black" points="96.21,-104.3 15.93,-104.3 15.93,-79.7 96.21,-79.7 96.21,-104.3"/>
<text text-anchor="middle" x="56.07" y="-87.8" font-family="Times,serif" font-size="14.00">foo.sources</text>
</g>
<!-- foo.compile -->
<g id="node2" class="node">
<title>foo.compile</title>
<polygon fill="white" stroke="black" points="236.32,-126.3 152.79,-126.3 152.79,-101.7 236.32,-101.7 236.32,-126.3"/>
<text text-anchor="middle" x="194.56" y="-109.8" font-family="Times,serif" font-size="14.00">foo.compile</text>
</g>
<!-- foo.sources&#45;&gt;foo.compile -->
<g id="edge1" class="edge">
<title>foo.sources&#45;&gt;foo.compile</title>
<path fill="none" stroke="black" d="M96.18,-98.3C110.66,-100.64 127.28,-103.32 142.65,-105.79"/>
<polygon fill="black" stroke="black" points="142.11,-109.25 152.54,-107.39 143.22,-102.34 142.11,-109.25"/>
</g>
<!-- foo.lineCount -->
<g id="node7" class="node">
<title>foo.lineCount</title>
<polygon fill="white" stroke="darkgreen" stroke-width="3" points="241.44,-83.3 147.67,-83.3 147.67,-58.7 241.44,-58.7 241.44,-83.3"/>
<text text-anchor="middle" x="194.56" y="-66.8" font-family="Times,serif" font-size="14.00">foo.lineCount</text>
</g>
<!-- foo.sources&#45;&gt;foo.lineCount -->
<g id="edge6" class="edge">
<title>foo.sources&#45;&gt;foo.lineCount</title>
<path fill="none" stroke="darkgreen" stroke-width="3" d="M96.18,-85.98C109.11,-83.99 123.76,-81.74 137.7,-79.59"/>
<polygon fill="darkgreen" stroke="darkgreen" stroke-width="3" points="138.33,-83.04 147.68,-78.06 137.27,-76.12 138.33,-83.04"/>
</g>
<!-- foo.classPath -->
<g id="node3" class="node">
<title>foo.classPath</title>
<polygon fill="white" stroke="black" points="383.74,-126.3 293.22,-126.3 293.22,-101.7 383.74,-101.7 383.74,-126.3"/>
<text text-anchor="middle" x="338.48" y="-109.8" font-family="Times,serif" font-size="14.00">foo.classPath</text>
</g>
<!-- foo.compile&#45;&gt;foo.classPath -->
<g id="edge2" class="edge">
<title>foo.compile&#45;&gt;foo.classPath</title>
<path fill="none" stroke="black" d="M236.23,-114C250.87,-114 267.64,-114 283.26,-114"/>
<polygon fill="black" stroke="black" points="283.33,-117.5 293.33,-114 283.33,-110.5 283.33,-117.5"/>
</g>
<!-- foo.assembly -->
<g id="node4" class="node">
<title>foo.assembly</title>
<polygon fill="white" stroke="black" points="510.38,-104.3 419.86,-104.3 419.86,-79.7 510.38,-79.7 510.38,-104.3"/>
<text text-anchor="middle" x="465.12" y="-87.8" font-family="Times,serif" font-size="14.00">foo.assembly</text>
</g>
<!-- foo.classPath&#45;&gt;foo.assembly -->
<g id="edge3" class="edge">
<title>foo.classPath&#45;&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M383.78,-106.18C392.22,-104.69 401.16,-103.11 409.87,-101.57"/>
<polygon fill="black" stroke="black" points="410.73,-104.98 419.97,-99.79 409.51,-98.08 410.73,-104.98"/>
</g>
<!-- foo.super.resources -->
<g id="node5" class="node">
<title>foo.super.resources</title>
<polygon fill="white" stroke="black" points="256.89,-40.3 132.22,-40.3 132.22,-15.7 256.89,-15.7 256.89,-40.3"/>
<text text-anchor="middle" x="194.56" y="-23.8" font-family="Times,serif" font-size="14.00">foo.super.resources</text>
</g>
<!-- foo.resources -->
<g id="node6" class="node">
<title>foo.resources</title>
<polygon fill="white" stroke="darkgreen" stroke-width="3" points="384,-83.3 292.97,-83.3 292.97,-58.7 384,-58.7 384,-83.3"/>
<text text-anchor="middle" x="338.48" y="-66.8" font-family="Times,serif" font-size="14.00">foo.resources</text>
</g>
<!-- foo.super.resources&#45;&gt;foo.resources -->
<g id="edge4" class="edge">
<title>foo.super.resources&#45;&gt;foo.resources</title>
<path fill="none" stroke="darkgreen" stroke-width="3" d="M236.23,-40.32C252.11,-45.14 270.49,-50.7 287.2,-55.76"/>
<polygon fill="darkgreen" stroke="darkgreen" stroke-width="3" points="286.22,-59.13 296.81,-58.68 288.25,-52.43 286.22,-59.13"/>
</g>
<!-- foo.resources&#45;&gt;foo.assembly -->
<g id="edge5" class="edge">
<title>foo.resources&#45;&gt;foo.assembly</title>
<path fill="none" stroke="darkgreen" stroke-width="3" d="M384.13,-78.52C392.46,-79.93 401.25,-81.41 409.84,-82.85"/>
<polygon fill="darkgreen" stroke="darkgreen" stroke-width="3" points="409.34,-86.32 419.79,-84.53 410.51,-79.42 409.34,-86.32"/>
</g>
<!-- foo.lineCount&#45;&gt;foo.resources -->
<g id="edge7" class="edge">
<title>foo.lineCount&#45;&gt;foo.resources</title>
<path fill="none" stroke="darkgreen" stroke-width="3" d="M241.64,-71C254.66,-71 268.97,-71 282.47,-71"/>
<polygon fill="darkgreen" stroke="darkgreen" stroke-width="3" points="282.6,-74.5 292.6,-71 282.6,-67.5 282.6,-74.5"/>
</g>
</g>
</svg>

</center>
</div>
<div class="paragraph">
<p>If we want to re-use your build pipeline customizations, it as simple as turning the
singleton <code>object foo</code> into a <code>class MyJavaModule</code> (called <code>trait MyJavaModule</code> in
Mill&#8217;s Scala syntax), and it can be inherited  by <code>object foo</code> and <code>object bar</code> to
share the configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill.*, javalib.*

object foo extends MyJavaModule
object bar extends MyJavaModule

trait MyJavaModule extends JavaModule {
  /** Total number of lines in module source files */
  def lineCount = Task {
    allSourceFiles().map(f =&gt; os.read.lines(f.path).size).sum
  }

  /** Generate resources using lineCount of sources */
  override def resources = Task {
    os.write(Task.dest / "line-count.txt", "" + lineCount())
    super.resources() ++ Seq(PathRef(Task.dest))
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<center>
<svg width="534px" height="334px"
 viewBox="0.00 0.00 534.25 334.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 330.0)">
<title>G</title>
<g id="clust1" class="cluster">
<title>cluster_1</title>
<polygon fill="transparent" stroke="darkgreen" stroke-width="3" stroke-dasharray="5,2" points="8.39,-8 8.39,-159 517.86,-159 517.86,-8 8.39,-8"/>
<text text-anchor="middle" x="263.12" y="-142.4" font-family="Times,serif" font-size="14.00">bar</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_0</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="8,-167 8,-318 518.25,-318 518.25,-167 8,-167"/>
<text text-anchor="middle" x="263.12" y="-301.4" font-family="Times,serif" font-size="14.00">foo</text>
</g>
<!-- bar.sources -->
<g id="node1" class="node">
<title>bar.sources</title>
<polygon fill="white" stroke="black" points="95.92,-104.3 16.21,-104.3 16.21,-79.7 95.92,-79.7 95.92,-104.3"/>
<text text-anchor="middle" x="56.07" y="-87.8" font-family="Times,serif" font-size="14.00">bar.sources</text>
</g>
<!-- bar.compile -->
<g id="node2" class="node">
<title>bar.compile</title>
<polygon fill="white" stroke="black" points="236.03,-126.3 153.08,-126.3 153.08,-101.7 236.03,-101.7 236.03,-126.3"/>
<text text-anchor="middle" x="194.56" y="-109.8" font-family="Times,serif" font-size="14.00">bar.compile</text>
</g>
<!-- bar.sources&#45;&gt;bar.compile -->
<g id="edge1" class="edge">
<title>bar.sources&#45;&gt;bar.compile</title>
<path fill="none" stroke="black" d="M95.82,-98.25C110.56,-100.62 127.57,-103.36 143.23,-105.89"/>
<polygon fill="black" stroke="black" points="142.86,-109.37 153.29,-107.51 143.97,-102.46 142.86,-109.37"/>
</g>
<!-- bar.lineCount -->
<g id="node7" class="node">
<title>bar.lineCount</title>
<polygon fill="white" stroke="black" points="240.66,-83.3 148.46,-83.3 148.46,-58.7 240.66,-58.7 240.66,-83.3"/>
<text text-anchor="middle" x="194.56" y="-66.8" font-family="Times,serif" font-size="14.00">bar.lineCount</text>
</g>
<!-- bar.sources&#45;&gt;bar.lineCount -->
<g id="edge6" class="edge">
<title>bar.sources&#45;&gt;bar.lineCount</title>
<path fill="none" stroke="black" d="M95.82,-86.04C109.01,-84.01 124.02,-81.7 138.25,-79.51"/>
<polygon fill="black" stroke="black" points="139.09,-82.92 148.44,-77.94 138.02,-76 139.09,-82.92"/>
</g>
<!-- bar.classPath -->
<g id="node3" class="node">
<title>bar.classPath</title>
<polygon fill="white" stroke="black" points="383.45,-126.3 293.51,-126.3 293.51,-101.7 383.45,-101.7 383.45,-126.3"/>
<text text-anchor="middle" x="338.48" y="-109.8" font-family="Times,serif" font-size="14.00">bar.classPath</text>
</g>
<!-- bar.compile&#45;&gt;bar.classPath -->
<g id="edge2" class="edge">
<title>bar.compile&#45;&gt;bar.classPath</title>
<path fill="none" stroke="black" d="M235.85,-114C250.64,-114 267.63,-114 283.43,-114"/>
<polygon fill="black" stroke="black" points="283.61,-117.5 293.61,-114 283.61,-110.5 283.61,-117.5"/>
</g>
<!-- bar.assembly -->
<g id="node4" class="node">
<title>bar.assembly</title>
<polygon fill="white" stroke="black" points="510.1,-104.3 420.14,-104.3 420.14,-79.7 510.1,-79.7 510.1,-104.3"/>
<text text-anchor="middle" x="465.12" y="-87.8" font-family="Times,serif" font-size="14.00">bar.assembly</text>
</g>
<!-- bar.classPath&#45;&gt;bar.assembly -->
<g id="edge3" class="edge">
<title>bar.classPath&#45;&gt;bar.assembly</title>
<path fill="none" stroke="black" d="M383.42,-106.24C392.08,-104.72 401.26,-103.1 410.2,-101.52"/>
<polygon fill="black" stroke="black" points="410.91,-104.95 420.15,-99.76 409.7,-98.05 410.91,-104.95"/>
</g>
<!-- bar.super.resources -->
<g id="node5" class="node">
<title>bar.super.resources</title>
<polygon fill="white" stroke="black" points="256.61,-40.3 132.51,-40.3 132.51,-15.7 256.61,-15.7 256.61,-40.3"/>
<text text-anchor="middle" x="194.56" y="-23.8" font-family="Times,serif" font-size="14.00">bar.super.resources</text>
</g>
<!-- bar.resources -->
<g id="node6" class="node">
<title>bar.resources</title>
<polygon fill="white" stroke="black" points="383.71,-83.3 293.25,-83.3 293.25,-58.7 383.71,-58.7 383.71,-83.3"/>
<text text-anchor="middle" x="338.48" y="-66.8" font-family="Times,serif" font-size="14.00">bar.resources</text>
</g>
<!-- bar.super.resources&#45;&gt;bar.resources -->
<g id="edge4" class="edge">
<title>bar.super.resources&#45;&gt;bar.resources</title>
<path fill="none" stroke="black" d="M236.23,-40.32C252.11,-45.14 270.49,-50.7 287.2,-55.76"/>
<polygon fill="black" stroke="black" points="286.22,-59.13 296.81,-58.68 288.25,-52.43 286.22,-59.13"/>
</g>
<!-- bar.resources&#45;&gt;bar.assembly -->
<g id="edge5" class="edge">
<title>bar.resources&#45;&gt;bar.assembly</title>
<path fill="none" stroke="black" d="M383.78,-78.46C392.22,-79.89 401.16,-81.39 409.87,-82.86"/>
<polygon fill="black" stroke="black" points="409.53,-86.35 419.97,-84.56 410.69,-79.45 409.53,-86.35"/>
</g>
<!-- bar.lineCount&#45;&gt;bar.resources -->
<g id="edge7" class="edge">
<title>bar.lineCount&#45;&gt;bar.resources</title>
<path fill="none" stroke="black" d="M240.85,-71C254.17,-71 268.88,-71 282.72,-71"/>
<polygon fill="black" stroke="black" points="283.1,-74.5 293.1,-71 283.1,-67.5 283.1,-74.5"/>
</g>
<!-- foo.sources -->
<g id="node8" class="node">
<title>foo.sources</title>
<polygon fill="white" stroke="black" points="96.21,-263.3 15.93,-263.3 15.93,-238.7 96.21,-238.7 96.21,-263.3"/>
<text text-anchor="middle" x="56.07" y="-246.8" font-family="Times,serif" font-size="14.00">foo.sources</text>
</g>
<!-- foo.compile -->
<g id="node9" class="node">
<title>foo.compile</title>
<polygon fill="white" stroke="black" points="236.32,-285.3 152.79,-285.3 152.79,-260.7 236.32,-260.7 236.32,-285.3"/>
<text text-anchor="middle" x="194.56" y="-268.8" font-family="Times,serif" font-size="14.00">foo.compile</text>
</g>
<!-- foo.sources&#45;&gt;foo.compile -->
<g id="edge8" class="edge">
<title>foo.sources&#45;&gt;foo.compile</title>
<path fill="none" stroke="black" d="M96.18,-257.3C110.66,-259.64 127.28,-262.32 142.65,-264.79"/>
<polygon fill="black" stroke="black" points="142.11,-268.25 152.54,-266.39 143.22,-261.34 142.11,-268.25"/>
</g>
<!-- foo.lineCount -->
<g id="node14" class="node">
<title>foo.lineCount</title>
<polygon fill="white" stroke="black" points="241.44,-242.3 147.67,-242.3 147.67,-217.7 241.44,-217.7 241.44,-242.3"/>
<text text-anchor="middle" x="194.56" y="-225.8" font-family="Times,serif" font-size="14.00">foo.lineCount</text>
</g>
<!-- foo.sources&#45;&gt;foo.lineCount -->
<g id="edge13" class="edge">
<title>foo.sources&#45;&gt;foo.lineCount</title>
<path fill="none" stroke="black" d="M96.18,-244.98C109.11,-242.99 123.76,-240.74 137.7,-238.59"/>
<polygon fill="black" stroke="black" points="138.33,-242.04 147.68,-237.06 137.27,-235.12 138.33,-242.04"/>
</g>
<!-- foo.classPath -->
<g id="node10" class="node">
<title>foo.classPath</title>
<polygon fill="white" stroke="black" points="383.74,-285.3 293.22,-285.3 293.22,-260.7 383.74,-260.7 383.74,-285.3"/>
<text text-anchor="middle" x="338.48" y="-268.8" font-family="Times,serif" font-size="14.00">foo.classPath</text>
</g>
<!-- foo.compile&#45;&gt;foo.classPath -->
<g id="edge9" class="edge">
<title>foo.compile&#45;&gt;foo.classPath</title>
<path fill="none" stroke="black" d="M236.23,-273C250.87,-273 267.64,-273 283.26,-273"/>
<polygon fill="black" stroke="black" points="283.33,-276.5 293.33,-273 283.33,-269.5 283.33,-276.5"/>
</g>
<!-- foo.assembly -->
<g id="node11" class="node">
<title>foo.assembly</title>
<polygon fill="white" stroke="black" points="510.38,-263.3 419.86,-263.3 419.86,-238.7 510.38,-238.7 510.38,-263.3"/>
<text text-anchor="middle" x="465.12" y="-246.8" font-family="Times,serif" font-size="14.00">foo.assembly</text>
</g>
<!-- foo.classPath&#45;&gt;foo.assembly -->
<g id="edge10" class="edge">
<title>foo.classPath&#45;&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M383.78,-265.18C392.22,-263.69 401.16,-262.11 409.87,-260.57"/>
<polygon fill="black" stroke="black" points="410.73,-263.98 419.97,-258.79 409.51,-257.08 410.73,-263.98"/>
</g>
<!-- foo.super.resources -->
<g id="node12" class="node">
<title>foo.super.resources</title>
<polygon fill="white" stroke="black" points="256.89,-199.3 132.22,-199.3 132.22,-174.7 256.89,-174.7 256.89,-199.3"/>
<text text-anchor="middle" x="194.56" y="-182.8" font-family="Times,serif" font-size="14.00">foo.super.resources</text>
</g>
<!-- foo.resources -->
<g id="node13" class="node">
<title>foo.resources</title>
<polygon fill="white" stroke="black" points="384,-242.3 292.97,-242.3 292.97,-217.7 384,-217.7 384,-242.3"/>
<text text-anchor="middle" x="338.48" y="-225.8" font-family="Times,serif" font-size="14.00">foo.resources</text>
</g>
<!-- foo.super.resources&#45;&gt;foo.resources -->
<g id="edge11" class="edge">
<title>foo.super.resources&#45;&gt;foo.resources</title>
<path fill="none" stroke="black" d="M236.23,-199.32C252.11,-204.14 270.49,-209.7 287.2,-214.76"/>
<polygon fill="black" stroke="black" points="286.22,-218.13 296.81,-217.68 288.25,-211.43 286.22,-218.13"/>
</g>
<!-- foo.resources&#45;&gt;foo.assembly -->
<g id="edge12" class="edge">
<title>foo.resources&#45;&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M384.13,-237.52C392.46,-238.93 401.25,-240.41 409.84,-241.85"/>
<polygon fill="black" stroke="black" points="409.34,-245.32 419.79,-243.53 410.51,-238.42 409.34,-245.32"/>
</g>
<!-- foo.lineCount&#45;&gt;foo.resources -->
<g id="edge14" class="edge">
<title>foo.lineCount&#45;&gt;foo.resources</title>
<path fill="none" stroke="black" d="M241.64,-230C254.66,-230 268.97,-230 282.47,-230"/>
<polygon fill="black" stroke="black" points="282.6,-233.5 292.6,-230 282.6,-226.5 282.6,-233.5"/>
</g>
</g>
</svg>

</center>
</div>
<div class="paragraph">
<p>If we want to further customize either of those modules, we can <code>override</code>
one or more of the inherited methods, either directly on <code>object foo</code> or <code>object bar</code>,
or on a subclass extending <code>MyJavaModule</code> that we can then re-use. And if we want
to publish our customizations for others to use in their own projects,
we can <a href="../extending/writing-plugins.html#_publishing" class="xref page">publish
MyJavaModule to Maven Central</a> for others to
<a href="../extending/import-mvn-plugins.html" class="xref page">import into their build</a>.</p>
</div>
<div class="paragraph">
<p>Mill&#8217;s usage of methods, classes, and overrides is also what powers the IDE support
discussed earlier on this page. IDEs like IntelliJ or VSCode are uniquely adept at
working with object-oriented JVM codebases full of methods and classes, and so
they can help you navigate and understand your Mill build pipelines just as easily
as any application codebase. And the simplicity of this extension model is what
allows Mill developers to avoid making mistakes aroun caching or parallelism when setting
up their builds or publishing plugins, which ultimately is what gives Mill builds great
performance without ever needing to <code>clean</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Programmable build tools in the past have a reputation for complexity, and for good reason:
earlier in this article we discussed how <a href="#_extending_gradle">Extending Gradle</a> is incredibly error prone
and easy to get wrong, and it&#8217;s not the only build tool that&#8217;s like that. <em>"Don&#8217;t touch the
build config if you can at all avoid doing so"</em> has been a best practice for decades, and
justifiably so given how challenging traditional build tools are to program correctly.</p>
</div>
<div class="paragraph">
<p>But although superficially Mill&#8217;s programmable <code>build.mill</code> syntax looks similar to Gradle&#8217;s
<code>build.gradle</code> or <code>build.gradle.kts</code>, under the hood it works very differently. Where
Gradle works via a custom DSL that gets and sets global mutable variables that both humans
and IDEs have trouble analyzing, programming a Mill build feels like programming any JVM
application: with classes, methods, and first-class IDE support. With Mill, your build
system is no longer such an impenetrable black box, and instead becomes something that
any JVM developer can safely customize to the needs and requirements of the project.</p>
</div>
<div class="paragraph">
<p>If you have ever worked with a Gradle build you found it opaque and confusing, I encourage
you to give Mill a try!</p>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. The bug is <code>inputs.files</code> is depending on <code>src/main</code>, when it only really needs <code>src/main/java</code>. That means that changes to <code>src/main/resources</code> or <code>src/main/templates</code> will cause the task redundantly re-compute, making your build slower than necessary. If the bug was the other way - rather than depending on too large a folder instead depending on too small a folder - it would instead cause flakiness where <code>generateLineCount</code> would sometimes not run when it needs to.
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="maven.html">Comparing Mill vs Maven: Declarative Builds</a></span>
  <span class="next"><a href="performance.html">Mill Build Performance</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
