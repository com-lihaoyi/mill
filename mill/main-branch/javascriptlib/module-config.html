<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Typescript Module Configuration :: The Mill Build Tool</title>
    <link rel="canonical" href="https://mill-build.org/mill/javascriptlib/module-config.html" />
    <link rel="prev" href="dependencies.html" />
    <link rel="next" href="testing.html" />
    <meta name="generator" content="Antora 3.1.12" />
    <link rel="stylesheet" href="../../../_/css/site.css" />
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-1C582ZJR85"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-1C582ZJR85')</script>
<link rel="icon" href="../../../_/favicon.png" type="image/x-icon" />
  
  <style>
  /* auto-hyphenation is super ugly */
  *{
    hyphens: manual !important;
  }

  /* Reduce font size from 17px to something reasonable */
  .doc {
   font-size: 16px !important;
  }
  .doc pre {
   font-size: 14px !important;
  }
  /* Shrink unreasonably large top bar */
  nav.navbar{
    height: 2.5rem;
  }
  body.article{
    padding-top: 2.5rem;
  }
  div.nav-container{
    top: 2.5rem;
  }
  div.toolbar{
    top: 2.5rem;
  }
  aside.nav{
    top: 2.5rem;
    height: calc(100vh - 2.5rem);
  }
  </style></head><body class="article">
  
<header class="header">
  
  <script>
  gtag('config', 'AW-16649289906');

  document.addEventListener('DOMContentLoaded', function() {
  const links = document.querySelectorAll('a');
    links.forEach(link => {
      if (link.textContent.trim().toLowerCase() === 'download') {
        link.addEventListener('click', function(event) {
          console.log("download link clicked")
          gtag('event', 'conversion', {'send_to': 'AW-16649289906/rsphCKfVq8QZELKBgIM-'});
        });
      }
    });
  });
  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <!-- TODO: add mill icon -->
      <a class="navbar-item" href="https://mill-build.org"><img src="../../../_/logo-white.svg" height="20" />Â The Mill Build Tool</a>
      <div class="navbar-item search">
        <input id="search-input" type="text" placeholder="Search the docs" />
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill">GitHub</a>
        <a class="navbar-item" href="https://mill-build.org/blog/index.html">Blog</a>
        <a class="navbar-item" href="https://mill-build.org/api/latest/mill.html">API</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/issues">Issues</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/discussions">Discuss</a>


            <!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Documentation</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#"></a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Plugins</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
        -->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="mill" data-version="main-branch">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">

  <li class="nav-item" data-depth="0">
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../javalib/intro.html">Building Java with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/config.html">Config-Based Java Modules</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/script.html">Java Single-File Scripts</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javalib/module-config.html">Java Module Configuration</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/dependencies.html">Java Library Dependencies</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/testing.html">Testing Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/linting.html">Linting Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/publishing.html">Java Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/build-examples.html">Java Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../javalib/web-examples.html">Java Web Project Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scalalib/intro.html">Building Scala with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/config.html">Config-Based Scala Modules</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/script.html">Scala Single-File Scripts</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scalalib/module-config.html">Scala Module Configuration</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/dependencies.html">Scala Library Dependencies</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/testing.html">Testing Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/linting.html">Linting Scala Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/publishing.html">Scala Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/build-examples.html">Scala Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/web-examples.html">Scala Web Project Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/native-examples.html">Scala Native Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../scalalib/spark.html">Spark Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../kotlinlib/intro.html">Building Kotlin with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/config.html">Config-Based Kotlin Modules</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/script.html">Kotlin Single-File Scripts</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlinlib/module-config.html">Kotlin Module Configuration</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/dependencies.html">Kotlin Library Dependencies</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/testing.html">Testing Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/linting.html">Linting Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/publishing.html">Kotlin Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../kotlinlib/web-examples.html">Kotlin Web Project Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Experimental Platform Support</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Building Android Apps</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/android-initial-setup.html">Android Initial Setup</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/android-release.html">Android Release Guide</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../android/ide.html">Android IDE Support</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/java.html">Android Java Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/kotlin.html">Android Kotlin Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/android-linting.html">Linting Android Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/compose-samples.html">Android Jetpack Compose</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/hilt-sample.html">Android Hilt Sample</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../android/android-native-example.html">Android Native Example</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../pythonlib/intro.html">Building Python with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/module-config.html">Python Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/dependencies.html">Python Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pythonlib/linting.html">Linting Python Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/testing.html">Testing Python Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/publishing.html">Python Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../pythonlib/web-examples.html">Python Web Project Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="intro.html">Building Javascript with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="dependencies.html">Typescript Library Dependencies</a>
  </li>

  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="module-config.html">Typescript Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="testing.html">Testing Typescript Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="linting.html">Linting Typescript Projects</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="publishing.html">Typescript Packaging &amp; Publishing</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="build-examples.html">JavaScript Build Examples</a>
  </li>
</ul>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../comparisons/why-mill.html">Why Use Mill?</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../comparisons/maven.html">Case Study: Mill vs Maven</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../comparisons/gradle.html">Case Study: Mill vs Gradle</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../comparisons/sbt.html">Case Study: Mill vs <code>sbt</code></a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">The Mill CLI</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/installation-ide.html">Installation &amp; IDE Setup</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/flags.html">Mill Command-Line Flags</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/builtin-commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../cli/query-syntax.html">Task Query Syntax</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../cli/build-header.html">Build Header Config</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../migrating/migrating.html">Migrating to Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migrating/auto-migrating.html">Automated Migration Tools</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill Fundamentals</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/tasks.html">Tasks</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/modules.html">Modules</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fundamentals/out-dir.html">The Output Directory</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/library-deps.html">Library Dependencies in Mill</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/cross-builds.html">Cross Builds</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/bundled-libraries.html">Bundled Libraries</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../fundamentals/configuring-jvm-versions.html">Configuring JVM Versions</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extending Mill</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../extending/import-mvn-plugins.html">Import Libraries and Plugins</a>
  </li>

  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../extending/contrib-plugins.html">Contrib Plugins</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/artifactory.html">Artifactory</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/buildinfo.html">BuildInfo</a>
  </li>

  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contrib/codeartifact.html">Codeartifact</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/docker.html">Docker</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/flyway.html">Flyway</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/gitlab.html">Gitlab</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/jmh.html">JMH</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/playlib.html">Play Framework</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/proguard.html">Proguard</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/scalapblib.html">ScalaPB</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/scoverage.html">Scoverage</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/sonatypecentral.html">Sonatype Central (Plugin Moved to Scalalib)</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/testng.html">TestNG</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/twirllib.html">Twirl</a>
  </li>

  <li class="nav-item is-active" data-depth="3">
    <a class="nav-link" href="../contrib/versionfile.html">Version file</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../extending/thirdparty-plugins.html">Third-Party Plugins</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/running-jvm-code.html">Running Dynamic JVM Code</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/writing-plugins.html">Writing Mill Plugins</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/meta-build.html">The Mill Meta-Build</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/example-typescript-support.html">Example: Typescript Support</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../extending/example-python-support.html">Example: Python Support</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../large/large.html">Large Builds and Monorepos</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/selective-execution.html">Selective Test Execution</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/multi-file-builds.html">Multi-File Builds</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../large/multi-language-builds.html">Multi-Language Builds</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill In Depth</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/evaluation-model.html">The Mill Evaluation Model</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/caching.html">Caching in Mill</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../depth/parallelism.html">Parallelism in Mill</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/process-architecture.html">The Mill Process Architecture</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/sandboxing.html">Mill Sandboxing</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/design-principles.html">Mill Design Principles</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="../depth/why-scala.html">Why does Mill use Scala?</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://mill-build.org/api/latest/mill.html">Mill API Reference</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/com-lihaoyi/mill/blob/main/changelog.adoc">Changelog</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/talks-blog-posts.html">Talks &amp; Blog Posts</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Mill Documentation</span>
    <span class="version">main-branch</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../../index.html">Mill Documentation</a></div>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">main-branch</a>
        </li>
        <li class="version is-latest">
          <a href="../../index.html">1.0.6</a>
        </li>
        <li class="version">
          <a href="../../dev-1.0.6-81-9337cb/index.html">dev-1.0.6-81-9337cb</a>
        </li>
        <li class="version">
          <a href="../../0.12.x/index.html">0.12.16</a>
        </li>
        <li class="version">
          <a href="../../0.11.x/index.html">0.11.13</a>
        </li>
        <li class="version">
          <a href="../../0.10.15/index.html">0.10.15</a>
        </li>
        <li class="version">
          <a href="../../0.9.12/index.html">0.9.12</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../blog/index.html">The Mill Build Engineering Blog</a></div>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">

<div class="toolbar" role="navigation" style="position: fixed; top: 2.5rem; height: 2rem; left: 0px;">
<button class="nav-toggle"></button>
</div>
<div class="toolbar" style="position: fixed; top: 2.5rem; height: 1.5rem; right: 0px;">
<div class="edit-this-page"><a href="https://github.com/com-lihaoyi/mill/edit/main/docs/modules/ROOT/pages/javascriptlib/module-config.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Typescript Module Configuration</h1>
<div class="sect1">
<h2 id="_common_configuration_overrides"><a class="anchor" href="#_common_configuration_overrides"></a>Common Configuration Overrides</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">build.mill (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/1.0.6-83-daa5d4/mill-dist-1.0.6-83-daa5d4-example-javascriptlib-module-1-common-config.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/1.0.6/example/javascriptlib/module/1-common-config">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build

import mill.*
import mill.javascriptlib.*

object foo extends TypeScriptModule {

  def customSource = Task.Sources(&quot;custom-src/foo2.ts&quot;)

  def sources = Task { super.sources() ++ customSource() }

  def customResources = Task.Sources(&quot;custom-resources&quot;)

  def resources = super.resources() ++ customResources()

  def generatedSources = Task {
    for (name &lt;- Seq(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;)) os.write(
      Task.dest / s&quot;foo-$name.ts&quot;,
      s&quot;&quot;&quot;export default class Foo$name {
         |  static value: string = &quot;Hello $name&quot;
         |}
      &quot;&quot;&quot;.stripMargin
    )

    Seq(PathRef(Task.dest))
  }

  def forkEnv = super.forkEnv() + (&quot;MY_CUSTOM_ENV&quot; -&gt; &quot;my-env-value&quot;)

  def mainFileName = s&quot;foo2.ts&quot;

  def mainFilePath = compile().path / &quot;custom-src&quot; / mainFileName()

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example demonstrates usage of common configs</p>
</div>
<div class="paragraph">
<p>Note the use of <code>moduleDir</code>, <code>Task.dest</code>, and <code>PathRef</code> when preforming
various filesystem operations:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>moduleDir</code>: Base path of the module. For the root module, itâs the repo root.
For inner modules, itâs the module path (e.g., <code>foo/bar/qux</code> for <code>foo.bar.qux</code>). Can be overridden if needed.</p>
</li>
<li>
<p><code>Task.dest</code>: Destination folder in the <code>out/</code> folder for task output.
Prevents filesystem conflicts and serves as temporary storage or output for tasks.</p>
</li>
<li>
<p><code>PathRef</code>: Represents the contents of a file or folder, not just its path,
ensuring downstream tasks properly invalidate when contents change.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Typical Usage is given below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; ./mill foo.run
hello2
Hello A
Hello B
Hello C
my-env-value
MyResource: My Resource Contents

&gt; ./mill foo.bundle
Build succeeded!

&gt; MY_CUSTOM_ENV=my-env-value node out/foo/bundle.dest/bundle.js
hello2
Hello A
Hello B
Hello C
my-env-value
MyResource: My Resource Contents
MyOtherResource: My Other Resource Contents</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_tasks"><a class="anchor" href="#_custom_tasks"></a>Custom Tasks</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">build.mill (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/1.0.6-83-daa5d4/mill-dist-1.0.6-83-daa5d4-example-javascriptlib-module-2-custom-tasks.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/1.0.6/example/javascriptlib/module/2-custom-tasks">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build

import mill.*, javascriptlib.*

object foo extends TypeScriptModule {

  /** Total number of lines in module source files */
  def lineCount: T[Int] = Task {
    sources()
      .flatMap(pathRef =&gt; os.walk(pathRef.path))
      .filter(_.ext == &quot;ts&quot;)
      .map(os.read.lines(_).size)
      .sum
  }

  def generatedSources = Task {
    os.write(
      Task.dest / &quot;bar.ts&quot;,
      s&quot;&quot;&quot;export default class Bar {
         |  static value: number = 123
         |}
      &quot;&quot;&quot;.stripMargin
    )

    Seq(PathRef(Task.dest))
  }

  def forkEnv = super.forkEnv() + (&quot;LINE_COUNT&quot; -&gt; lineCount().toString)

  def printLineCount() = Task.Command { println(lineCount()) }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above build defines the customizations to the Mill task graph shown below,
with the boxes representing tasks defined or overridden above and the un-boxed
labels representing existing Mill tasks:</p>
</div>
<div class="paragraph">
<center>
<svg width="457px" height="119px" viewBox="0.00 0.00 457.09 118.80" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 114.8)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-114.8 453.09,-114.8 453.09,4 -4,4"></polygon>
<!-- generatedSources -->
<g id="node1" class="node">
<title>generatedSources</title>
<polygon fill="none" stroke="black" points="315.79,-110.7 201.34,-110.7 201.34,-86.1 315.79,-86.1 315.79,-110.7"></polygon>
<text text-anchor="middle" x="258.57" y="-94.2" font-family="Times,serif" font-size="14.00">generatedSources</text>
</g>
<!-- ... -->
<g id="node2" class="node">
<title>...</title>
<polygon fill="none" stroke="white" points="378.68,-88.7 351.67,-88.7 351.67,-64.1 378.68,-64.1 378.68,-88.7"></polygon>
<text text-anchor="middle" x="365.18" y="-72.2" font-family="Times,serif" font-size="14.00">...</text>
</g>
<!-- generatedSources&#45;&gt;... -->
<g id="edge1" class="edge">
<title>generatedSources-&gt;...</title>
<path fill="none" stroke="black" d="M315.85,-86.56C325.06,-84.63 334.1,-82.73 341.82,-81.1"></path>
<polygon fill="black" stroke="black" points="342.68,-84.5 351.74,-79.01 341.24,-77.65 342.68,-84.5"></polygon>
</g>
<!-- run -->
<g id="node6" class="node">
<title>run</title>
<polygon fill="none" stroke="white" points="448.92,-88.7 414.6,-88.7 414.6,-64.1 448.92,-64.1 448.92,-88.7"></polygon>
<text text-anchor="middle" x="431.76" y="-72.2" font-family="Times,serif" font-size="14.00">run</text>
</g>
<!-- ...&#45;&gt;run -->
<g id="edge5" class="edge">
<title>...-&gt;run</title>
<path fill="none" stroke="black" d="M378.63,-76.4C385.82,-76.4 395.16,-76.4 403.94,-76.4"></path>
<polygon fill="black" stroke="black" points="404.19,-79.9 414.19,-76.4 404.19,-72.9 404.19,-79.9"></polygon>
</g>
<!-- sources -->
<g id="node3" class="node">
<title>sources</title>
<polygon fill="none" stroke="white" points="57.97,-45.7 0.01,-45.7 0.01,-21.1 57.97,-21.1 57.97,-45.7"></polygon>
<text text-anchor="middle" x="28.99" y="-29.2" font-family="Times,serif" font-size="14.00">sources</text>
</g>
<!-- lineCount -->
<g id="node4" class="node">
<title>lineCount</title>
<polygon fill="none" stroke="black" points="165.31,-45.7 93.87,-45.7 93.87,-21.1 165.31,-21.1 165.31,-45.7"></polygon>
<text text-anchor="middle" x="129.59" y="-29.2" font-family="Times,serif" font-size="14.00">lineCount</text>
</g>
<!-- sources&#45;&gt;lineCount -->
<g id="edge2" class="edge">
<title>sources-&gt;lineCount</title>
<path fill="none" stroke="black" d="M57.98,-33.4C66,-33.4 74.95,-33.4 83.72,-33.4"></path>
<polygon fill="black" stroke="black" points="83.85,-36.9 93.85,-33.4 83.85,-29.9 83.85,-36.9"></polygon>
</g>
<!-- forkEnv -->
<g id="node5" class="node">
<title>forkEnv</title>
<polygon fill="none" stroke="black" points="289.44,-67.7 227.69,-67.7 227.69,-43.1 289.44,-43.1 289.44,-67.7"></polygon>
<text text-anchor="middle" x="258.57" y="-51.2" font-family="Times,serif" font-size="14.00">forkEnv</text>
</g>
<!-- lineCount&#45;&gt;forkEnv -->
<g id="edge3" class="edge">
<title>lineCount-&gt;forkEnv</title>
<path fill="none" stroke="black" d="M165.29,-39.41C181.46,-42.21 200.8,-45.56 217.58,-48.47"></path>
<polygon fill="black" stroke="black" points="217.2,-51.96 227.65,-50.22 218.4,-45.06 217.2,-51.96"></polygon>
</g>
<!-- printLineCount -->
<g id="node7" class="node">
<title>printLineCount</title>
<polygon fill="none" stroke="black" points="309.89,-24.7 207.24,-24.7 207.24,-0.1 309.89,-0.1 309.89,-24.7"></polygon>
<text text-anchor="middle" x="258.57" y="-8.2" font-family="Times,serif" font-size="14.00">printLineCount</text>
</g>
<!-- lineCount&#45;&gt;printLineCount -->
<g id="edge6" class="edge">
<title>lineCount-&gt;printLineCount</title>
<path fill="none" stroke="black" d="M165.29,-27.66C175.18,-26.03 186.26,-24.19 197.21,-22.38"></path>
<polygon fill="black" stroke="black" points="197.9,-25.81 207.2,-20.73 196.76,-18.91 197.9,-25.81"></polygon>
</g>
<!-- forkEnv&#45;&gt;... -->
<g id="edge4" class="edge">
<title>forkEnv-&gt;...</title>
<path fill="none" stroke="black" d="M289.54,-61.42C306.16,-64.75 326.48,-68.83 341.71,-71.89"></path>
<polygon fill="black" stroke="black" points="341.29,-75.38 351.79,-73.91 342.67,-68.51 341.29,-75.38"></polygon>
</g>
</g>
</svg>

</center>
</div>
<div class="paragraph">
<p>Mill lets you define new cached Tasks using the <code>Task {...â}</code> syntax,
depending on existing Tasks e.g. <code>foo.sources</code> via the <code>foo.sources()</code>
syntax to extract their current value, as shown in <code>lineCount</code> above. The
return-type of a Task has to be JSON-serializable (using
<a href="https://github.com/lihaoyi/upickle">uPickle</a>, one of Millâs <a href="../fundamentals/bundled-libraries.html" class="xref page">Bundled Libraries</a>)
and the Task is cached when first run until its inputs change (in this case, if
someone edits the <code>foo.sources</code> files which live in <code>foo/src</code>). Cached Tasks
cannot take parameters.</p>
</div>
<div class="paragraph">
<p>Note that depending on a task requires use of parentheses after the task
name, e.g. <code>pythonDeps()</code>, <code>sources()</code> and <code>lineCount()</code>. This converts the
task of type <code>T[V]</code> into a value of type <code>V</code> you can make use in your task
implementation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; ./mill foo.run &quot;Hello World!&quot;
Bar.value: 123
text: Hello World!
Line count: 9</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overriding_tasks"><a class="anchor" href="#_overriding_tasks"></a>Overriding Tasks</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">build.mill (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/1.0.6-83-daa5d4/mill-dist-1.0.6-83-daa5d4-example-javascriptlib-module-3-override-tasks.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/1.0.6/example/javascriptlib/module/3-override-tasks">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build

import mill.*
import mill.javascriptlib.*

object `package` extends TypeScriptModule {
  def moduleName = &quot;foo&quot;

  def sources = Task {
    val srcPath = Task.dest / &quot;src&quot;
    val filePath = srcPath / &quot;foo.ts&quot;

    os.makeDir.all(srcPath)

    os.write.over(
      filePath,
      &quot;&quot;&quot;(function () {
        |  console.log(&quot;Hello World!&quot;)
        |})()
      &quot;&quot;&quot;.stripMargin
    )

    Seq(PathRef(Task.dest))
  }

  def compile = Task {
    println(&quot;Compiling...&quot;)
    super.compile()
  }

  def run(args: mill.api.Args) = Task.Command {
    println(&quot;Running... &quot; + args.value.mkString(&quot; &quot;))
    super.run(args)()
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can re-define tasks to override them, and use <code>super</code> if you
want to refer to the originally defined task. The above example shows how to
override <code>compile</code> and <code>run</code> to add additional logging messages, and we
override <code>sources</code> which was <code>Task.Sources</code> for the <code>src/</code> folder with a plain
<code>T{...â}</code> task that generates the  necessary source files on-the-fly.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
that this example <strong>replaces</strong> your <code>src/</code> folder with the generated
sources, as we are overriding the <code>def sources</code> task. If you want to <strong>add</strong>
generated sources, you can either override <code>generatedSources</code>, or you can
override <code>sources</code> and use <code>super</code> to include the original source folder with <code>super</code>:
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; ./mill run &quot;added tags&quot;
Compiling...
Hello World!
Running... added tags</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compilation_execution_flags"><a class="anchor" href="#_compilation_execution_flags"></a>Compilation &amp; Execution Flags</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">build.mill (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/1.0.6-83-daa5d4/mill-dist-1.0.6-83-daa5d4-example-javascriptlib-module-4-compilation-execution-flags.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/1.0.6/example/javascriptlib/module/4-compilation-execution-flags">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build

import mill.*
import mill.javascriptlib.*

object foo extends TypeScriptModule {
  def compilerOptions =
    super.compilerOptions() + (
      &quot;skipLibCheck&quot; -&gt; ujson.True,
      &quot;module&quot; -&gt; ujson.Str(&quot;commonjs&quot;),
      &quot;target&quot; -&gt; ujson.Str(&quot;es6&quot;)
    )

  def executionFlags =
    Map(
      &quot;inspect&quot; -&gt; &quot;&quot;,
      &quot;max-old-space-size&quot; -&gt; &quot;4096&quot;
    )

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example demonstrates defining typescript compiler options and node.js execution flags</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; ./mill foo.run
Debugger listening on ws://...
...
Foo:
Hello World!</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_filesystem_resources"><a class="anchor" href="#_filesystem_resources"></a>Filesystem Resources</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">build.mill (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/1.0.6-83-daa5d4/mill-dist-1.0.6-83-daa5d4-example-javascriptlib-module-5-resources.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/1.0.6/example/javascriptlib/module/5-resources">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build

import mill.*, javascriptlib.*
import ujson.*

object foo extends TypeScriptModule {
  object test extends TypeScriptTests, TestModule.Jest {
    def otherFiles = Task.Source(&quot;other-files&quot;)

    def forkEnv = super.forkEnv() + (&quot;OTHER_FILES_DIR&quot; -&gt; otherFiles().path.toString)
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; ./mill foo.run
Hello World Resource File

&gt; ./mill foo.test
PASS .../foo.test.ts
...
Test Suites:...1 passed, 1 total...
Tests:...3 passed, 3 total...
...

&gt; ./mill foo.bundle
Build succeeded!

&gt; mv out/foo/bundle.dest ./bundle.dest &amp;&amp; rm -rf out/

&gt; node ./bundle.dest/bundle.js
Hello World Resource File</code></pre>
</div>
</div>
<div class="paragraph">
<p>This section discusses how tests can depend on resources locally on disk.
Mill provides two ways to do this: via ts-config paths, and via
the resource folder which is made available as the environment variable
<code>MILL_TEST_RESOURCE_DIR</code>;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>ts-config paths resources</strong> are useful when you want to fetch individual files,
and are bundled with the application by the <code>.bundle</code> step when bundling code for deployment.
But they do not allow you to list folders or perform other filesystem operations.</p>
</li>
<li>
<p>The <strong>resource folder</strong>, available via <code>MILL_TEST_RESOURCE_DIR</code>, gives you
access to the folder path of the resources on disk. This is useful in allowing
you to list and otherwise manipulate the filesystem, which you cannot do with
<strong>tsconfig-paths resources</strong>. However, the <code>MILL_TEST_RESOURCE_DIR</code> only exists
when running tests using Mill, and is not available when executing applications
packaged for deployment via <code>.bundle</code></p>
</li>
<li>
<p>Apart from <code>resources/</code>, you can provide additional folders to your test suite
by defining a <code>Task.Source</code> (<code>otherFiles</code> above) and passing it to <code>forkEnv</code>. This
provide the folder path as an environment variable that the test can make use of</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example application code demonstrating the techniques above can be seen below:</p>
</div>
<div class="listingblock">
<div class="title">foo/resources/file.txt (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/1.0.6-83-daa5d4/mill-dist-1.0.6-83-daa5d4-example-javascriptlib-module-5-resources.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/1.0.6/example/javascriptlib/module/5-resources/foo/resources/file.txt">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">Hello World Resource File</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">foo/test/resources/test-file-a.txt (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/1.0.6-83-daa5d4/mill-dist-1.0.6-83-daa5d4-example-javascriptlib-module-5-resources.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/1.0.6/example/javascriptlib/module/5-resources/foo/test/resources/test-file-a.txt">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">Test Hello World Resource File A</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">foo/test/resources/test-file-b.txt (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/1.0.6-83-daa5d4/mill-dist-1.0.6-83-daa5d4-example-javascriptlib-module-5-resources.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/1.0.6/example/javascriptlib/module/5-resources/foo/test/resources/test-file-b.txt">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">Test Hello World Resource File B</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">foo/test/other-files/other-file.txt (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/1.0.6-83-daa5d4/mill-dist-1.0.6-83-daa5d4-example-javascriptlib-module-5-resources.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/1.0.6/example/javascriptlib/module/5-resources/foo/test/other-files/other-file.txt">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">Other Hello World File</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that tests require that you pass in any files that they depend on explicitly.
This is necessary so that Mill knows when a test needs to be re-run and when a
previous result can be cached. This also ensures that tests reading and writing
to the current working directory do not accidentally interfere with each others
files, especially when running in parallel.</p>
</div>
<div class="paragraph">
<p>Mill runs test processes in a <a href="../depth/sandboxing.html" class="xref page">sandbox/ folder</a>, not in your project root folder, to
prevent you from accidentally accessing files without explicitly passing them. Thus
you cannot just read resources off disk via <code>with fs.readFile(&quot;foo/resources/test-file-a.txt&quot;, {...â})</code> as file.
If you have legacy tests that need to run in the project root folder to work, you
can configure your test suite with <code>def testSandboxWorkingDir = false</code> to disable
the sandbox and make the tests run in the project root.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bundling_configuration"><a class="anchor" href="#_bundling_configuration"></a>Bundling Configuration</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">build.mill (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/1.0.6-83-daa5d4/mill-dist-1.0.6-83-daa5d4-example-javascriptlib-module-6-executable-config.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/1.0.6/example/javascriptlib/module/6-executable-config">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build

import mill.*
import mill.javascriptlib.*

object foo extends TypeScriptModule {
  def bundleFlags =
    Map(
      &quot;platform&quot; -&gt; ujson.Str(&quot;node&quot;),
      &quot;entryPoints&quot; -&gt; ujson.Arr(mainFilePath().toString),
      &quot;bundle&quot; -&gt; ujson.Bool(true),
      &quot;minify&quot; -&gt; ujson.Bool(true)
    )

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above build demonstrates passing bundle flags
After generating your bundle with <code>mill foo.bundle</code> youâll find by running
your <code>out/foo/bundle.dest/bundle.js</code> youâll get the programmed output
and usage is based on project logic like which args to include with command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; ./mill foo.bundle
Build succeeded!

&gt; node out/foo/bundle.dest/bundle.js
Hello World!</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_root_module"><a class="anchor" href="#_root_module"></a>Root Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use <code>object <code>package</code> extends mill.Module</code> to use a <code>Module</code>
as the root module of the file:</p>
</div>
<div class="listingblock">
<div class="title">build.mill (<a href="https://repo1.maven.org/maven2/com/lihaoyi/mill-dist/1.0.6-83-daa5d4/mill-dist-1.0.6-83-daa5d4-example-javascriptlib-module-7-root-module.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/1.0.6/example/javascriptlib/module/7-root-module">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build

import mill.*, javascriptlib.*

object `package` extends TypeScriptModule {
  def moduleName = &quot;foo&quot;
  def npmDeps = Seq(&quot;immutable@4.3.7&quot;)
  object test extends TypeScriptTests, TestModule.Jest
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since our <code>object <code>package</code> extends mill.Module</code>, its files live in a
top-level <code>src/</code> folder.</p>
</div>
<div class="paragraph">
<p>Mill will ordinarily use the name of the singleton object, as
the default value for the <code>moduleName</code> task.</p>
</div>
<div class="paragraph">
<p>For exmaple:</p>
</div>
<div class="paragraph">
<p>The <code>moduleName</code> for the singleton <code>bar</code> defined as
<code>object bar extends TypeScriptModule</code> would be <code>bar</code>,
with the expected source directory in <code>bar/src</code>.</p>
</div>
<div class="paragraph">
<p>For this example, since we use the <code>RootModule</code> we would need to manually define our
<code>moduleName</code>.</p>
</div>
<div class="paragraph">
<p>The <code>moduleName</code> is used in the generated <code>tsconfig</code> files <code>compilerOptions['paths']</code>
as the modules <code>src/</code> path mapping and to define the default <code>mainFileName</code>, which is
the modules entry file.
The generated mapping for this example would be <code>&quot;foo/*&quot;: [...â]</code>. and its expected main file
woudld be <code>foo.ts</code> located in top-level <code>src/</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; ./mill run James Bond prof
Hello James Bond Professor

&gt; ./mill test
PASS .../foo.test.ts
...
Test Suites:...1 passed, 1 total...
Tests:...3 passed, 3 total...
...

&gt; ./mill show bundle
Build succeeded!

&gt; node out/bundle.dest/bundle.js James Bond prof
Hello James Bond Professor</code></pre>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="dependencies.html">Typescript Library Dependencies</a></span>
  <span class="next"><a href="testing.html">Testing Typescript Projects</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async="async" src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async="async" src="../../../search-index.js"></script>
  
</body></html>