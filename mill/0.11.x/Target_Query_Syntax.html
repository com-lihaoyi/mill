<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Target Query Syntax :: The Mill Build Tool</title>
    <link rel="canonical" href="https://mill-build.org/mill/0.11.x/Target_Query_Syntax.html" />
    <link rel="prev" href="Cross_Builds.html" />
    <link rel="next" href="Extending_Mill.html" />
    <meta name="generator" content="Antora 3.1.12" />
    <link rel="stylesheet" href="../../_/css/site.css" />
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-1C582ZJR85"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-1C582ZJR85')</script>
<link rel="icon" href="../../_/favicon.png" type="image/x-icon" />
  
  <style>
  /* auto-hyphenation is super ugly */
  *{
    hyphens: manual !important;
  }

  /* Reduce font size from 17px to something reasonable */
  .doc {
   font-size: 16px !important;
  }
  .doc pre {
   font-size: 14px !important;
  }
  /* Shrink unreasonably large top bar */
  nav.navbar{
    height: 2.5rem;
  }
  body.article{
    padding-top: 2.5rem;
  }
  div.nav-container{
    top: 2.5rem;
  }
  div.toolbar{
    top: 2.5rem;
  }
  aside.nav{
    top: 2.5rem;
    height: calc(100vh - 2.5rem);
  }
  </style></head><body class="article">
  
<header class="header">
  
  <script>
  gtag('config', 'AW-16649289906');

  document.addEventListener('DOMContentLoaded', function() {
  const links = document.querySelectorAll('a');
    links.forEach(link => {
      if (link.textContent.trim().toLowerCase() === 'download') {
        link.addEventListener('click', function(event) {
          console.log("download link clicked")
          gtag('event', 'conversion', {'send_to': 'AW-16649289906/rsphCKfVq8QZELKBgIM-'});
        });
      }
    });
  });
  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <!-- TODO: add mill icon -->
      <a class="navbar-item" href="https://mill-build.org"><img src="../../_/logo-white.svg" height="20" /> The Mill Build Tool</a>
      <div class="navbar-item search">
        <input id="search-input" type="text" placeholder="Search the docs" />
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill">GitHub</a>
        <a class="navbar-item" href="https://mill-build.org/blog/index.html">Blog</a>
        <a class="navbar-item" href="https://mill-build.org/api/latest/mill.html">API</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/issues">Issues</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/discussions">Discuss</a>


            <!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Documentation</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#"></a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Plugins</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
        -->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="mill" data-version="0.11.x">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">

  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Java Quick Start</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Java_Intro_to_Mill.html">Introduction to Mill for Java</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Java_Installation_IDE_Support.html">Installation and IDE Support</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Java_Builtin_Commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="Java_Build_Examples.html">Java Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="Java_Module_Config.html">Java Module Configuration</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="Java_Web_Build_Examples.html">Java Web Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="Java_Case_Study_Netty.html">Java Case Study: Netty</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scala Quick Start</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Scala_Intro_to_Mill.html">Introduction to Mill for Scala</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Scala_Installation_IDE_Support.html">Installation and IDE Support</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Scala_Builtin_Commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="Scala_Build_Examples.html">Scala Build Examples</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="Scala_Module_Config.html">Scala Module Configuration</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="Scala_Web_Build_Examples.html">Scala Web Build Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill In Depth</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Library_Dependencies.html">Library Dependencies in Mill</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Out_Dir.html">The Output Directory</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Tasks.html">Tasks</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="Modules.html">Modules</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="Cross_Builds.html">Cross Builds</a>
  </li>

  <li class="nav-item is-current-page is-active" data-depth="1">
    <a class="nav-link" href="Target_Query_Syntax.html">Target Query Syntax</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="Extending_Mill.html">Extending Mill</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="The_Mill_Evaluation_Model.html">The Mill Evaluation Model</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill Plugins</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Using_Plugins.html">Using Plugins</a>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="Contrib_Plugins.html">Contrib Plugins</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="contrib/artifactory.html">Artifactory</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="contrib/bintray.html">Bintray</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="contrib/bloop.html">Bloop</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/buildinfo.html">BuildInfo</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="Plugin_BSP.html">BSP - Build Server Protocol</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/codeartifact.html">Codeartifact</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/docker.html">Docker</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/flyway.html">Flyway</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/gitlab.html">Gitlab</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/jmh.html">JMH</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/playlib.html">Play Framework</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/proguard.html">Proguard</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/scalapblib.html">ScalaPB</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/scoverage.html">Scoverage</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/testng.html">TestNG</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/twirllib.html">Twirl</a>
  </li>

  <li class="nav-item is-active" data-depth="2">
    <a class="nav-link" href="contrib/versionfile.html">Version file</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Thirdparty_Plugins.html">Third-Party Plugins</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Mill_Design_Principles.html">Mill Design Principles</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="External_References.html">External References</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://mill-build.org/api/latest/mill/index.html">Mill Scaladoc</a>
  </li>

  <li class="nav-item is-active" data-depth="1">
    <a class="nav-link" href="Changelog.html">Changelog</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Mill Documentation</span>
    <span class="version">0.11.13</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../index.html">Mill Documentation</a></div>
      <ul class="versions">
        <li class="version">
          <a href="../main-branch/index.html">main-branch</a>
        </li>
        <li class="version is-latest">
          <a href="../index.html">1.0.4</a>
        </li>
        <li class="version">
          <a href="../dev-1.0.4-28-f16413/index.html">dev-1.0.4-28-f16413</a>
        </li>
        <li class="version">
          <a href="../0.12.x/index.html">0.12.14</a>
        </li>
        <li class="version is-current">
          <a href="index.html">0.11.13</a>
        </li>
        <li class="version">
          <a href="../0.10.15/index.html">0.10.15</a>
        </li>
        <li class="version">
          <a href="../0.9.12/index.html">0.9.12</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../blog/index.html">The Mill Build Engineering Blog</a></div>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">

<div class="toolbar" role="navigation" style="position: fixed; top: 2.5rem; height: 2rem; left: 0px;">
<button class="nav-toggle"></button>
</div>
<div class="toolbar" style="position: fixed; top: 2.5rem; height: 1.5rem; right: 0px;">
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Target Query Syntax</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>When interacting with Mill from the CLI, you often need to select targets or modules.
In most places, where Mill accepts a target, it really accepts a target selector query, which is the name of a target in its simplest form, but it can also contain wildcards, type pattern and other special syntax, making it a powerful tool to select specific targets.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_selecting_dedicated_targets"><a class="anchor" href="#_selecting_dedicated_targets"></a>Selecting dedicated targets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When invoking Mill, the simplest way to run a target is to give it with a fully qualified names.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; mill for.compile
&gt; mill for.run hello world
&gt; mill foo.testCached</pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Understanding target paths and path segments</div>
<div class="paragraph">
<p>Each Mill module and target has a unique path.
Each part of the path is called <em>segment</em>.
Segments are separated with a dot (<code>.</code>).
They look like regular Scala class name qualifiers.</p>
</div>
<div class="paragraph">
<p>There are two kind of segments: <em>label segments</em> and <em>cross segments</em>.</p>
</div>
<div class="paragraph">
<p><em>Label segments</em> are the components of a target path and have the same restriction as Scala identifiers.
The must start with a letter and may contain letters, numbers and a limited set of special characters <code>-</code> (dash), <code>_</code> (underscore).
They are used to denote Mill modules, tasks, but in the case of <a href="Modules.html#external-modules" class="xref page">external modules</a> their Scala package names.</p>
</div>
<div class="paragraph">
<p><em>Cross segments</em> start with a label segment but contain additional square brackets (<code>[</code>, <code>]</code>]) and are used to denote cross module and their parameters.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Segments can be surrounded by parentheses (<code>(</code>, <code>)</code>)).
When combined with <a href="#type-filters">qualified type filter</a> which contain dots (<code>.</code>), the parentheses need to be used, to avoid the dots to being interpreted as path separators.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="select-multiple-targets"><a class="anchor" href="#select-multiple-targets"></a>Selecting multiple targets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to select more than one target, you have multiple options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#enumerations">Use target enumerations</a></p>
</li>
<li>
<p><a href="#wildcards">Use wildcard selections</a></p>
</li>
<li>
<p><a href="#type-filters">Specify type filters on wildcard selections</a></p>
</li>
<li>
<p><a href="#add-target-selector">Use <code>+</code> to use more than one target selector</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also combine these techniques to properly select your targets</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enumerations"><a class="anchor" href="#enumerations"></a>Enumerations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Enumeration are denoted by curly braces (<code>{</code>, <code>}</code>).
Inside the curly braces you can place two or more selector paths, separated with a comma (<code>,</code>).</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{foo,bar}</code> simple enumerates two targets, <code>foo</code> and <code>bar</code></p>
</li>
<li>
<p><code>foo.{compile,run}</code> expands to <code>foo.compile</code> and <code>foo.run</code></p>
</li>
<li>
<p><code>{_,foo.bar}.baz</code> expands to <code>_.baz</code> and <code>foo.bar.baz</code></p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Some Shells like <code>bash</code> support curly braces expansion.
Make sure to properly mask the selector path, e.g. by putting it in quotes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mill &quot;foo.{compile.run}&quot;</pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="wildcards"><a class="anchor" href="#wildcards"></a>Wildcard selections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two wildcards, you can use as path segment.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>_</code> The single underscore acts as a placeholder for a single segment.</p>
</li>
<li>
<p><code>__</code> The double underscore acts as a placeholder for many segments.
In particular, it can represent an empty segment.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With wildcards, you can get explicit control over the position of a target in the build tree.</p>
</div>
<div class="paragraph">
<p>E.g. the filter <code>_._._.jar</code> will match all jar targets, that are on the third-level of the build tree.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="type-filters"><a class="anchor" href="#type-filters"></a>Type filters for wildcard selections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Type filters are always combined with wildcard.
They are used to limit the scope of the wildcard to only match path segments of the specified types.
For module paths this means, the represented module needs to be an instance of the specified type.</p>
</div>
<div class="paragraph">
<p>A type filter always starts with a wildcard (<code>_</code>, <code>__</code>) followed by a colon (<code>:</code>) and finally  the <em>type qualifier</em>.</p>
</div>
<div class="paragraph">
<p>The type is matched by its name and optionally by its enclosing types and packages, separated by a <code>.</code> sign.
Since this is also used to separate target path segments, a type selector segment containing a <code>.</code> needs to be enclosed in parentheses.
A fully qualified type can be denoted with the <code>_root_</code> package.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; mill resolve __:TestModule.jar
&gt; mill resolve &quot;(__:scalalib.TestModule).jar&quot;
&gt; mill resolve &quot;(__:mill.scalalib.TestModule).jar&quot;
&gt; mill resolve &quot;(__:_root_.mill.scalalib.TestModule).jar&quot;</pre>
</div>
</div>
<div class="paragraph">
<p>If the type qualifier starts with a <code>^</code> or <code>!</code>, it’s only matching types which are <em>not</em> instances of the specified type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; mill resolve __:^TestModule.jar</pre>
</div>
</div>
<div class="paragraph">
<p>You can also add more than one type filters to a wildcard.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; mill resolve &quot;__:JavaModule:^ScalaModule:^TestModule.jar&quot;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Type filter are currently only supported for module selections, but not for target selections.
That means, you can’t filter based on the result type of a target.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-target-selector"><a class="anchor" href="#add-target-selector"></a>Start a new target selector with <code>+</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>On the Mill CLI you can also start a complete new target selector with the <code>+</code> sign.</p>
</div>
<div class="paragraph">
<p>There is a subtile difference between the expansion of <a href="#enumerations">enumerations</a>, <a href="#wildcards">wildcards</a> and <a href="#type-filters">wildcards with type filters</a> in contrast to the  <a href="#add-target-selector">start of a new selector with <code>+</code></a>.</p>
</div>
<div class="paragraph">
<p>For all the former versions, Mill parses them into a complex but single target selector path and subsequent parameters are used for all resolved targets.</p>
</div>
<div class="paragraph">
<p>Whereas the <code>+</code> start a completely new selector path to which you can also provide a different parameter list. This is important when using <a href="Tasks.html#commands" class="xref page">command targets</a> which can accept their own parameters. The <code>JavaModule.run</code> command is an example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; mill foo.run hello                         <i class="conum" data-value="1"></i><b>(1)</b>
&gt; mill {foo,bar}.run hello                   <i class="conum" data-value="2"></i><b>(2)</b>
&gt; mill __:JavaModule:^TestModule.run hello   <i class="conum" data-value="3"></i><b>(3)</b>
&gt; mill foo.run hello + bar.run world         <i class="conum" data-value="4"></i><b>(4)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Runs <code>foo.run</code> with the parameter <code>hello</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Expands to <code>foo.run</code> and <code>bar.run</code> and runs both with the parameter <code>hello</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Selects the <code>run</code> command of all Java modules, but not test moudles, and runs them with the parameter <code>hello</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Runs <code>fun.run</code> with the parameter <code>hello</code> and <code>bar.run</code> with the parameter <code>world</code>.</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="Cross_Builds.html">Cross Builds</a></span>
  <span class="next"><a href="Extending_Mill.html">Extending Mill</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async="async" src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async="async" src="../../search-index.js"></script>
  
</body></html>