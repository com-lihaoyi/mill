= Android Build Examples
:page-aliases: android_app_examples.adoc

++++
<script>
gtag('config', 'AW-16649289906');
</script>
++++

This page provides examples of using Mill as a build tool for Android applications. 
Each example highlights a specific aspect of Mill, allowing you to configure, test, and build Android apps efficiently. 
By the end of this guide, you will understand how Mill can manage Android project structures, compile modules, and handle APK packaging.

For detailed information, refer to Mill's https://com-lihaoyi.github.io/mill[official documentation],
and the https://developer.android.com/studio[Android Developer Guide].

== Relevant Modules

These are the main Mill Modules that are relevant for building Android apps:

* {mill-doc-url}/api/latest/mill/scalalib/AndroidSdkModule.html[`mill.scalalib.AndroidSdkModule`]: Handles Android SDK management and tools.
* {mill-doc-url}/api/latest/mill/javalib/android/AndroidAppModule.html[`mill.javalib.android.AndroidAppModule`]: Provides a framework for building Android applications.
* {mill-doc-url}/api/latest/mill/scalalib/JavaModule.html[`mill.scalalib.JavaModule`]: General Java build tasks like compiling Java code and creating JAR files.

== Simple Android Hello World Application

include::partial$example/javalib/android/1-hello-world.adoc[]

This example demonstrates how to create a basic "Hello World" Android application using the Mill build tool. It outlines the minimum setup required to compile Java code, package it into an APK, and run the app on an Android device.

== Understanding `AndroidSdkModule` and `AndroidAppModule`

The two main modules you need to understand when building Android apps with Mill are `AndroidSdkModule` and `AndroidAppModule`.

`AndroidSdkModule`:

* This module manages the installation and configuration of the Android SDK, which includes tools like `aapt`, `d8`, `zipalign`, and `apksigner`. These tools are crucial for compiling, packaging, and signing Android applications.

`AndroidAppModule`:
This module provides the step-by-step workflow for building an Android app. It handles everything from compiling the code to generating a signed APK for distribution.

1. **Compiling Java code**: The module compiles your Java code into `.class` files, which is the first step in creating an Android app.
2. **Packaging into JAR**: It then packages the compiled `.class` files into a JAR file, which is necessary before converting to Android's format.
3. **Converting to DEX format**: The JAR file is converted into DEX format, which is the executable format for Android applications.
4. **Creating an APK**: The DEX files and Android resources (like layouts and strings) are packaged together into an APK file, which is the installable file for Android devices.
5. **Optimizing with zipalign**: The APK is optimized using `zipalign` to ensure better performance on Android devices.
6. **Signing the APK**: Finally, the APK is signed with a digital signature, allowing it to be distributed and installed on Android devices.

== Testing Your Application

You can perform manual testing on your Android APK to ensure it functions as expected. The Mill team is working on automating testing procedures for Android applications, which will be shared in future updates.

== Why Use Mill for Android Development?

Mill provides several advantages over other build tools, including:

* **Efficiency**: Mill's build process is fast and optimized for minimal configuration, which speeds up the Android app creation process.

* **Modularity**: Mill allows you to easily extend and customize your builds by leveraging its modular design.

* **Scalability**: Mill can scale well for larger projects while maintaining simplicity in configuration.

By using Mill, you can streamline your Android app development, saving time and reducing complexity.
